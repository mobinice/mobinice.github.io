<!doctype html>
<html lang="zh-TW" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Copaws å¯µç‰©æ—¥è¨˜</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700;800&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
      font-family: 'Nunito', sans-serif;
    }
    
    .phone-frame {
      width: 390px;
      height: 844px;
      max-width: 100%;
      max-height: 100%;
    }
    
    .tab-active {
      color: #0c5832;
      border-bottom: 3px solid #0c5832;
    }
    
    .paw-button {
      transition: all 0.3s ease;
      position: relative;
    }
    
    .paw-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(12, 88, 50, 0.3);
    }
    
    .paw-button:active {
      transform: scale(0.95);
    }
    
    .calendar-day {
      transition: all 0.2s ease;
      position: relative;
    }
    
    .calendar-day:hover {
      background: #e7f5ee;
      transform: scale(1.05);
    }
    
    .calendar-day.has-entry {
      padding: 4px;
      position: relative;
    }
    
    .photo-stack {
      position: relative;
      width: 100%;
      height: 100%;
    }
    
    .photo-stack-item {
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 6px;
      overflow: hidden;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      transition: transform 0.2s ease;
    }
    
    .photo-stack-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    /* Stacking effect - each photo slightly offset */
    .photo-stack-item:nth-child(1) {
      transform: translate(0, 0) rotate(0deg);
      z-index: 3;
    }
    
    .photo-stack-item:nth-child(2) {
      transform: translate(3px, 3px) rotate(3deg);
      z-index: 2;
    }
    
    .photo-stack-item:nth-child(3) {
      transform: translate(6px, 6px) rotate(-3deg);
      z-index: 1;
    }
    
    .calendar-day:hover .photo-stack-item:nth-child(1) {
      transform: translate(-2px, -2px) rotate(-2deg);
    }
    
    .calendar-day:hover .photo-stack-item:nth-child(2) {
      transform: translate(4px, 4px) rotate(5deg);
    }
    
    .calendar-day:hover .photo-stack-item:nth-child(3) {
      transform: translate(8px, 8px) rotate(-5deg);
    }
    
    .calendar-day .day-number {
      position: absolute;
      bottom: 6px;
      right: 6px;
      font-size: 10px;
      background: rgba(255,255,255,0.95);
      padding: 3px 6px;
      border-radius: 6px;
      z-index: 10;
      font-weight: 800;
      color: #0c5832;
      box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
    
    .fade-in {
      animation: fadeIn 0.3s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .slide-up {
      animation: slideUp 0.4s ease;
    }
    
    @keyframes slideUp {
      from { opacity: 0; transform: translateY(100%); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .page-transition-out {
      animation: fadeOutScale 0.4s ease forwards;
    }
    
    .page-transition-in {
      animation: fadeInScale 0.5s ease forwards;
    }
    
    @keyframes fadeOutScale {
      from { opacity: 1; transform: scale(1); }
      to { opacity: 0; transform: scale(0.95); }
    }
    
    @keyframes fadeInScale {
      from { opacity: 0; transform: scale(1.05); }
      to { opacity: 1; transform: scale(1); }
    }
    
    .scrollable {
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }
    
    .scrollable::-webkit-scrollbar {
      width: 4px;
    }
    
    .scrollable::-webkit-scrollbar-thumb {
      background: #e5ad3f;
      border-radius: 4px;
    }
    
    .detail-page {
      position: absolute;
      inset: 0;
      z-index: 50;
    }
    
    .paw-icon {
      display: inline-block;
      animation: pawBounce 2s ease-in-out infinite;
      filter: sepia(100%) saturate(300%) hue-rotate(10deg) brightness(1.1);
    }
    
    @keyframes pawBounce {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-5px) rotate(-5deg); }
    }
    
    .login-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 24px;
      box-shadow: 0 20px 60px rgba(12, 88, 50, 0.2);
    }
    
    .input-field {
      transition: all 0.3s ease;
    }
    
    .input-field:focus {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(12, 88, 50, 0.15);
    }
    
    .toast {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: white;
      padding: 12px 24px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      z-index: 1000;
      animation: slideDown 0.3s ease;
    }
    
    @keyframes slideDown {
      from { opacity: 0; transform: translate(-50%, -20px); }
      to { opacity: 1; transform: translate(-50%, 0); }
    }
    
    .demo-badge {
      display: inline-block;
      background: linear-gradient(135deg, #e5ad3f 0%, #d99e2f 100%);
      color: white;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: bold;
      margin-left: 8px;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full bg-gradient-to-br from-green-100 via-emerald-50 to-teal-100 flex items-center justify-center p-2">
  <div class="phone-frame bg-white rounded-[40px] shadow-2xl overflow-hidden flex flex-col relative"><!-- Login Screen -->
   <div id="login-screen" class="h-full flex flex-col items-center justify-center p-8 relative overflow-hidden" style="background: linear-gradient(to bottom right, #e7f5ee, #d4ebe1, #c8e6d4);"><!-- Decorative paws -->
    <div class="absolute top-10 left-10 text-6xl opacity-30 paw-icon">
     ğŸ¾
    </div>
    <div class="absolute bottom-20 right-10 text-6xl opacity-30 paw-icon" style="animation-delay: 0.5s;">
     ğŸ¾
    </div>
    <div class="absolute top-40 right-20 text-4xl opacity-20 paw-icon" style="animation-delay: 1s;">
     ğŸ¾
    </div>
    <div class="login-card w-full max-w-sm p-8 relative z-10"><!-- Logo -->
     <div class="text-center mb-8">
      <div class="text-6xl mb-4 paw-icon">
       ğŸ¾
      </div>
      <h1 class="text-4xl font-extrabold mb-2" style="color: #0c5832;">Copaws</h1>
      <p class="text-gray-600 text-sm">è¨˜éŒ„å¯¶è²çš„æ¯ä¸€åˆ» â¤ï¸</p>
     </div><!-- Login/Register Form -->
     <div id="auth-step-1" class="space-y-4">
      <div><label for="auth-input" class="block text-sm font-semibold text-gray-700 mb-2">Email æˆ–æ‰‹æ©Ÿè™Ÿç¢¼</label> <input type="text" id="auth-input" class="input-field w-full px-4 py-3 border-2 rounded-xl focus:outline-none" style="border-color: #c8e6d4;" placeholder="è¼¸å…¥ Email æˆ–æ‰‹æ©Ÿè™Ÿç¢¼">
      </div><button id="auth-continue-btn" class="paw-button w-full text-white font-bold py-3 rounded-xl" style="background: linear-gradient(to right, #0c5832, #0a4528);"> ç¹¼çºŒ </button>
      <div class="text-center text-sm text-gray-500 my-4">
       æˆ–
      </div><button id="google-login-btn" class="w-full bg-white border-2 border-gray-300 text-gray-700 font-semibold py-3 rounded-xl hover:bg-gray-50 flex items-center justify-center gap-2">
       <svg class="w-5 h-5" viewbox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" /> <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" /> <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" /> <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" />
       </svg> ä½¿ç”¨ Google ç™»å…¥ </button>
      <div class="mt-4 p-3 rounded-xl" style="background: linear-gradient(to right, #e7f5ee, #d4ebe1);">
       <p class="text-sm text-center" style="color: #0c5832;"><strong>ğŸ’¡ ç¤ºç¯„æ¨¡å¼</strong><br><span class="text-xs">é»æ“Šä»»æ„æŒ‰éˆ•å³å¯é€²å…¥</span></p>
      </div>
     </div><!-- Registration Form -->
     <div id="registration-form" class="hidden space-y-4">
      <div class="text-center mb-4">
       <h2 class="text-2xl font-bold" style="color: #0c5832;">å»ºç«‹å¸³è™Ÿ</h2>
       <p class="text-sm text-gray-600">å¹«å¯¶è²å»ºç«‹å°ˆå±¬æ—¥è¨˜</p>
      </div>
      <div class="grid grid-cols-2 gap-3">
       <div><label for="pet-type" class="block text-xs font-semibold text-gray-700 mb-1">å¯µç‰©é¡åˆ¥</label> <select id="pet-type" class="input-field w-full px-3 py-2 border-2 rounded-lg focus:outline-none text-sm" style="border-color: #c8e6d4;"> <option value="">é¸æ“‡</option> <option value="dog">ğŸ¶ ç‹—ç‹—</option> <option value="cat">ğŸ± è²“å’ª</option> </select>
       </div>
       <div><label for="pet-gender" class="block text-xs font-semibold text-gray-700 mb-1">æ€§åˆ¥</label> <select id="pet-gender" class="input-field w-full px-3 py-2 border-2 rounded-lg focus:outline-none text-sm" style="border-color: #c8e6d4;"> <option value="">é¸æ“‡</option> <option value="male">â™‚ å…¬</option> <option value="female">â™€ æ¯</option> </select>
       </div>
      </div>
      <div><label for="pet-name" class="block text-xs font-semibold text-gray-700 mb-1">å¯µç‰©åå­—</label> <input type="text" id="pet-name" class="input-field w-full px-3 py-2 border-2 rounded-lg focus:outline-none text-sm" style="border-color: #c8e6d4;" placeholder="ä¾‹å¦‚ï¼šLucky">
      </div>
      <div><label for="pet-breed" class="block text-xs font-semibold text-gray-700 mb-1">å“ç¨®</label> <input type="text" id="pet-breed" class="input-field w-full px-3 py-2 border-2 rounded-lg focus:outline-none text-sm" style="border-color: #c8e6d4;" placeholder="ä¾‹å¦‚ï¼šæŸ´çŠ¬">
      </div>
      <div class="grid grid-cols-3 gap-3">
       <div><label for="pet-age" class="block text-xs font-semibold text-gray-700 mb-1">å¹´é½¡</label> <input type="number" id="pet-age" class="input-field w-full px-3 py-2 border-2 rounded-lg focus:outline-none text-sm" style="border-color: #c8e6d4;" placeholder="æ­²">
       </div>
       <div><label for="pet-color" class="block text-xs font-semibold text-gray-700 mb-1">æ¯›è‰²</label> <input type="text" id="pet-color" class="input-field w-full px-3 py-2 border-2 rounded-lg focus:outline-none text-sm" style="border-color: #c8e6d4;" placeholder="é»ƒè‰²">
       </div>
       <div><label for="pet-weight" class="block text-xs font-semibold text-gray-700 mb-1">é«”é‡</label> <input type="number" id="pet-weight" class="input-field w-full px-3 py-2 border-2 rounded-lg focus:outline-none text-sm" style="border-color: #c8e6d4;" placeholder="kg">
       </div>
      </div><button id="register-submit-btn" class="paw-button w-full text-white font-bold py-3 rounded-xl mt-4" style="background: linear-gradient(to right, #0c5832, #0a4528);"> é–‹å§‹è¨˜éŒ„ ğŸ¾ </button> <button id="back-to-login-btn" class="w-full text-gray-600 text-sm" style="hover:color: #0c5832;"> â† è¿”å› </button>
     </div>
    </div>
   </div><!-- Main App (Hidden initially) -->
   <div id="main-app" class="h-full flex flex-col hidden"><!-- Status Bar -->
    <header class="h-12 flex items-center justify-center px-6" style="background: linear-gradient(to right, #0c5832, #0a4528);">
     <h1 id="app-title" class="text-white font-bold text-lg">ğŸ¾ Copaws</h1><span class="demo-badge">ç¤ºç¯„æ¨¡å¼</span>
    </header><!-- Main Content -->
    <main class="flex-1 overflow-hidden flex flex-col" style="background: linear-gradient(to bottom, #e7f5ee, #ffffff);"><!-- Upload Tab Content -->
     <section id="upload-tab" class="flex-1 flex flex-col p-4 overflow-hidden">
      <div class="text-center mb-3">
       <h2 class="text-xl font-bold mb-1" style="color: #0c5832;">ä¸Šå‚³ç…§ç‰‡ ğŸ“¸</h2>
       <p class="text-gray-600 text-xs">è¨˜éŒ„æ¯›å­©çš„ç¾å¥½æ™‚å…‰</p>
      </div><!-- Demo Notice -->
      <div class="mb-3 p-3 rounded-xl border-2" style="background: linear-gradient(to right, #e7f5ee, #d4ebe1); border-color: #c8e6d4;">
       <p class="text-xs text-center font-semibold" style="color: #0c5832;">âœ¨ é€™æ˜¯ç¤ºç¯„ç‰ˆæœ¬<br><span class="text-xs">è«‹åˆ°ã€Œå›æ†¶ã€é é¢æŸ¥çœ‹ç¯„ä¾‹ç…§ç‰‡</span></p>
      </div><!-- Upload Button (Always visible) --> <label for="file-input" id="upload-btn" class="paw-button text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 cursor-pointer mb-3" style="background: linear-gradient(to right, #e5ad3f, #d99e2f);"> <span class="text-2xl">ğŸ“·</span> <span>é¸æ“‡ç…§ç‰‡</span> </label> <input type="file" id="file-input" accept="image/*" class="hidden"> <!-- Image Preview & Upload Form -->
      <div id="upload-form-container" class="hidden space-y-3 flex-1 flex flex-col"><!-- Image Preview -->
       <div id="image-preview-container" class="relative rounded-xl overflow-hidden shadow-lg"><img id="image-preview" class="w-full object-contain max-h-40" alt="é è¦½åœ–ç‰‡"> <button id="remove-image-btn" class="absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 text-sm"> âœ• </button>
       </div><!-- Note Input -->
       <div class="flex-1 flex flex-col"><label for="photo-note" class="block text-xs font-bold mb-1" style="color: #0c5832;">å¯«ä¸‹å›æ†¶</label> <textarea id="photo-note" class="input-field w-full px-3 py-2 border-2 rounded-xl focus:outline-none resize-none flex-1 text-sm" rows="3" style="border-color: #c8e6d4;" placeholder="ä»Šå¤©ç™¼ç”Ÿäº†ä»€éº¼æœ‰è¶£çš„äº‹å‘¢ï¼Ÿ ğŸ˜Š"></textarea>
       </div><!-- Date Selection -->
       <div><label for="photo-date" class="block text-xs font-bold mb-1" style="color: #0c5832;">é¸æ“‡æ—¥æœŸ</label> <input type="date" id="photo-date" class="input-field w-full px-3 py-2 border-2 rounded-xl focus:outline-none text-sm" style="border-color: #c8e6d4;">
       </div><!-- Upload Button --> <button id="save-photo-btn" class="paw-button w-full text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2" style="background: linear-gradient(to right, #0c5832, #0a4528);"> é–‹å§‹ä¸Šå‚³ âœ¨ </button> <!-- Progress Bar (Hidden by default) -->
       <div id="upload-progress-container" class="hidden">
        <div class="mb-1 flex justify-between items-center"><span class="text-xs font-semibold" style="color: #0c5832;">ä¸Šå‚³ä¸­...</span> <span id="upload-percentage" class="text-xs font-bold" style="color: #0c5832;">0%</span>
        </div>
        <div class="w-full h-2 bg-gray-200 rounded-full overflow-hidden">
         <div id="upload-progress-bar" class="h-full transition-all duration-300" style="width: 0%; background: linear-gradient(to right, #0c5832, #10b981);"></div>
        </div>
       </div><!-- Success Message (Hidden by default) -->
       <div id="upload-success" class="hidden p-3 rounded-xl border-2 text-center" style="background: linear-gradient(to right, #e7f5ee, #d4ebe1); border-color: #c8e6d4;">
        <div class="text-3xl mb-1">
         âœ…
        </div>
        <p class="font-bold mb-2 text-sm" style="color: #0c5832;">ä¸Šå‚³æˆåŠŸï¼</p><button id="upload-another-btn" class="paw-button w-full text-white font-semibold py-2.5 rounded-xl text-sm" style="background: linear-gradient(to right, #0c5832, #0a4528);"> ç¹¼çºŒä¸Šå‚³ä¸‹ä¸€å¼µ </button>
       </div>
      </div>
     </section><!-- Profile Tab Content -->
     <section id="profile-tab" class="flex-1 flex flex-col p-5 overflow-hidden hidden"><!-- Avatar Upload -->
      <div class="flex flex-col items-center mb-4">
       <div class="relative mb-3">
        <div id="pet-avatar-display" class="w-24 h-24 rounded-full flex items-center justify-center text-5xl overflow-hidden border-4 shadow-xl" style="background: linear-gradient(to bottom right, #c8e6d4, #e5ad3f); border-color: #0c5832;">
         ğŸ¶
        </div><label for="avatar-input" class="absolute bottom-0 right-0 w-8 h-8 rounded-full flex items-center justify-center cursor-pointer shadow-lg" style="background: #0c5832;">
         <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" /> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" />
         </svg></label> <input type="file" id="avatar-input" accept="image/*" class="hidden">
       </div>
       <h3 id="profile-pet-name" class="text-xl font-bold text-gray-800 mb-1">Lucky</h3>
       <p class="text-xs text-gray-500">æˆ‘çš„æ¯›å­© â¤ï¸</p>
      </div><!-- Pet Info Cards -->
      <div class="space-y-2 mb-4">
       <div class="rounded-lg p-2 border-2" style="background: linear-gradient(to right, #e7f5ee, #d4ebe1); border-color: #c8e6d4;"><label class="text-xs font-semibold mb-1 block" style="color: #0c5832;">å¹´é½¡</label> <input type="number" id="profile-age" class="input-field w-full px-2 py-1 border-2 rounded-lg focus:outline-none bg-white text-sm" style="border-color: #c8e6d4;" placeholder="æ­²">
       </div>
       <div class="rounded-lg p-2 border-2" style="background: linear-gradient(to right, #e7f5ee, #d4ebe1); border-color: #c8e6d4;"><label class="text-xs font-semibold mb-1 block" style="color: #0c5832;">é¡åˆ¥</label> <select id="profile-type" class="input-field w-full px-2 py-1 border-2 rounded-lg focus:outline-none bg-white text-sm" style="border-color: #c8e6d4;"> <option value="dog">ğŸ¶ ç‹—ç‹—</option> <option value="cat">ğŸ± è²“å’ª</option> </select>
       </div>
       <div class="rounded-lg p-2 border-2" style="background: linear-gradient(to right, #e7f5ee, #d4ebe1); border-color: #c8e6d4;"><label class="text-xs font-semibold mb-1 block" style="color: #0c5832;">é«”é‡</label> <input type="number" id="profile-weight" class="input-field w-full px-2 py-1 border-2 rounded-lg focus:outline-none bg-white text-sm" style="border-color: #c8e6d4;" placeholder="kg">
       </div>
       <div class="rounded-lg p-2 border-2" style="background: linear-gradient(to right, #e7f5ee, #d4ebe1); border-color: #c8e6d4;"><label class="text-xs font-semibold mb-1 block" style="color: #0c5832;">å“ç¨®</label> <input type="text" id="profile-breed" class="input-field w-full px-2 py-1 border-2 rounded-lg focus:outline-none bg-white text-sm" style="border-color: #c8e6d4;" placeholder="ä¾‹å¦‚ï¼šæŸ´çŠ¬">
       </div>
       <div class="rounded-lg p-2 border-2" style="background: linear-gradient(to right, #e7f5ee, #d4ebe1); border-color: #c8e6d4;"><label class="text-xs font-semibold mb-1 block" style="color: #0c5832;">æ¯›è‰²</label> <input type="text" id="profile-color" class="input-field w-full px-2 py-1 border-2 rounded-lg focus:outline-none bg-white text-sm" style="border-color: #c8e6d4;" placeholder="ä¾‹å¦‚ï¼šé»ƒè‰²">
       </div>
      </div><!-- Save Button --> <button id="save-profile-btn" class="paw-button w-full text-white font-bold py-2.5 rounded-xl mb-2" style="background: linear-gradient(to right, #0c5832, #0a4528);"> å„²å­˜è³‡æ–™ âœ¨ </button> <!-- Logout Button --> <button id="logout-btn" class="w-full bg-gray-100 text-gray-700 font-semibold py-2 rounded-xl hover:bg-gray-200"> ç™»å‡º </button>
     </section><!-- Calendar Tab Content -->
     <section id="calendar-tab" class="flex-1 flex flex-col p-4 scrollable hidden"><!-- Calendar Header -->
      <div class="flex items-center justify-between mb-4"><button id="prev-month" class="w-10 h-10 rounded-full flex items-center justify-center transition" style="background: #e7f5ee; color: #0c5832;">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg></button>
       <h2 id="current-month" class="text-xl font-bold text-gray-800"></h2><button id="next-month" class="w-10 h-10 rounded-full flex items-center justify-center transition" style="background: #e7f5ee; color: #0c5832;">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg></button>
      </div><!-- Weekday Headers -->
      <div class="grid grid-cols-7 gap-1 mb-2">
       <div class="text-center text-sm font-bold text-gray-500 py-2">
        æ—¥
       </div>
       <div class="text-center text-sm font-bold text-gray-500 py-2">
        ä¸€
       </div>
       <div class="text-center text-sm font-bold text-gray-500 py-2">
        äºŒ
       </div>
       <div class="text-center text-sm font-bold text-gray-500 py-2">
        ä¸‰
       </div>
       <div class="text-center text-sm font-bold text-gray-500 py-2">
        å››
       </div>
       <div class="text-center text-sm font-bold text-gray-500 py-2">
        äº”
       </div>
       <div class="text-center text-sm font-bold text-gray-500 py-2">
        å…­
       </div>
      </div><!-- Calendar Grid -->
      <div id="calendar-grid" class="grid grid-cols-7 gap-1 mb-4"></div><!-- Hint -->
      <div class="mt-auto p-3 rounded-xl text-center" style="background: linear-gradient(to right, #e7f5ee, #d4ebe1);">
       <p class="text-sm font-semibold" style="color: #0c5832;">ğŸ¾ é»æ“Šæ—¥æœŸæŸ¥çœ‹æ¯›å­©çš„å›æ†¶</p>
      </div>
     </section>
    </main><!-- Bottom Navigation -->
    <nav class="h-20 bg-white flex" style="border-top: 1px solid #c8e6d4;"><button id="nav-upload" class="flex-1 flex flex-col items-center justify-center tab-active transition">
      <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
      </svg><span class="text-xs font-bold">ç´€éŒ„</span> </button> <button id="nav-calendar" class="flex-1 flex flex-col items-center justify-center text-gray-400 transition">
      <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
      </svg><span class="text-xs font-bold">å›æ†¶</span> </button> <button id="nav-profile" class="flex-1 flex flex-col items-center justify-center text-gray-400 transition">
      <svg class="w-7 h-7 mb-1" fill="none" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24"><circle cx="12" cy="4" r="1.5" /> <circle cx="19" cy="8" r="1.5" /> <circle cx="5" cy="8" r="1.5" /> <path d="M19.5 13c-.83 0-1.5.67-1.5 1.5 0 .15.03.29.07.43C15.4 15.35 13.21 16 12 16c-1.21 0-3.4-.65-6.07-1.07.04-.14.07-.28.07-.43 0-.83-.67-1.5-1.5-1.5S3 13.67 3 14.5c0 .66.42 1.23 1.01 1.44C5.37 18.07 7.61 21 12 21s6.63-2.93 7.99-5.06c.59-.21 1.01-.78 1.01-1.44 0-.83-.67-1.5-1.5-1.5z" stroke-linecap="round" stroke-linejoin="round" />
      </svg><span class="text-xs font-bold">å¯¶è²</span> </button>
    </nav>
   </div><!-- Detail Page (Hidden by default) -->
   <div id="detail-page" class="detail-page hidden">
    <div class="h-full flex flex-col slide-up" style="background: linear-gradient(to bottom, #e7f5ee, #ffffff);"><!-- Detail Header -->
     <header class="h-14 flex items-center px-4" style="background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px); border-bottom: 1px solid #c8e6d4;"><button id="back-btn" class="w-10 h-10 rounded-full text-white flex items-center justify-center transition" style="background: #0c5832;">
       <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
       </svg></button>
      <h2 id="detail-title" class="flex-1 text-center font-bold text-gray-800 pr-10"></h2>
     </header><!-- Detail Content -->
     <div id="detail-content" class="flex-1 p-4 scrollable"><!-- Photos will be inserted here -->
     </div><!-- Next Date Hint -->
     <div id="next-date-hint" class="p-4 bg-white text-center hidden" style="border-top: 1px solid #c8e6d4;">
      <p class="text-sm font-semibold" style="color: #0c5832;">â†“ ç¹¼çºŒå‘ä¸‹æ»‘å‹•æŸ¥çœ‹ä¸‹ä¸€å¤© â†“</p>
     </div>
    </div>
   </div>
  </div>
  <script>
    // Default configuration
    const defaultConfig = {
      app_title: 'ğŸ¾ Copaws'
    };

    // Sample data - Demo photos (æ¯å€‹æ—¥æœŸéƒ½æœ‰2-3å¼µç…§ç‰‡)
    const samplePhotos = {
      '2025-01-02': [
        { image: 'https://images.unsplash.com/photo-1583511655857-d19b40a7a54e?w=400&h=400&fit=crop', note: 'æ–°å¹´ç¬¬ä¸€å¤©æ•£æ­¥ ğŸ‰', time: '09:00' },
        { image: 'https://images.unsplash.com/photo-1587300003388-59208cc962cb?w=400&h=400&fit=crop', note: 'åœ¨å…¬åœ’é‡åˆ°æ–°æœ‹å‹', time: '09:30' }
      ],
      '2025-01-04': [
        { image: 'https://images.unsplash.com/photo-1587300003388-59208cc962cb?w=400&h=400&fit=crop', note: 'é€±æœ«å»å…¬åœ’ç©', time: '10:30' },
        { image: 'https://images.unsplash.com/photo-1477884213360-7e9d7dcc1e48?w=400&h=400&fit=crop', note: 'è¿½è‘—é£›ç›¤è·‘', time: '11:00' }
      ],
      '2025-01-06': [
        { image: 'https://images.unsplash.com/photo-1477884213360-7e9d7dcc1e48?w=400&h=400&fit=crop', note: 'åœ¨å®¶è£¡ç©è€ ğŸ ', time: '15:00' },
        { image: 'https://images.unsplash.com/photo-1530281700549-e82e7bf110d6?w=400&h=400&fit=crop', note: 'åˆå¾Œçš„æ‚ é–’æ™‚å…‰', time: '15:45' }
      ],
      '2025-01-08': [
        { image: 'https://images.unsplash.com/photo-1530281700549-e82e7bf110d6?w=400&h=400&fit=crop', note: 'ä»Šå¤©å¤©æ°£å¥½å¥½ â˜€ï¸', time: '11:00' },
        { image: 'https://images.unsplash.com/photo-1548199973-03cce0bbc87b?w=400&h=400&fit=crop', note: 'é–‹å¿ƒå¥”è·‘', time: '11:30' },
        { image: 'https://images.unsplash.com/photo-1576201836106-db1758fd1c97?w=400&h=400&fit=crop', note: 'ç©ç´¯äº†ä¼‘æ¯ä¸€ä¸‹', time: '12:00' }
      ],
      '2025-01-10': [
        { image: 'https://images.unsplash.com/photo-1576201836106-db1758fd1c97?w=400&h=400&fit=crop', note: 'æœ€æ„›çš„ç©å…·æ™‚é–“ ğŸ¾', time: '16:00' },
        { image: 'https://images.unsplash.com/photo-1561037404-61cd46aa615b?w=400&h=400&fit=crop', note: 'ç©å¾—å¥½é–‹å¿ƒ', time: '16:30' }
      ],
      '2025-01-12': [
        { image: 'https://images.unsplash.com/photo-1561037404-61cd46aa615b?w=400&h=400&fit=crop', note: 'æ…µæ‡¶çš„é€±æ—¥åˆå¾Œ', time: '14:00' },
        { image: 'https://images.unsplash.com/photo-1537151608828-ea2b11777ee8?w=400&h=400&fit=crop', note: 'äº«å—é™½å…‰', time: '14:30' }
      ],
      '2025-01-14': [
        { image: 'https://images.unsplash.com/photo-1537151608828-ea2b11777ee8?w=400&h=400&fit=crop', note: 'åˆåˆ°å¥½åƒçš„æ™šé¤æ™‚é–“ ğŸ–', time: '18:00' },
        { image: 'https://images.unsplash.com/photo-1583337130417-3346a1be7dee?w=400&h=400&fit=crop', note: 'åƒå¾—å¥½æ»¿è¶³', time: '18:20' }
      ],
      '2025-01-15': [
        { image: 'https://images.unsplash.com/photo-1583511655857-d19b40a7a54e?w=400&h=400&fit=crop', note: 'ä»Šå¤©å¸¶Luckyå»å…¬åœ’ç©ï¼é‡åˆ°å¥½å¤šæœ‹å‹ ğŸ¶', time: '10:30' },
        { image: 'https://images.unsplash.com/photo-1587300003388-59208cc962cb?w=400&h=400&fit=crop', note: 'åœ¨è‰åœ°ä¸Šå¥”è·‘çš„æ¨£å­è¶…å¯æ„› ğŸ’š', time: '11:15' },
        { image: 'https://images.unsplash.com/photo-1477884213360-7e9d7dcc1e48?w=400&h=400&fit=crop', note: 'ç´¯äº†åœ¨æ¨¹è”­ä¸‹ä¼‘æ¯', time: '12:00' }
      ],
      '2025-01-17': [
        { image: 'https://images.unsplash.com/photo-1583337130417-3346a1be7dee?w=400&h=400&fit=crop', note: 'ä¸€èµ·çœ‹é›»è¦–', time: '20:00' },
        { image: 'https://images.unsplash.com/photo-1558788353-f76d92427f16?w=400&h=400&fit=crop', note: 'çª©åœ¨æ²™ç™¼è€å»¢', time: '20:30' }
      ],
      '2025-01-18': [
        { image: 'https://images.unsplash.com/photo-1530281700549-e82e7bf110d6?w=400&h=400&fit=crop', note: 'ç¬¬ä¸€æ¬¡å˜—è©¦æ¸¸æ³³ï¼æœ‰ç·Šå¼µä½†å¾ˆå‹‡æ•¢ ğŸŠ', time: '14:20' },
        { image: 'https://images.unsplash.com/photo-1548199973-03cce0bbc87b?w=400&h=400&fit=crop', note: 'ç©æ°´ç©å¾—å¥½é–‹å¿ƒ', time: '15:00' }
      ],
      '2025-01-20': [
        { image: 'https://images.unsplash.com/photo-1558788353-f76d92427f16?w=400&h=400&fit=crop', note: 'æ´—æ¾¡å›‰ ğŸ›', time: '10:00' },
        { image: 'https://images.unsplash.com/photo-1415369629372-26f2fe60c467?w=400&h=400&fit=crop', note: 'æ´—å¾—é¦™é¦™çš„', time: '10:30' }
      ],
      '2025-01-22': [
        { image: 'https://images.unsplash.com/photo-1576201836106-db1758fd1c97?w=400&h=400&fit=crop', note: 'æ–°è²·çš„ç©å…·ï¼è¶…ç´šå–œæ­¡ ğŸ¾', time: '16:45' },
        { image: 'https://images.unsplash.com/photo-1583511655857-d19b40a7a54e?w=400&h=400&fit=crop', note: 'ç©å…·è¶…å¥½ç©', time: '17:15' }
      ],
      '2025-01-23': [
        { image: 'https://images.unsplash.com/photo-1415369629372-26f2fe60c467?w=400&h=400&fit=crop', note: 'ä»Šå¤©å¿ƒæƒ…å¾ˆå¥½ ğŸ˜Š', time: '11:00' },
        { image: 'https://images.unsplash.com/photo-1587300003388-59208cc962cb?w=400&h=400&fit=crop', note: 'æ¯å¤©éƒ½è¦é–‹å¿ƒ', time: '11:30' }
      ],
      '2025-01-25': [
        { image: 'https://images.unsplash.com/photo-1561037404-61cd46aa615b?w=400&h=400&fit=crop', note: 'åˆç¡æ™‚é–“ ç¡å¾—å¥½é¦™ç”œ', time: '13:30' },
        { image: 'https://images.unsplash.com/photo-1537151608828-ea2b11777ee8?w=400&h=400&fit=crop', note: 'é†’ä¾†ç¬¬ä¸€ä»¶äº‹å°±æ‰¾é›¶é£Ÿ', time: '15:20' },
        { image: 'https://images.unsplash.com/photo-1583337130417-3346a1be7dee?w=400&h=400&fit=crop', note: 'æ™šä¸Šä¸€èµ·çœ‹é›»è¦– ğŸ¬', time: '19:00' }
      ],
      '2025-01-26': [
        { image: 'https://images.unsplash.com/photo-1583511655857-d19b40a7a54e?w=400&h=400&fit=crop', note: 'æ—©æ™¨æ•£æ­¥', time: '08:00' },
        { image: 'https://images.unsplash.com/photo-1477884213360-7e9d7dcc1e48?w=400&h=400&fit=crop', note: 'å‘¼å¸æ–°é®®ç©ºæ°£', time: '08:30' }
      ],
      '2025-01-28': [
        { image: 'https://images.unsplash.com/photo-1558788353-f76d92427f16?w=400&h=400&fit=crop', note: 'ä»Šå¤©å»å¯µç‰©ç¾å®¹ï¼è®Šå¾—é¦™é¦™çš„ âœ¨', time: '10:00' },
        { image: 'https://images.unsplash.com/photo-1415369629372-26f2fe60c467?w=400&h=400&fit=crop', note: 'æ–°é€ å‹è¶…å…ƒæ°£', time: '11:30' }
      ],
      '2025-01-29': [
        { image: 'https://images.unsplash.com/photo-1587300003388-59208cc962cb?w=400&h=400&fit=crop', note: 'è·‘è·‘è·³å¥½é–‹å¿ƒ', time: '16:00' },
        { image: 'https://images.unsplash.com/photo-1530281700549-e82e7bf110d6?w=400&h=400&fit=crop', note: 'é‹å‹•çœŸå¿«æ¨‚', time: '16:30' }
      ],
      '2025-01-30': [
        { image: 'https://images.unsplash.com/photo-1477884213360-7e9d7dcc1e48?w=400&h=400&fit=crop', note: 'åœ¨å¾Œé™¢æ›¬å¤ªé™½ â˜€ï¸', time: '14:00' },
        { image: 'https://images.unsplash.com/photo-1548199973-03cce0bbc87b?w=400&h=400&fit=crop', note: 'äº«å—æº«æš–çš„é™½å…‰', time: '14:45' }
      ]
    };

    // Global state
    let currentDate = new Date(2025, 0, 1);
    let currentUser = null;
    let currentViewDate = null;
    let petAvatar = null;
    let petProfile = { name: 'Lucky', age: '', type: 'dog', weight: '', breed: '', color: '' };

    // DOM Elements - Login
    const loginScreen = document.getElementById('login-screen');
    const mainApp = document.getElementById('main-app');
    const authInput = document.getElementById('auth-input');
    const authContinueBtn = document.getElementById('auth-continue-btn');
    const googleLoginBtn = document.getElementById('google-login-btn');
    const authStep1 = document.getElementById('auth-step-1');
    const registrationForm = document.getElementById('registration-form');
    const registerSubmitBtn = document.getElementById('register-submit-btn');
    const backToLoginBtn = document.getElementById('back-to-login-btn');

    // DOM Elements - Main App
    const appTitle = document.getElementById('app-title');
    const uploadTab = document.getElementById('upload-tab');
    const calendarTab = document.getElementById('calendar-tab');
    const profileTab = document.getElementById('profile-tab');
    const navUpload = document.getElementById('nav-upload');
    const navCalendar = document.getElementById('nav-calendar');
    const navProfile = document.getElementById('nav-profile');
    const petAvatarDisplay = document.getElementById('pet-avatar-display');
    const avatarInput = document.getElementById('avatar-input');
    const profilePetName = document.getElementById('profile-pet-name');
    const profileAge = document.getElementById('profile-age');
    const profileType = document.getElementById('profile-type');
    const profileWeight = document.getElementById('profile-weight');
    const profileBreed = document.getElementById('profile-breed');
    const profileColor = document.getElementById('profile-color');
    const saveProfileBtn = document.getElementById('save-profile-btn');
    const logoutBtn = document.getElementById('logout-btn');
    
    // Upload Elements
    const fileInput = document.getElementById('file-input');
    const uploadFormContainer = document.getElementById('upload-form-container');
    const imagePreviewContainer = document.getElementById('image-preview-container');
    const imagePreview = document.getElementById('image-preview');
    const removeImageBtn = document.getElementById('remove-image-btn');
    const photoDate = document.getElementById('photo-date');
    const photoNote = document.getElementById('photo-note');
    const savePhotoBtn = document.getElementById('save-photo-btn');
    const uploadProgressContainer = document.getElementById('upload-progress-container');
    const uploadProgressBar = document.getElementById('upload-progress-bar');
    const uploadPercentage = document.getElementById('upload-percentage');
    const uploadSuccess = document.getElementById('upload-success');
    const uploadAnotherBtn = document.getElementById('upload-another-btn');
    
    const calendarGrid = document.getElementById('calendar-grid');
    const currentMonthEl = document.getElementById('current-month');
    const prevMonthBtn = document.getElementById('prev-month');
    const nextMonthBtn = document.getElementById('next-month');
    const detailPage = document.getElementById('detail-page');
    const detailTitle = document.getElementById('detail-title');
    const detailContent = document.getElementById('detail-content');
    const backBtn = document.getElementById('back-btn');
    const nextDateHint = document.getElementById('next-date-hint');

    // Set default date to today
    photoDate.valueAsDate = new Date();

    // Toast notification
    function showToast(message) {
      const toast = document.createElement('div');
      toast.className = 'toast text-white';
      toast.style.background = '#0c5832';
      toast.textContent = message;
      document.body.appendChild(toast);
      setTimeout(() => toast.remove(), 2000);
    }

    // Auth - Continue button
    authContinueBtn.addEventListener('click', () => {
      registrationForm.classList.remove('hidden');
      authStep1.classList.add('hidden');
    });

    // Google login - Demo
    googleLoginBtn.addEventListener('click', () => {
      loginUser('demo-user@example.com');
    });

    // Register submit
    registerSubmitBtn.addEventListener('click', () => {
      const petName = document.getElementById('pet-name').value || 'Lucky';
      petProfile.name = petName;
      petProfile.type = document.getElementById('pet-type').value || 'dog';
      petProfile.age = document.getElementById('pet-age').value;
      petProfile.weight = document.getElementById('pet-weight').value;
      petProfile.breed = document.getElementById('pet-breed').value;
      petProfile.color = document.getElementById('pet-color').value;
      
      currentUser = { petName };
      showToast(`æ­¡è¿åŠ å…¥ Copawsï¼Œ${petName}ï¼ğŸ¾`);
      setTimeout(() => {
        loginScreen.classList.add('hidden');
        mainApp.classList.remove('hidden');
        renderCalendar();
      }, 1500);
    });

    // Back to login
    backToLoginBtn.addEventListener('click', () => {
      registrationForm.classList.add('hidden');
      authStep1.classList.remove('hidden');
    });

    // Login user
    function loginUser(email) {
      currentUser = { email };
      showToast('ç™»å…¥æˆåŠŸï¼');
      setTimeout(() => {
        loginScreen.classList.add('hidden');
        mainApp.classList.remove('hidden');
        renderCalendar();
      }, 1000);
    }

    // File input change
    fileInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (!file) return;
      
      const reader = new FileReader();
      reader.onload = (event) => {
        imagePreview.src = event.target.result;
        uploadFormContainer.classList.remove('hidden');
        uploadProgressContainer.classList.add('hidden');
        uploadSuccess.classList.add('hidden');
        savePhotoBtn.classList.remove('hidden');
      };
      reader.readAsDataURL(file);
    });

    // Remove image
    removeImageBtn.addEventListener('click', () => {
      resetUploadForm();
    });

    // Reset upload form
    function resetUploadForm() {
      fileInput.value = '';
      uploadFormContainer.classList.add('hidden');
      photoNote.value = '';
      photoDate.valueAsDate = new Date();
      uploadProgressContainer.classList.add('hidden');
      uploadSuccess.classList.add('hidden');
      uploadProgressBar.style.width = '0%';
      uploadPercentage.textContent = '0%';
    }

    // Save photo - Simulate upload
    savePhotoBtn.addEventListener('click', () => {
      // Hide upload button, show progress
      savePhotoBtn.classList.add('hidden');
      uploadProgressContainer.classList.remove('hidden');
      
      // Simulate upload progress
      let progress = 0;
      const interval = setInterval(() => {
        progress += Math.random() * 30;
        if (progress > 100) progress = 100;
        
        uploadProgressBar.style.width = progress + '%';
        uploadPercentage.textContent = Math.floor(progress) + '%';
        
        if (progress >= 100) {
          clearInterval(interval);
          // Show success message
          setTimeout(() => {
            uploadProgressContainer.classList.add('hidden');
            uploadSuccess.classList.remove('hidden');
            showToast('ç…§ç‰‡ä¸Šå‚³æˆåŠŸï¼âœ¨');
          }, 300);
        }
      }, 200);
    });

    // Upload another photo
    uploadAnotherBtn.addEventListener('click', () => {
      resetUploadForm();
    });

    // Tab Navigation
    navUpload.addEventListener('click', () => {
      uploadTab.classList.remove('hidden');
      calendarTab.classList.add('hidden');
      profileTab.classList.add('hidden');
      navUpload.classList.add('tab-active');
      navUpload.classList.remove('text-gray-400');
      navCalendar.classList.remove('tab-active');
      navCalendar.classList.add('text-gray-400');
      navProfile.classList.remove('tab-active');
      navProfile.classList.add('text-gray-400');
    });

    navCalendar.addEventListener('click', () => {
      uploadTab.classList.add('hidden');
      calendarTab.classList.remove('hidden');
      profileTab.classList.add('hidden');
      navCalendar.classList.add('tab-active');
      navCalendar.classList.remove('text-gray-400');
      navUpload.classList.remove('tab-active');
      navUpload.classList.add('text-gray-400');
      navProfile.classList.remove('tab-active');
      navProfile.classList.add('text-gray-400');
      renderCalendar();
    });

    navProfile.addEventListener('click', () => {
      uploadTab.classList.add('hidden');
      calendarTab.classList.add('hidden');
      profileTab.classList.remove('hidden');
      navProfile.classList.add('tab-active');
      navProfile.classList.remove('text-gray-400');
      navUpload.classList.remove('tab-active');
      navUpload.classList.add('text-gray-400');
      navCalendar.classList.remove('tab-active');
      navCalendar.classList.add('text-gray-400');
      loadProfile();
    });

    // Avatar Upload
    avatarInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (!file) return;
      
      const reader = new FileReader();
      reader.onload = (event) => {
        petAvatar = event.target.result;
        petAvatarDisplay.innerHTML = `<img src="${petAvatar}" class="w-full h-full object-cover" alt="å¯µç‰©é ­åƒ">`;
      };
      reader.readAsDataURL(file);
    });

    // Load Profile
    function loadProfile() {
      profilePetName.textContent = petProfile.name;
      profileAge.value = petProfile.age;
      profileType.value = petProfile.type;
      profileWeight.value = petProfile.weight;
      profileBreed.value = petProfile.breed;
      profileColor.value = petProfile.color;
      
      if (petAvatar) {
        petAvatarDisplay.innerHTML = `<img src="${petAvatar}" class="w-full h-full object-cover" alt="å¯µç‰©é ­åƒ">`;
      }
    }

    // Save Profile
    saveProfileBtn.addEventListener('click', () => {
      petProfile.age = profileAge.value;
      petProfile.type = profileType.value;
      petProfile.weight = profileWeight.value;
      petProfile.breed = profileBreed.value;
      petProfile.color = profileColor.value;
      
      showToast('è³‡æ–™å·²å„²å­˜ï¼âœ¨');
    });

    // Logout
    logoutBtn.addEventListener('click', () => {
      const confirmDiv = document.createElement('div');
      confirmDiv.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
      confirmDiv.innerHTML = `
        <div class="bg-white rounded-2xl p-6 mx-4 max-w-sm">
          <p class="text-lg font-bold mb-4 text-gray-800">ç¢ºå®šè¦ç™»å‡ºå—ï¼Ÿ</p>
          <div class="flex gap-3">
            <button id="confirm-logout" class="flex-1 bg-red-500 text-white font-bold py-3 rounded-xl hover:bg-red-600">ç™»å‡º</button>
            <button id="cancel-logout" class="flex-1 bg-gray-200 text-gray-700 font-bold py-3 rounded-xl hover:bg-gray-300">å–æ¶ˆ</button>
          </div>
        </div>
      `;
      document.body.appendChild(confirmDiv);
      
      document.getElementById('confirm-logout').addEventListener('click', () => {
        location.reload();
      });
      
      document.getElementById('cancel-logout').addEventListener('click', () => {
        confirmDiv.remove();
      });
    });

    // Calendar Functions
    function renderCalendar() {
      const year = currentDate.getFullYear();
      const month = currentDate.getMonth();
      
      currentMonthEl.textContent = `${year} å¹´ ${month + 1} æœˆ`;
      
      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month + 1, 0).getDate();
      
      calendarGrid.innerHTML = '';
      
      // Empty cells before first day
      for (let i = 0; i < firstDay; i++) {
        const emptyCell = document.createElement('div');
        emptyCell.className = 'h-14';
        calendarGrid.appendChild(emptyCell);
      }
      
      // Days of month
      for (let day = 1; day <= daysInMonth; day++) {
        const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
        const dayPhotos = samplePhotos[dateStr];
        
        const dayCell = document.createElement('button');
        dayCell.className = 'calendar-day h-14 rounded-xl flex items-center justify-center text-sm font-bold';
        
        if (dayPhotos && dayPhotos.length > 0) {
          dayCell.classList.add('has-entry');
          
          // Create stacked photo effect
          let stackHtml = '<div class="photo-stack">';
          
          // Show up to 3 photos in a stack
          const photosToShow = Math.min(3, dayPhotos.length);
          for (let i = 0; i < photosToShow; i++) {
            stackHtml += `
              <div class="photo-stack-item">
                <img src="${dayPhotos[i].image}" alt="ç…§ç‰‡" onerror="this.style.display='none';">
              </div>
            `;
          }
          
          stackHtml += '</div>';
          
          dayCell.innerHTML = `
            ${stackHtml}
            <span class="day-number">${day}</span>
          `;
          
          dayCell.addEventListener('click', () => openDetailPage(dateStr));
        } else {
          dayCell.textContent = day;
        }
        
        calendarGrid.appendChild(dayCell);
      }
    }

    function openDetailPage(dateStr) {
      currentViewDate = dateStr;
      renderDetailPage(dateStr);
      detailPage.classList.remove('hidden');
    }

    function renderDetailPage(dateStr) {
      const [year, month, day] = dateStr.split('-');
      detailTitle.textContent = `${year} å¹´ ${parseInt(month)} æœˆ ${parseInt(day)} æ—¥`;
      
      const dayPhotos = samplePhotos[dateStr] || [];
      
      detailContent.innerHTML = '';
      
      if (dayPhotos.length === 0) {
        detailContent.innerHTML = `
          <div class="flex flex-col items-center justify-center h-full p-8">
            <div class="text-6xl mb-4">ğŸ“­</div>
            <p class="text-gray-500">é€™å¤©é‚„æ²’æœ‰ç…§ç‰‡å–”</p>
          </div>
        `;
        nextDateHint.classList.add('hidden');
        return;
      }
      
      dayPhotos.forEach((photo, index) => {
        const card = document.createElement('div');
        card.className = 'bg-white rounded-2xl shadow-lg overflow-hidden mb-4 fade-in';
        card.style.opacity = '0';
        card.style.animation = `fadeIn 0.4s ease forwards`;
        card.style.animationDelay = `${index * 0.1}s`;
        
        const avatarHtml = petAvatar 
          ? `<img src="${petAvatar}" class="w-8 h-8 rounded-full object-cover border-2" style="border-color: #c8e6d4;" alt="å¯µç‰©é ­åƒ">`
          : `<div class="w-8 h-8 rounded-full flex items-center justify-center text-lg border-2" style="background: linear-gradient(to bottom right, #c8e6d4, #10b981); border-color: #c8e6d4;">ğŸ¶</div>`;
        
        card.innerHTML = `
          <img src="${photo.image}" class="w-full aspect-square object-cover" alt="ç…§ç‰‡" onerror="this.src=''; this.alt='åœ–ç‰‡è¼‰å…¥å¤±æ•—'; this.style.display='none';">
          <div class="p-4">
            <div class="flex items-start gap-3">
              ${avatarHtml}
              <div class="flex-1">
                <p class="text-gray-700 whitespace-pre-wrap">${photo.note}</p>
                <p class="text-xs text-gray-400 mt-2">ğŸ• ${photo.time}</p>
              </div>
            </div>
          </div>
        `;
        
        detailContent.appendChild(card);
      });
      
      // Always show next date hint if there's a next date
      const nextDate = getNextDateWithPhotos(dateStr);
      if (nextDate) {
        nextDateHint.classList.remove('hidden');
        setupAutoScroll(dateStr);
      } else {
        nextDateHint.classList.add('hidden');
      }
    }

    function setupAutoScroll(currentDateStr) {
      // Remove any existing scroll handlers
      const oldHandler = detailContent.scrollHandler;
      if (oldHandler) {
        detailContent.removeEventListener('scroll', oldHandler);
      }
      
      let isTransitioning = false;
      
      const scrollHandler = function() {
        if (isTransitioning) return;
        
        const scrollTop = detailContent.scrollTop;
        const scrollHeight = detailContent.scrollHeight;
        const clientHeight = detailContent.clientHeight;
        
        // Check if scrolled to bottom
        if (scrollTop + clientHeight >= scrollHeight - 10) {
          const nextDate = getNextDateWithPhotos(currentDateStr);
          if (nextDate) {
            isTransitioning = true;
            detailContent.removeEventListener('scroll', scrollHandler);
            
            // Add fade out animation
            detailContent.classList.add('page-transition-out');
            
            setTimeout(() => {
              // Reset scroll to top
              detailContent.scrollTop = 0;
              detailContent.classList.remove('page-transition-out');
              
              // Load next date content
              renderDetailPage(nextDate);
              currentViewDate = nextDate;
              
              // Add fade in animation
              detailContent.classList.add('page-transition-in');
              
              setTimeout(() => {
                detailContent.classList.remove('page-transition-in');
                isTransitioning = false;
              }, 500);
            }, 400);
          }
        }
      };
      
      detailContent.scrollHandler = scrollHandler;
      detailContent.addEventListener('scroll', scrollHandler);
    }

    function getNextDateWithPhotos(currentDateStr) {
      const allDates = Object.keys(samplePhotos).sort();
      const currentIndex = allDates.indexOf(currentDateStr);
      
      if (currentIndex >= 0 && currentIndex < allDates.length - 1) {
        return allDates[currentIndex + 1];
      }
      
      return null;
    }

    backBtn.addEventListener('click', () => {
      detailPage.classList.add('hidden');
      currentViewDate = null;
      nextDateHint.classList.add('hidden');
      // Remove scroll handler
      if (detailContent.scrollHandler) {
        detailContent.removeEventListener('scroll', detailContent.scrollHandler);
        detailContent.scrollHandler = null;
      }
    });

    prevMonthBtn.addEventListener('click', () => {
      currentDate.setMonth(currentDate.getMonth() - 1);
      renderCalendar();
    });

    nextMonthBtn.addEventListener('click', () => {
      currentDate.setMonth(currentDate.getMonth() + 1);
      renderCalendar();
    });

    // Element SDK Config Change Handler
    async function onConfigChange(config) {
      const title = config.app_title || defaultConfig.app_title;
      appTitle.textContent = title;
    }

    function mapToCapabilities(config) {
      return {
        recolorables: [],
        borderables: [],
        fontEditable: undefined,
        fontSizeable: undefined
      };
    }

    function mapToEditPanelValues(config) {
      return new Map([
        ['app_title', config.app_title || defaultConfig.app_title]
      ]);
    }

    // Initialize
    async function init() {
      if (window.elementSdk) {
        await window.elementSdk.init({
          defaultConfig,
          onConfigChange,
          mapToCapabilities,
          mapToEditPanelValues
        });
      }
    }

    init();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9b9c3bb6648f6b86',t:'MTc2NzcxMzE4Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>