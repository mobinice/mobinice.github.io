<html lang="zh-CN"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>聊天窗口</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
        }
        
        body {
            background-color: transparent;
            height: 100vh;
            overflow: hidden;
        }
        
        /* iPhone风格小白点 */
        .floating-button {
            position: fixed;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.9);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 1000;
            transition: all 0.3s ease;
        }
        
        .floating-button:hover {
            transform: translateY(-50%) scale(1.05);
        }
        
        .floating-button svg {
            width: 30px;
            height: 30px;
            color: #5996F7;
        }
        
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #ff4d4f;
            color: white;
            border-radius: 50%;
            min-width: 20px;
            height: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 12px;
            font-weight: bold;
            padding: 0 4px;
        }
        
        /* 聊天窗口 */
        .chat-window {
            position: fixed;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            width: 450px; /* 增加宽度，防止标题换行 */
            height: 600px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
            display: none;
            flex-direction: column;
            overflow: hidden;
            z-index: 999;
            transition: all 0.3s ease;
        }
        
        /* 聊天窗口头部 */
        .chat-header {
            background-color: #5996F7;
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header-tabs {
            display: flex;
            align-items: center;
            flex: 1;
        }
        
        .header-tab {
            padding: 8px 12px;
            cursor: pointer;
            font-weight: 500;
            position: relative;
            margin-right: 10px;
            font-size: 15px;
            display: flex;
            align-items: center;
            white-space: nowrap; /* 防止标题换行 */
        }
        
        .header-tab.active {
            font-weight: 600;
        }
        
        .header-tab.active::after {
            content: '';
            position: absolute;
            bottom: -12px; /* 调整底线位置，往上移动 */
            left: 0;
            width: 100%;
            height: 3px;
            background-color: white;
        }
        
        .header-tab .tab-text {
            margin-right: 5px;
        }
        
        .header-tab .bell-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .header-tab .bell-icon svg {
            width: 16px;
            height: 16px;
        }
        
        .header-tab.muted .bell-icon svg {
            opacity: 0.7;
        }
        
        .close-button {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
        }
        
        /* 搜索栏 */
        .search-bar {
            padding: 10px 15px;
            background-color: #f0f0f0; /* 改为灰色背景 */
            display: flex;
            align-items: center;
            transform: translateY(-100%);
            transition: transform 0.3s ease;
        }
        
        .search-bar.visible {
            transform: translateY(0);
        }
        
        .search-container {
            position: relative;
            flex: 1;
            display: flex;
            align-items: center;
            background-color: white;
            border-radius: 20px;
            padding: 0 10px;
            height: 36px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .search-icon {
            color: #999;
            margin-right: 8px;
        }
        
        .search-input {
            flex: 1;
            border: none;
            outline: none;
            font-size: 14px;
            background: transparent;
        }
        
        .search-clear {
            display: none;
            background: none;
            border: none;
            color: #999;
            cursor: pointer;
            font-size: 18px;
            padding: 0 5px;
        }
        
        .search-navigation {
            display: none;
            margin-left: 10px;
        }
        
        .search-navigation button {
            background-color: #5996F7;
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            margin-left: 5px;
        }
        
        .search-navigation button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        
        .search-results {
            display: none;
            background-color: white;
            padding: 5px 10px;
            font-size: 13px;
            color: #666;
        }
        
        /* 聊天内容 */
        .chat-content {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            background-color: white;
            display: flex;
            flex-direction: column;
        }
        
        /* 日期分隔线 */
        .date-separator {
            text-align: center;
            margin: 15px 0;
            position: relative;
        }
        
        .date-separator span {
            background-color: white;
            padding: 0 10px;
            color: #999;
            font-size: 13px;
            position: relative;
            z-index: 1;
        }
        
        .date-separator::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background-color: #e0e0e0;
            z-index: 0;
        }
        
        /* 消息样式 */
        .message {
            margin-bottom: 15px;
            position: relative;
            display: flex;
            flex-direction: column;
        }
        
        .message-bubble {
            max-width: 80%;
            padding: 12px 15px;
            border-radius: 18px;
            font-size: 14px;
            line-height: 1.4;
            position: relative;
            align-self: flex-start;
            background-color: #E1F0FF;
            color: #333;
            border-top-left-radius: 4px;
            margin-bottom: 5px;
            word-break: break-word;
        }
        
        .message-info {
            display: flex;
            align-items: center;
            font-size: 12px;
            color: #999;
            margin-top: 2px;
        }
        
        .message-time {
            margin-left: auto;
            display: flex;
            align-items: center;
        }
        
        .message-time div {
            margin-left: 5px;
        }
        
        .action-button {
            background: none;
            border: none;
            color: #5996F7;
            cursor: pointer;
            font-size: 12px;
            padding: 2px 5px;
            margin-right: 10px;
            display: flex;
            align-items: center;
        }
        
        .action-button svg {
            width: 14px;
            height: 14px;
            margin-right: 3px;
        }
        
        .highlighted {
            background-color: yellow;
            color: black;
        }
        
        /* 开发者按钮 */
        .dev-button {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background-color: #6c757d;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px 15px;
            font-size: 14px;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 1000;
        }
        
        /* 模态窗口 */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 10px;
            width: 80%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }
        
        .code-block {
            background-color: #f8f8f8;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
            padding: 15px;
            overflow-x: auto;
            font-family: monospace;
            white-space: pre;
            line-height: 1.5;
            font-size: 12px;
        }
        
        /* 复制成功提示 */
        .copy-toast {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 14px;
            z-index: 2000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .copy-toast.show {
            opacity: 1;
        }
    </style>
</head>
<body data-new-gr-c-s-check-loaded="14.1103.0" data-gr-ext-installed="">
    <!-- iPhone风格小白点 -->
    <div class="floating-button" id="chatButton">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
            <!-- 足球图标 SVG 路径 -->
            <path fill="currentColor" d="M177.1 228.6L207.9 320h96.5l29.62-91.38L256 172.1L177.1 228.6zM255.1 0C114.6 0 .0001 114.6 .0001 256S114.6 512 256 512s255.1-114.6 255.1-255.1S397.4 0 255.1 0zM416.6 360.9l-85.4-1.297l-25.15 81.59C290.1 445.5 273.4 448 256 448s-34.09-2.523-50.09-6.859l-25.15-81.59l-85.4 1.297c-18.12-27.66-29.15-60.27-30.88-95.31L137.3 222.5L108.1 143.4C136.2 114.9 171.7 96 211.6 91.47l46.88 75.48h94.09l46.88-75.48c39.9 4.531 75.36 23.38 104.4 51.95l-28.85 79.06l72.78 42.95C545.8 300.6 534.8 333.3 416.6 360.9z"></path>
        </svg>
        <div class="notification-badge" id="notificationBadge" style="display: flex;">5</div>
    </div>
    
    <!-- 聊天窗口 -->
    <div class="chat-window" id="chatWindow">
        <div class="chat-header">
            <div class="header-tabs">
                <div class="header-tab active" data-tab="system">
                    <span class="tab-text">系统信息</span>
                    <span class="bell-icon" title="静音通知">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                        </svg>
                    </span>
                </div>
                <div class="header-tab" data-tab="match">
                    <span class="tab-text">赛事信息</span>
                    <span class="bell-icon" title="静音通知">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                        </svg>
                    </span>
                </div>
                <div class="header-tab" data-tab="personal">
                    <span class="tab-text">个人信息</span>
                    <span class="bell-icon" title="静音通知">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                        </svg>
                    </span>
                </div>
            </div>
            <button class="close-button" id="closeButton">×</button>
        </div>
        
        <div class="search-bar" id="searchBar">
            <div class="search-container">
                <span class="search-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                </span>
                <input type="text" class="search-input" id="searchInput" placeholder="搜索...">
                <button class="search-clear" id="searchClear">×</button>
            </div>
            <div class="search-navigation" id="searchNavigation">
                <button id="prevResult" disabled="">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="18 15 12 9 6 15"></polyline>
                    </svg>
                </button>
                <button id="nextResult">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </button>
            </div>
        </div>
        
        <div class="search-results" id="searchResults">
            找到 <span id="resultCount">0</span> 个结果
        </div>
        
        <div class="chat-content" id="systemContent">
            <div class="date-separator">
                <span>2023年5月10日</span>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    系统将于明天进行例行维护，请提前做好准备。
                </div>
                <div class="message-info">
                    <div class="message-time">2023/05/10 09:15</div>
                </div>
            </div>
            
            <div class="date-separator">
                <span>昨天</span>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    系统维护已完成，感谢您的耐心等待！
                </div>
                <div class="message-info">
                    <div class="message-time">15:45</div>
                </div>
            </div>
            
            <div class="date-separator">
                <span>今天</span>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    亲爱的用户您好，即将于05/08 12:00 (GMT+8)开始进行维护，预计维护时间为3小时，若维护完成，会再由商户通知您，谢谢您的爱护，祝您旗开得胜！
                </div>
                <div class="message-info">
                    <div class="message-time">10:30</div>
                </div>
            </div>
        </div>
        
        <div class="chat-content" id="matchContent" style="display: none;">
            <div class="date-separator">
                <span>昨天</span>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    您关注的比赛 [利物浦 vs 曼城] 已结束，比分 3-2，要看看精彩回放嗎？
                    <button class="action-button" data-match="liverpool-mancity">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                            <polyline points="10 17 15 12 10 7"></polyline>
                            <line x1="15" y1="12" x2="3" y2="12"></line>
                        </svg>
                        前往赛事详情
                    </button>
                </div>
                <div class="message-info">
                    <div class="message-time">23:05</div>
                </div>
            </div>
            
            <div class="date-separator">
                <span>今天</span>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    您关注的比赛 [巴塞罗那 vs 皇家马德里] 将于今晚20:00开始，请准时观看！
                    <button class="action-button" data-match="barcelona-realmadrid">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                            <polyline points="10 17 15 12 10 7"></polyline>
                            <line x1="15" y1="12" x2="3" y2="12"></line>
                        </svg>
                        前往赛事详情
                    </button>
                </div>
                <div class="message-info">
                    <div class="message-time">09:30</div>
                </div>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    比赛结果：巴塞罗那 2-1 皇家马德里，恭喜您的预测成功！
                </div>
                <div class="message-info">
                    <div class="message-time">22:15</div>
                </div>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    您的单号:32132321312 比赛已结果，赛果为赢，已派彩3131彩金给您，现在馀额是5000，欢迎继续下注，我会与您一起共战双赢！
                    <button class="action-button" data-order="32132321312">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        复制单号
                    </button>
                </div>
                <div class="message-info">
                    <div class="message-time">22:30</div>
                </div>
            </div>
        </div>
        
        <div class="chat-content" id="personalContent" style="display: none;">
            <div class="date-separator">
                <span>2023年5月10日</span>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    系统提醒：您已被人工扣款 1000，目前余额为 2000。若有任何疑问，请随时与我们联系，我们会一直在。
                </div>
                <div class="message-info">
                    <div class="message-time">2023/05/10 09:30</div>
                </div>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    合买赛果已出炉! 恭喜您获得2550，加上佣金450，目前余额为 5000
                    <br>注单号: 5235679989162811
                    <button class="action-button" data-order="5235679989162811">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        复制单号
                    </button>
                </div>
                <div class="message-info">
                    <div class="message-time">2023/05/10 14:20</div>
                </div>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    合买赛果已出炉! 恭喜您获得1245，已扣除佣金120，目前余额为 6245。
                    <br>注单号: 5235679989162811
                    <button class="action-button" data-order="5235679989162811">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        复制单号
                    </button>
                </div>
                <div class="message-info">
                    <div class="message-time">2023/05/10 18:45</div>
                </div>
            </div>
            
            <div class="date-separator">
                <span>昨天</span>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    很抱歉，您的预约下注失败，扣款金额将退还。
                    <br>注单号: 5235679989162811
                    <br>已恢复至余额 1760，请您放心！
                    <button class="action-button" data-order="5235679989162811">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        复制单号
                    </button>
                </div>
                <div class="message-info">
                    <div class="message-time">16:30</div>
                </div>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    系统已为您人工加款 3000，目前余额为 5800。感谢您的耐心与支持～祝您投注顺利！
                </div>
                <div class="message-info">
                    <div class="message-time">18:15</div>
                </div>
            </div>
            
            <div class="date-separator">
                <span>今天</span>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    亲爱的用户您好～您已成功转入 1000 目前余额为 2200。感谢您一直以来的支持，我会在这里陪您每一步！
                </div>
                <div class="message-info">
                    <div class="message-time">09:15</div>
                </div>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    恭喜您获得彩金 500！系统已为您加值，现在余额为 3200。今天的您，光芒万丈！
                </div>
                <div class="message-info">
                    <div class="message-time">10:30</div>
                </div>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    您已成功下注 200，下注已提交！
                    <br>注单号: 32132321312
                    <br>目前余额为 1800，让我们期待这场赛事为您带来惊喜！
                    <button class="action-button" data-order="32132321312">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        复制单号
                    </button>
                </div>
                <div class="message-info">
                    <div class="message-time">11:45</div>
                </div>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    预约下注成功，扣款 300，您的余额为 1450。
                    <br>注单号: 5235679989162811
                    <br>感谢您的信任～我们会为您的预约投注持续关注！
                    <button class="action-button" data-order="5235679989162811">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        复制单号
                    </button>
                </div>
                <div class="message-info">
                    <div class="message-time">13:20</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 复制成功提示 -->
    <div class="copy-toast" id="copyToast">已复制单号</div>
    
    <!-- 开发者按钮 -->
    <button class="dev-button" id="devButton">开发者信息</button>
    
    <!-- 开发者模态窗口 -->
    <div class="modal" id="devModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>原生代码</h2>
                <button class="modal-close" id="modalClose">×</button>
            </div>
            <div class="code-block" id="codeBlock">
                // 这里将显示原生代码
            </div>
        </div>
    </div>
    
    <script>
        // 获取DOM元素
        const chatButton = document.getElementById('chatButton');
        const chatWindow = document.getElementById('chatWindow');
        const closeButton = document.getElementById('closeButton');
        const notificationBadge = document.getElementById('notificationBadge');
        const headerTabs = document.querySelectorAll('.header-tab');
        const bellIcons = document.querySelectorAll('.bell-icon');
        const searchBar = document.getElementById('searchBar');
        const searchInput = document.getElementById('searchInput');
        const searchClear = document.getElementById('searchClear');
        const searchResults = document.getElementById('searchResults');
        const resultCount = document.getElementById('resultCount');
        const searchNavigation = document.getElementById('searchNavigation');
        const prevResult = document.getElementById('prevResult');
        const nextResult = document.getElementById('nextResult');
        const systemContent = document.getElementById('systemContent');
        const matchContent = document.getElementById('matchContent');
        const personalContent = document.getElementById('personalContent');
        const actionButtons = document.querySelectorAll('.action-button');
        const devButton = document.getElementById('devButton');
        const devModal = document.getElementById('devModal');
        const modalClose = document.getElementById('modalClose');
        const codeBlock = document.getElementById('codeBlock');
        const copyToast = document.getElementById('copyToast');
        
        // 初始化变量
        let currentTab = 'system';
        let searchMatches = [];
        let currentMatchIndex = -1;
        let mutedTabs = {
            system: false,
            match: false,
            personal: false
        };
        
        // 更新未读消息数量
        function updateNotificationCount() {
            let totalUnread = 0;
            
            // 系统信息未读数量
            if (!mutedTabs.system) totalUnread += 1;
            
            // 赛事信息未读数量
            if (!mutedTabs.match) totalUnread += 2;
            
            // 个人信息未读数量
            if (!mutedTabs.personal) totalUnread += 2;
            
            // 更新徽章
            notificationBadge.textContent = totalUnread > 99 ? '99+' : totalUnread;
            
            if (totalUnread === 0) {
                notificationBadge.style.display = 'none';
            } else {
                notificationBadge.style.display = 'flex';
            }
        }
        
        // 切换标签页
        function switchTab(tabName) {
            currentTab = tabName;
            
            // 更新标签页状态
            headerTabs.forEach(tab => {
                const tabId = tab.getAttribute('data-tab');
                if (tabId === tabName) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
            
            // 显示对应内容
            systemContent.style.display = tabName === 'system' ? 'block' : 'none';
            matchContent.style.display = tabName === 'match' ? 'block' : 'none';
            personalContent.style.display = tabName === 'personal' ? 'block' : 'none';
            
            // 清除搜索结果
            clearSearch();
        }
        
        // 切换静音状态
        function toggleMute(tabName) {
            mutedTabs[tabName] = !mutedTabs[tabName];
            
            // 更新UI
            headerTabs.forEach(tab => {
                const tabId = tab.getAttribute('data-tab');
                if (tabId === tabName) {
                    if (mutedTabs[tabName]) {
                        tab.querySelector('.bell-icon').innerHTML = `
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                                <line x1="1" y1="1" x2="23" y2="23"></line>
                            </svg>
                        `;
                        tab.querySelector('.bell-icon').title = "取消静音";
                        tab.querySelector('.bell-icon').classList.add('muted');
                    } else {
                        tab.querySelector('.bell-icon').innerHTML = `
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                            </svg>
                        `;
                        tab.querySelector('.bell-icon').title = "静音通知";
                        tab.querySelector('.bell-icon').classList.remove('muted');
                    }
                }
            });
            
            // 更新未读消息数量
            updateNotificationCount();
        }
        
        // 搜索功能
        function performSearch() {
            const searchTerm = searchInput.value.trim().toLowerCase();
            if (!searchTerm) {
                clearSearch();
                return;
            }
            
            // 清除之前的高亮
            clearHighlights();
            
            // 获取当前标签页的内容
            const contentElement = document.getElementById(`${currentTab}Content`);
            const messages = contentElement.querySelectorAll('.message-bubble');
            
            // 查找匹配项
            searchMatches = [];
            messages.forEach(message => {
                const text = message.textContent.toLowerCase();
                let startIndex = 0;
                let index;
                
                while ((index = text.indexOf(searchTerm, startIndex)) > -1) {
                    searchMatches.push({
                        element: message,
                        index: index
                    });
                    startIndex = index + searchTerm.length;
                }
            });
            
            // 更新搜索结果计数
            resultCount.textContent = searchMatches.length;
            searchResults.style.display = 'block';
            
            // 高亮匹配项
            if (searchMatches.length > 0) {
                searchNavigation.style.display = 'flex';
                currentMatchIndex = 0;
                highlightCurrentMatch();
            } else {
                searchNavigation.style.display = 'none';
                currentMatchIndex = -1;
            }
            
            // 更新导航按钮状态
            updateNavigationButtons();
        }
        
        // 清除搜索
        function clearSearch() {
            searchInput.value = '';
            searchClear.style.display = 'none';
            searchResults.style.display = 'none';
            searchNavigation.style.display = 'none';
            clearHighlights();
            searchMatches = [];
            currentMatchIndex = -1;
        }
        
        // 清除高亮
        function clearHighlights() {
            const contentElement = document.getElementById(`${currentTab}Content`);
            const highlights = contentElement.querySelectorAll('.highlighted');
            highlights.forEach(highlight => {
                const parent = highlight.parentNode;
                parent.replaceChild(document.createTextNode(highlight.textContent), highlight);
                parent.normalize();
            });
        }
        
        // 高亮当前匹配项
        function highlightCurrentMatch() {
            if (currentMatchIndex < 0 || currentMatchIndex >= searchMatches.length) return;
            
            const match = searchMatches[currentMatchIndex];
            const element = match.element;
            const searchTerm = searchInput.value.trim().toLowerCase();
            
            // 清除之前的高亮
            clearHighlights();
            
            // 创建高亮文本
            const text = element.textContent;
            const lowerText = text.toLowerCase();
            let startIndex = 0;
            let index;
            let newHtml = '';
            
            while ((index = lowerText.indexOf(searchTerm, startIndex)) > -1) {
                newHtml += text.substring(startIndex, index);
                newHtml += `<span class="highlighted">${text.substring(index, index + searchTerm.length)}</span>`;
                startIndex = index + searchTerm.length;
            }
            newHtml += text.substring(startIndex);
            
            // 保存原始HTML中的按钮
            const buttons = element.querySelectorAll('button');
            const buttonHtml = Array.from(buttons).map(button => button.outerHTML);
            
            // 应用新HTML
            element.innerHTML = newHtml;
            
            // 恢复按钮
            if (buttonHtml.length > 0) {
                buttonHtml.forEach(html => {
                    element.innerHTML += html;
                });
            }
            
            // 滚动到当前匹配项
            const highlight = element.querySelector('.highlighted');
            if (highlight) {
                highlight.scrollIntoView({
                    behavior: 'smooth',
                    block: 'center'
                });
            }
        }
        
        // 更新导航按钮状态
        function updateNavigationButtons() {
            prevResult.disabled = currentMatchIndex <= 0;
            nextResult.disabled = currentMatchIndex >= searchMatches.length - 1;
        }
        
        // 显示复制成功提示
        function showCopyToast(message) {
            copyToast.textContent = message || '已复制单号';
            copyToast.classList.add('show');
            
            setTimeout(() => {
                copyToast.classList.remove('show');
            }, 2000);
        }
        
        // 复制注单号
        function copyOrderNumber(orderNumber) {
            // 创建一个临时文本区域
            const textarea = document.createElement('textarea');
            textarea.value = orderNumber;
            textarea.style.position = 'fixed';  // 防止滚动到底部
            document.body.appendChild(textarea);
            textarea.select();
            
            try {
                // 执行复制命令
                const successful = document.execCommand('copy');
                if (successful) {
                    showCopyToast(`已复制注单号: ${orderNumber}`);
                } else {
                    console.error('复制失败');
                    showCopyToast('复制失败，请手动复制');
                }
            } catch (err) {
                console.error('复制出错:', err);
                showCopyToast('复制失败，请手动复制');
            }
            
            // 移除临时文本区域
            document.body.removeChild(textarea);
        }
        
        // 前往赛事详情
        function goToMatchDetail(matchId) {
            alert(`正在前往赛事详情页: ${matchId}`);
            // 这里可以添加实际的跳转逻辑
        }
        
        // 处理按钮点击
        function handleButtonClick(button) {
            if (button.hasAttribute('data-order')) {
                // 复制注单号
                const orderNumber = button.getAttribute('data-order');
                copyOrderNumber(orderNumber);
            } else if (button.hasAttribute('data-match')) {
                // 前往赛事详情
                const matchId = button.getAttribute('data-match');
                goToMatchDetail(matchId);
            }
        }
        
        // 显示原生代码
        function showSourceCode() {
            const htmlCode = document.documentElement.outerHTML;
            codeBlock.textContent = htmlCode;
            devModal.style.display = 'flex';
        }
        
        // 事件监听器
        
        // 点击聊天按钮
        chatButton.addEventListener('click', () => {
            if (chatWindow.style.display === 'flex') {
                chatWindow.style.display = 'none';
                chatButton.style.display = 'flex';
                searchBar.classList.remove('visible');
            } else {
                chatWindow.style.display = 'flex';
                chatButton.style.display = 'none';
                setTimeout(() => {
                    searchBar.classList.add('visible');
                }, 300);
            }
        });
        
        // 关闭聊天窗口
        closeButton.addEventListener('click', () => {
            searchBar.classList.remove('visible');
            setTimeout(() => {
                chatWindow.style.display = 'none';
                chatButton.style.display = 'flex';
            }, 300);
        });
        
        // 标签页切换
        headerTabs.forEach(tab => {
            tab.addEventListener('click', (e) => {
                if (e.target.closest('.bell-icon')) return; // 如果点击的是铃铛图标，不切换标签
                const tabName = tab.getAttribute('data-tab');
                switchTab(tabName);
            });
        });
        
        // 静音按钮
        bellIcons.forEach(bell => {
            bell.addEventListener('click', (e) => {
                e.stopPropagation();
                const tabName = bell.closest('.header-tab').getAttribute('data-tab');
                toggleMute(tabName);
            });
        });
        
        // 搜索输入
        searchInput.addEventListener('input', () => {
            if (searchInput.value) {
                searchClear.style.display = 'block';
            } else {
                searchClear.style.display = 'none';
                searchResults.style.display = 'none';
                searchNavigation.style.display = 'none';
                clearHighlights();
            }
        });
        
        // 搜索框按Enter键
        searchInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                performSearch();
            }
        });
        
        // 清除搜索
        searchClear.addEventListener('click', clearSearch);
        
        // 上一个搜索结果
        prevResult.addEventListener('click', () => {
            if (currentMatchIndex > 0) {
                currentMatchIndex--;
                highlightCurrentMatch();
                updateNavigationButtons();
            }
        });
        
        // 下一个搜索结果
        nextResult.addEventListener('click', () => {
            if (currentMatchIndex < searchMatches.length - 1) {
                currentMatchIndex++;
                highlightCurrentMatch();
                updateNavigationButtons();
            }
        });
        
        // 按钮点击事件
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('action-button') || e.target.closest('.action-button')) {
                const button = e.target.classList.contains('action-button') ? e.target : e.target.closest('.action-button');
                handleButtonClick(button);
            }
        });
        
        // 开发者按钮
        devButton.addEventListener('click', showSourceCode);
        
        // 关闭模态窗口
        modalClose.addEventListener('click', () => {
            devModal.style.display = 'none';
        });
        
        // 点击模态窗口外部关闭
        window.addEventListener('click', (e) => {
            if (e.target === devModal) {
                devModal.style.display = 'none';
            }
        });
        
        // 初始化
        updateNotificationCount();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'93bfe407d6824a82',t:'MTc0NjYxMjI0MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script><iframe height="1" width="1" style="position: absolute; top: 0px; left: 0px; border: none; visibility: hidden;"></iframe>
</body><grammarly-desktop-integration data-grammarly-shadow-root="true"></grammarly-desktop-integration></html>