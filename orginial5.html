<html lang="zh-CN"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èŠå¤©çª—å£</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
        }
        
        body {
            position: relative;
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        #background-video {
            position: fixed;
            right: 0;
            bottom: 0;
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            z-index: -1;
            object-fit: cover;
        }
        
        /* iPhoneé£æ ¼å°ç™½ç‚¹ */
        .floating-button {
            position: fixed;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.9);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 1000;
            transition: all 0.3s ease;
            touch-action: none; /* é˜²æ­¢è§¦æ‘¸è®¾å¤‡ä¸Šçš„é»˜è®¤è¡Œä¸º */
        }
        
        .floating-button:hover {
            transform: translateY(-50%) scale(1.05);
        }
        
        .floating-button.dragging {
            transform: scale(1.1);
            opacity: 0.8;
        }
        
        .floating-button svg {
            width: 30px;
            height: 30px;
            color: #5996F7;
        }
        
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #ff4d4f;
            color: white;
            border-radius: 50%;
            min-width: 20px;
            height: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 12px;
            font-weight: bold;
            padding: 0 4px;
        }
        
        /* èŠå¤©çª—å£ */
        .chat-window {
            position: fixed;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            width: 450px; /* å¢åŠ å®½åº¦ï¼Œé˜²æ­¢æ ‡é¢˜æ¢è¡Œ */
            height: 600px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
            display: none;
            flex-direction: column;
            overflow: hidden;
            z-index: 999;
            transition: all 0.3s ease;
        }
        
        /* èŠå¤©çª—å£å¤´éƒ¨ */
        .chat-header {
            background-color: #5996F7;
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }
        
        .header-tabs {
            display: flex;
            align-items: center;
            flex: 1;
        }
        
        .header-actions {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .settings-icon-button {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            padding: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .settings-icon-button:hover {
            opacity: 0.8;
            transform: scale(1.1);
        }
        
        .settings-icon-button svg {
            width: 24px;
            height: 24px;
        }
        
        .close-button {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            transition: all 0.3s ease;
        }
        
        .close-button:hover {
            opacity: 0.8;
            transform: scale(1.1);
        }
        
        .header-tab {
            padding: 8px 12px;
            cursor: pointer;
            font-weight: 500;
            position: relative;
            margin-right: 10px;
            font-size: 15px;
            display: flex;
            align-items: center;
            white-space: nowrap; /* é˜²æ­¢æ ‡é¢˜æ¢è¡Œ */
        }
        
        .header-tab.active {
            font-weight: 600;
        }
        
        .header-tab.active::after {
            content: '';
            position: absolute;
            bottom: -12px; /* è°ƒæ•´åº•çº¿ä½ç½®ï¼Œå¾€ä¸Šç§»åŠ¨ */
            left: 0;
            width: 100%;
            height: 3px;
            background-color: white;
        }
        
        .header-tab .tab-text {
            margin-right: 5px;
            position: relative;
        }
        
        .header-tab .bell-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .header-tab .bell-icon svg {
            width: 16px;
            height: 16px;
        }
        
        .header-tab.muted .bell-icon svg {
            opacity: 0.7;
        }
        
        /* æœç´¢æ  */
        .search-bar {
            padding: 10px 15px;
            background-color: #f0f0f0; /* æ”¹ä¸ºç°è‰²èƒŒæ™¯ */
            display: flex;
            align-items: center;
            transform: translateY(-100%);
            transition: transform 0.3s ease;
        }
        
        .search-bar.visible {
            transform: translateY(0);
        }
        
        .search-container {
            position: relative;
            flex: 1;
            display: flex;
            align-items: center;
            background-color: white;
            border-radius: 20px;
            padding: 0 10px;
            height: 36px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .search-icon {
            color: #999;
            margin-right: 8px;
        }
        
        .search-input {
            flex: 1;
            border: none;
            outline: none;
            font-size: 14px;
            background: transparent;
        }
        
        .search-clear {
            display: none;
            background: none;
            border: none;
            color: #999;
            cursor: pointer;
            font-size: 18px;
            padding: 0 5px;
        }
        
        .search-navigation {
            display: none;
            margin-left: 10px;
        }
        
        .search-navigation button {
            background-color: #5996F7;
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            margin-left: 5px;
        }
        
        .search-navigation button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        
        .search-results {
            display: none;
            background-color: white;
            padding: 5px 10px;
            font-size: 13px;
            color: #666;
        }
        
        /* èŠå¤©å†…å®¹ */
        .chat-content {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            background-color: white;
            display: flex;
            flex-direction: column;
        }
        
        /* æ—¥æœŸåˆ†éš”çº¿ */
        .date-separator {
            text-align: center;
            margin: 15px 0;
            position: relative;
        }
        
        .date-separator span {
            background-color: white;
            padding: 0 10px;
            color: #999;
            font-size: 13px;
            position: relative;
            z-index: 1;
        }
        
        .date-separator::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background-color: #e0e0e0;
            z-index: 0;
        }
        
        /* æ¶ˆæ¯æ ·å¼ */
        .message {
            margin-bottom: 15px;
            position: relative;
            display: flex;
            flex-direction: column;
            opacity: 1;
            transform: translateY(0);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        
        /* æ–°æ¶ˆæ¯åŠ¨ç”» */
        .message.new-message {
            opacity: 0;
            transform: translateY(20px);
        }
        
        .message-bubble {
            max-width: 80%;
            padding: 12px 15px;
            border-radius: 18px;
            font-size: 14px;
            line-height: 1.4;
            position: relative;
            align-self: flex-start;
            background-color: #E1F0FF;
            color: #333;
            border-top-left-radius: 4px;
            margin-bottom: 5px;
            word-break: break-word;
        }
        
        .message-info {
            display: flex;
            align-items: center;
            font-size: 12px;
            color: #999;
            margin-top: 2px;
        }
        
        .message-time {
            margin-left: auto;
            display: flex;
            align-items: center;
        }
        
        .message-time div {
            margin-left: 5px;
        }
        
        .action-button {
            background: none;
            border: none;
            color: #5996F7;
            cursor: pointer;
            font-size: 12px;
            padding: 2px 5px;
            margin-right: 10px;
            display: flex;
            align-items: center;
        }
        
        .action-button svg {
            width: 14px;
            height: 14px;
            margin-right: 3px;
        }
        
        .highlighted {
            background-color: yellow;
            color: black;
        }
        
        /* å¼€å‘è€…æŒ‰é’® */
        .dev-button {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background-color: #6c757d;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px 15px;
            font-size: 14px;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 1000;
        }
        
        /* æ¨¡æ€çª—å£ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 10px;
            width: 80%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .modal-title-area {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }
        
        .code-block {
            background-color: #f8f8f8;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
            padding: 15px;
            overflow-x: auto;
            font-family: monospace;
            white-space: pre;
            line-height: 1.5;
            font-size: 12px;
            margin-bottom: 15px;
        }
        
        /* å¤åˆ¶æŒ‰é’® */
        .copy-code-button {
            background-color: #5996F7;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 8px 15px;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }
        
        .copy-code-button:hover {
            background-color: #4785e6;
        }
        
        .copy-code-button svg {
            width: 16px;
            height: 16px;
            margin-right: 5px;
        }
        
        /* å¤åˆ¶æˆåŠŸæç¤º */
        .copy-toast {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 14px;
            z-index: 2000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .copy-toast.show {
            opacity: 1;
        }
        
        /* æœªè¯»æ¶ˆæ¯æ ‡è®° */
        .unread-indicator {
            position: absolute;
            top: -2px;
            right: -8px;
            width: 8px;
            height: 8px;
            background-color: #ff4d4f;
            border-radius: 50%;
        }
        
        /* è¨­ç½®æŒ‰éˆ•æ¨£å¼ */
        .settings-button-container {
            position: absolute;
            right: 60px; /* åœ¨é—œé–‰æŒ‰éˆ•å·¦å´ */
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            align-items: center;
        }
        
        .settings-icon-button {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            padding: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .settings-icon-button:hover {
            opacity: 0.8;
        }
        
        .settings-icon-button svg {
            width: 20px;
            height: 20px;
        }
        
        /* è¨­ç½®é¢æ¿æ¨£å¼ */
        .settings-container {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: white;
            z-index: 1000;
            display: none;
            flex-direction: column;
        }
        
        .settings-header {
            background-color: #5996F7;
            color: white;
            padding: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .settings-title {
            font-size: 20px;
            font-weight: 500;
        }
        
        .settings-content {
            flex: 1;
            padding: 20px 30px;
            overflow-y: auto;
        }
        
        .settings-section-title {
            font-size: 17px;
            font-weight: 500;
            color: #333;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .settings-options {
            padding: 0;
        }
        
        /* é–‹é—œæŒ‰éˆ•æ¨£å¼ */
        .switch {
            position: relative;
            display: inline-block;
            width: 80px;
            height: 24px;
            margin-left: 20px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ff4d4f;
            transition: .4s;
            border-radius: 24px;
            width: 80px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: #52c41a;
        }
        
        input:checked + .slider:before {
            transform: translateX(56px);
        }
        
        .settings-option {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .settings-option:last-child {
            border-bottom: none;
        }
        
        .settings-option label {
            font-size: 15px;
            color: #333;
            flex: none;
            min-width: 80px;
        }
        
        .settings-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .settings-action-button {
            padding: 8px 25px;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            border: none;
            transition: all 0.3s ease;
        }
        
        .settings-action-button.save {
            background-color: #5996F7;
            color: white;
        }
        
        .settings-action-button.save:hover {
            background-color: #4785e6;
        }
        
        .settings-action-button.cancel {
            background-color: #f5f5f5;
            color: #666;
        }
        
        .settings-action-button.cancel:hover {
            background-color: #e8e8e8;
        }
    </style>
</head>
<body data-new-gr-c-s-check-loaded="14.1103.0" data-gr-ext-installed="">
    <video id="background-video" autoplay loop muted playsinline>
        <source src="https://mobinice.github.io/backgroundVideo.mp4" type="video/mp4">
    </video>
    
    <!-- iPhoneé£æ ¼å°ç™½ç‚¹ -->
    <div class="floating-button" id="chatButton">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
            <!-- è¶³çƒå›¾æ ‡ SVG è·¯å¾„ -->
            <path fill="currentColor" d="M177.1 228.6L207.9 320h96.5l29.62-91.38L256 172.1L177.1 228.6zM255.1 0C114.6 0 .0001 114.6 .0001 256S114.6 512 256 512s255.1-114.6 255.1-255.1S397.4 0 255.1 0zM416.6 360.9l-85.4-1.297l-25.15 81.59C290.1 445.5 273.4 448 256 448s-34.09-2.523-50.09-6.859l-25.15-81.59l-85.4 1.297c-18.12-27.66-29.15-60.27-30.88-95.31L137.3 222.5L108.1 143.4C136.2 114.9 171.7 96 211.6 91.47l46.88 75.48h94.09l46.88-75.48c39.9 4.531 75.36 23.38 104.4 51.95l-28.85 79.06l72.78 42.95C545.8 300.6 534.8 333.3 416.6 360.9z"></path>
        </svg>
        <div class="notification-badge" id="notificationBadge" style="display: flex;">5</div>
    </div>
    
    <!-- èŠå¤©çª—å£ -->
    <div class="chat-window" id="chatWindow">
        <div class="chat-header">
            <div class="header-tabs">
                <div class="header-tab active" data-tab="system">
                    <span class="tab-text">ç³»çµ±ä¿¡æ¯<span class="unread-indicator" id="systemUnread" style="display: block;"></span></span>
                    <span class="bell-icon" title="éœéŸ³é€šçŸ¥">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                        </svg>
                    </span>
                </div>
                <div class="header-tab" data-tab="match">
                    <span class="tab-text">è³½äº‹ä¿¡æ¯<span class="unread-indicator" id="matchUnread" style="display: block;"></span></span>
                    <span class="bell-icon" title="éœéŸ³é€šçŸ¥">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                        </svg>
                    </span>
                </div>
                <div class="header-tab" data-tab="personal">
                    <span class="tab-text">å€‹äººä¿¡æ¯<span class="unread-indicator" id="personalUnread" style="display: block;"></span></span>
                    <span class="bell-icon" title="éœéŸ³é€šçŸ¥">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                        </svg>
                    </span>
                </div>
            </div>
            <div class="header-actions">
                <button class="settings-icon-button" id="settingsButton" title="è¨­ç½®">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="1"></circle>
                        <circle cx="19" cy="12" r="1"></circle>
                        <circle cx="5" cy="12" r="1"></circle>
                    </svg>
                </button>
                <button class="close-button" id="closeButton">Ã—</button>
            </div>
        </div>
        
        <!-- è¨­ç½®é¢æ¿ -->
        <div class="settings-container" id="settingsContainer">
            <div class="settings-header">
                <div class="settings-title">é¸é …</div>
            </div>
            <div class="settings-content">
                <div class="settings-section-title">è³½äº‹ä¿¡æ¯-è¨Šæ¯æ¥æ”¶é–‹é—œ</div>
                <div class="settings-options">
                    <div class="settings-option">
                        <label for="scoreChange">æ¯”åˆ†è®Šå‹•</label>
                        <label class="switch">
                            <input type="checkbox" id="scoreChange">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="settings-option">
                        <label for="oddsSale">ç›¤å£é–‹å”®</label>
                        <label class="switch">
                            <input type="checkbox" id="oddsSale">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="settings-option">
                        <label for="scheduleChange">è³½ç¨‹ç•°å‹•</label>
                        <label class="switch">
                            <input type="checkbox" id="scheduleChange">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="settings-option">
                        <label for="matchCancel">å–æ¶ˆè³½äº‹</label>
                        <label class="switch">
                            <input type="checkbox" id="matchCancel">
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="settings-buttons">
                <button class="settings-action-button cancel" id="settingsCancelButton">å–æ¶ˆ</button>
                <button class="settings-action-button save" id="settingsSaveButton">ä¿å­˜</button>
            </div>
        </div>
        
        <div class="search-bar" id="searchBar">
            <div class="search-container">
                <span class="search-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                </span>
                <input type="text" class="search-input" id="searchInput" placeholder="æœç´¢...">
                <button class="search-clear" id="searchClear">Ã—</button>
            </div>
            <div class="search-navigation" id="searchNavigation">
                <button id="prevResult" disabled="">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="18 15 12 9 6 15"></polyline>
                    </svg>
                </button>
                <button id="nextResult">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </button>
            </div>
        </div>
        
        <div class="search-results" id="searchResults">
            æ‰¾åˆ° <span id="resultCount">0</span> ä¸ªç»“æœ
        </div>
        
        <div class="chat-content" id="systemContent">
            <div class="date-separator">
                <span>2023å¹´5æœˆ10æ—¥</span>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    ğŸ”§ç³»ç»Ÿç»´æŠ¤é€šçŸ¥ğŸ”§<br>
                      äº²çˆ±çš„ç”¨æˆ·æ‚¨å¥½ï¼Œä¸ºäº†æä¾›æ›´ç¨³å®šçš„æœåŠ¡ç¯å¢ƒï¼Œæˆ‘ä»¬é¢„è®¡äºï¼š<br>
                        ç»´æŠ¤æ—¶é—´ï¼š2025/05/09ï¼ˆå››ï¼‰00:00 ï½ 2025/05/09ï¼ˆå››ï¼‰06:00(GMT+8)<br>
                        é¢„ä¼°æ€»æ—¶é•¿ï¼š6 å°æ™‚<br>
                        åœ¨æ­¤æœŸé—´ï¼Œç³»ç»Ÿå°†æš‚åœæœåŠ¡ï¼Œé€ æˆä¸ä¾¿è¯·è§è°…ã€‚<br>
                        ğŸŒ™ åˆ«æ‹…å¿ƒï¼Œå·¥ç¨‹å¸ˆæ·±å¤œä¹Ÿæ²¡æ‰“ç®—ç¡ï¼ŒåŠªåŠ›å¸®ä½ ä¿®å¥½æ¯ä¸€è¡Œä»£ç ã€‚æ„Ÿè°¢æ‚¨çš„ç†è§£ä¸æ”¯æŒï¼
                </div>
                <div class="message-info">
                    <div class="message-time">2023/05/10 09:15</div>
                </div>
            </div>
            
            <div class="date-separator">
                <span>æ˜¨å¤©</span>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    ç³»ç»Ÿç»´æŠ¤å·²å®Œæˆï¼Œæ„Ÿè°¢æ‚¨çš„è€å¿ƒç­‰å¾…ï¼
                </div>
                <div class="message-info">
                    <div class="message-time">15:45</div>
                </div>
            </div>
            
            <div class="date-separator" id="systemTodaySeparator">
                <span>ä»Šå¤©</span>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    ğŸ”§ç³»ç»Ÿç»´æŠ¤é€šçŸ¥ğŸ”§<br>
                      äº²çˆ±çš„ç”¨æˆ·æ‚¨å¥½ï¼Œä¸ºäº†æä¾›æ›´ç¨³å®šçš„æœåŠ¡ç¯å¢ƒï¼Œæˆ‘ä»¬é¢„è®¡äºï¼š<br>
                        ç»´æŠ¤æ—¶é—´ï¼š2025/05/10ï¼ˆå››ï¼‰09:00 ï½ 2025/05/10ï¼ˆå››ï¼‰12:00(GMT+8)<br>
                        é¢„ä¼°æ€»æ—¶é•¿ï¼š3 å°æ™‚<br>
                        åœ¨æ­¤æœŸé—´ï¼Œç³»ç»Ÿå°†æš‚åœæœåŠ¡ï¼Œé€ æˆä¸ä¾¿è¯·è§è°…ã€‚<br>
                        ğŸ§˜ è¶è¿™æ®µæ—¶é—´ï¼Œæ”¾ä¸‹å±å¹•å»æ³¡æ¯èŒ¶å§ï¼Œå›æ¥ä¸€åˆ‡éƒ½ä¼šæ›´é¡ºç•…ã€‚æ„Ÿè°¢æ‚¨çš„ç†è§£ä¸æ”¯æŒï¼
                </div>
                <div class="message-info">
                    <div class="message-time">10:30</div>
                </div>
            </div>
        </div>
        
        <div class="chat-content" id="matchContent" style="display: none;">
            <div class="date-separator">
                <span>æ˜¨å¤©</span>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    æ‚¨æ”¶è—çš„æ¯”èµ› è‹±è¶…è”èµ› [åˆ©ç‰©æµ¦ vs æ›¼åŸ] å·²ç»“æŸï¼Œæ¯”åˆ† 3-2ï¼Œè¦çœ‹çœ‹ç²¾å½©å›æ”¾å—ï¼Ÿ
                    <button class="action-button" data-match="liverpool-mancity">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                            <polyline points="10 17 15 12 10 7"></polyline>
                            <line x1="15" y1="12" x2="3" y2="12"></line>
                        </svg>
                        å‰å¾€èµ›äº‹è¯¦æƒ…
                    </button>
                </div>
                <div class="message-info">
                    <div class="message-time">23:05</div>
                </div>
            </div>
            
            <div class="date-separator" id="matchTodaySeparator">
                <span>ä»Šå¤©</span>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    æ‚¨ç½®é¡¶çš„æ¯”èµ› è¥¿ç­ç‰™ç”²çº§è”èµ› [å·´å¡ç½—é‚£ vs çš‡å®¶é©¬å¾·é‡Œ] å°†äºä»Šæ™š20:00(GMT+8)å¼€å§‹ï¼Œè¯·å‡†æ—¶è§‚çœ‹ï¼
                    <button class="action-button" data-match="barcelona-realmadrid">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                            <polyline points="10 17 15 12 10 7"></polyline>
                            <line x1="15" y1="12" x2="3" y2="12"></line>
                        </svg>
                        å‰å¾€èµ›äº‹è¯¦æƒ…
                    </button>
                </div>
                <div class="message-info">
                    <div class="message-time">09:30</div>
                </div>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    æ¯”èµ›ç»“æœï¼šå·´å¡ç½—é‚£ 2-1 çš‡å®¶é©¬å¾·é‡Œï¼Œæ­å–œæ‚¨çš„é¢„æµ‹æˆåŠŸï¼
                </div>
                <div class="message-info">
                    <div class="message-time">22:15</div>
                </div>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    æ‚¨æ”¶è—çš„èµ›äº‹å·²å¼€å”®ï¼Œè‹±è¶…è”èµ› å¾·å›½ vs è‹±å›½ å¼€èµ›æ—¶é—´ä¸º09:00 GMT(+8)ï¼Œèµ¶å¿«å‰å¾€çœ‹çœ‹å§ï¼
                    <button class="action-button" data-match="germany-england">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                            <polyline points="10 17 15 12 10 7"></polyline>
                            <line x1="15" y1="12" x2="3" y2="12"></line>
                        </svg>
                        å‰å¾€èµ›äº‹è¯¦æƒ…
                    </button>
                </div>
                <div class="message-info">
                    <div class="message-time">22:30</div>
                </div>
            </div>
        </div>
		
        <div class="chat-content" id="personalContent" style="display: none;">
            <div class="date-separator">
                <span>2023å¹´5æœˆ10æ—¥</span>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    ç³»ç»Ÿæé†’ï¼šæ‚¨å·²è¢«äººå·¥æ‰£æ¬¾ 1000ï¼Œç›®å‰ä½™é¢ä¸º 2000ã€‚è‹¥æœ‰ä»»ä½•ç–‘é—®ï¼Œè¯·éšæ—¶ä¸æˆ‘ä»¬è”ç³»ï¼Œæˆ‘ä»¬ä¼šä¸€ç›´åœ¨ã€‚
                </div>
                <div class="message-info">
                    <div class="message-time">2023/05/10 09:30</div>
                </div>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    åˆä¹°èµ›æœå·²å‡ºç‚‰! æ­å–œæ‚¨è·å¾—2550ï¼ŒåŠ ä¸Šä½£é‡‘450ï¼Œç›®å‰ä½™é¢ä¸º 5000
                    <br>æ³¨å•å·: 5235679989162811
                    <button class="action-button" data-order="5235679989162811">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        å¤åˆ¶å•å·
                    </button>
                </div>
                <div class="message-info">
                    <div class="message-time">2023/05/10 14:20</div>
                </div>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    åˆä¹°èµ›æœå·²å‡ºç‚‰! æ­å–œæ‚¨è·å¾—1245ï¼Œå·²æ‰£é™¤ä½£é‡‘120ï¼Œç›®å‰ä½™é¢ä¸º 6245ã€‚
                    <br>æ³¨å•å·: 5235679989162811
                    <button class="action-button" data-order="5235679989162811">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        å¤åˆ¶å•å·
                    </button>
                </div>
                <div class="message-info">
                    <div class="message-time">2023/05/10 18:45</div>
                </div>
            </div>
            
            <div class="date-separator">
                <span>æ˜¨å¤©</span>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    å¾ˆæŠ±æ­‰ï¼Œæ‚¨çš„é¢„çº¦ä¸‹æ³¨å¤±è´¥ï¼Œæ‰£æ¬¾é‡‘é¢å°†é€€è¿˜ã€‚
                    <br>æ³¨å•å·: 5235679989162811
                    <br>å·²æ¢å¤è‡³ä½™é¢ 1760ï¼Œè¯·æ‚¨æ”¾å¿ƒï¼
                    <button class="action-button" data-order="5235679989162811">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        å¤åˆ¶å•å·
                    </button>
                </div>
                <div class="message-info">
                    <div class="message-time">16:30</div>
                </div>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    ç³»ç»Ÿå·²ä¸ºæ‚¨äººå·¥åŠ æ¬¾ 3000ï¼Œç›®å‰ä½™é¢ä¸º 5800ã€‚æ„Ÿè°¢æ‚¨çš„è€å¿ƒä¸æ”¯æŒï½ç¥æ‚¨æŠ•æ³¨é¡ºåˆ©ï¼
                </div>
                <div class="message-info">
                    <div class="message-time">18:15</div>
                </div>
            </div>
            
            <div class="date-separator" id="personalTodaySeparator">
                <span>ä»Šå¤©</span>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    äº²çˆ±çš„ç”¨æˆ·æ‚¨å¥½ï½æ‚¨å·²æˆåŠŸè½¬å…¥ 1000 ç›®å‰ä½™é¢ä¸º 2200ã€‚æ„Ÿè°¢æ‚¨ä¸€ç›´ä»¥æ¥çš„æ”¯æŒï¼Œæˆ‘ä¼šåœ¨è¿™é‡Œé™ªæ‚¨æ¯ä¸€æ­¥ï¼
                </div>
                <div class="message-info">
                    <div class="message-time">09:15</div>
                </div>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    æ­å–œæ‚¨è·å¾—å½©é‡‘ 500ï¼ç³»ç»Ÿå·²ä¸ºæ‚¨åŠ å€¼ï¼Œç°åœ¨ä½™é¢ä¸º 3200ã€‚ä»Šå¤©çš„æ‚¨ï¼Œå…‰èŠ’ä¸‡ä¸ˆï¼
                </div>
                <div class="message-info">
                    <div class="message-time">10:30</div>
                </div>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    æ‚¨å·²æˆåŠŸä¸‹æ³¨ 200ï¼Œä¸‹æ³¨å·²æäº¤ï¼
                    <br>æ³¨å•å·: 32132321312
                    <br>ç›®å‰ä½™é¢ä¸º 1800ï¼Œè®©æˆ‘ä»¬æœŸå¾…è¿™åœºèµ›äº‹ä¸ºæ‚¨å¸¦æ¥æƒŠå–œï¼
                    <button class="action-button" data-order="32132321312">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        å¤åˆ¶å•å·
                    </button>
                </div>
                <div class="message-info">
                    <div class="message-time">11:45</div>
                </div>
            </div>
            
            <div class="message">
                <div class="message-bubble">
                    é¢„çº¦ä¸‹æ³¨æˆåŠŸï¼Œæ‰£æ¬¾ 300ï¼Œæ‚¨çš„ä½™é¢ä¸º 1450ã€‚
                    <br>æ³¨å•å·: 5235679989162811
                    <br>æ„Ÿè°¢æ‚¨çš„ä¿¡ä»»ï½æˆ‘ä»¬ä¼šä¸ºæ‚¨çš„é¢„çº¦æŠ•æ³¨æŒç»­å…³æ³¨ï¼
                    <button class="action-button" data-order="5235679989162811">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        å¤åˆ¶å•å·
                    </button>
                </div>
                <div class="message-info">
                    <div class="message-time">13:20</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- å¤åˆ¶æˆåŠŸæç¤º -->
    <div class="copy-toast" id="copyToast">å·²å¤åˆ¶å•å·</div>
    
    <!-- å¼€å‘è€…æŒ‰é’® -->
    <button class="dev-button" id="devButton">å¼€å‘è€…ä¿¡æ¯</button>
    
    <!-- å¼€å‘è€…æ¨¡æ€çª—å£ -->
    <div class="modal" id="devModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-area">
                    <h2>åŸç”Ÿä»£ç¢¼ v34</h2>
                    <button class="copy-code-button" id="copyCodeButton">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        è¤‡è£½ä»£ç¢¼
                    </button>
                </div>
                <button class="modal-close" id="modalClose">Ã—</button>
            </div>
            <div class="code-block" id="codeBlock">
                // é€™è£¡å°‡é¡¯ç¤ºç•¶å‰é é¢çš„å®Œæ•´ä»£ç¢¼
            </div>
        </div>
    </div>
    
    <script>
        // è·å–DOMå…ƒç´ 
        const chatButton = document.getElementById('chatButton');
        const chatWindow = document.getElementById('chatWindow');
        const closeButton = document.getElementById('closeButton');
        const notificationBadge = document.getElementById('notificationBadge');
        const headerTabs = document.querySelectorAll('.header-tab');
        const bellIcons = document.querySelectorAll('.bell-icon');
        const searchBar = document.getElementById('searchBar');
        const searchInput = document.getElementById('searchInput');
        const searchClear = document.getElementById('searchClear');
        const searchResults = document.getElementById('searchResults');
        const resultCount = document.getElementById('resultCount');
        const searchNavigation = document.getElementById('searchNavigation');
        const prevResult = document.getElementById('prevResult');
        const nextResult = document.getElementById('nextResult');
        const systemContent = document.getElementById('systemContent');
        const matchContent = document.getElementById('matchContent');
        const personalContent = document.getElementById('personalContent');
        const actionButtons = document.querySelectorAll('.action-button');
        const devButton = document.getElementById('devButton');
        const devModal = document.getElementById('devModal');
        const modalClose = document.getElementById('modalClose');
        const codeBlock = document.getElementById('codeBlock');
        const copyToast = document.getElementById('copyToast');
        const copyCodeButton = document.getElementById('copyCodeButton');
        
        // æœªè¯»æŒ‡ç¤ºå™¨
        const systemUnread = document.getElementById('systemUnread');
        const matchUnread = document.getElementById('matchUnread');
        const personalUnread = document.getElementById('personalUnread');
        
        // åˆå§‹åŒ–å˜é‡
        let currentTab = 'system';
        let searchMatches = [];
        let currentMatchIndex = -1;
        let mutedTabs = {
            system: false,
            match: false,
            personal: false
        };
        
        // æœªè¯»æ¶ˆæ¯è®¡æ•°
        let unreadCounts = {
            system: 1,
            match: 2,
            personal: 2
        };
        
        // çª—å£çŠ¶æ€
        let isWindowOpen = false;
        
        // æ‹–æ‹½ç›¸å…³å˜é‡
        let isDragging = false;
        let startY = 0;
        let startX = 0;
        let initialTop = 0;
        let initialRight = 0;
        
        // éšæœºæ¶ˆæ¯æ¨¡æ¿
        const personalMessageTemplates = [
            "äº²çˆ±çš„ç”¨æˆ·æ‚¨å¥½ï½æ‚¨å·²æˆåŠŸè½¬å…¥ {amount} ç›®å‰ä½™é¢ä¸º {balance}ã€‚æ„Ÿè°¢æ‚¨ä¸€ç›´ä»¥æ¥çš„æ”¯æŒï¼Œæˆ‘ä¼šåœ¨è¿™é‡Œé™ªæ‚¨æ¯ä¸€æ­¥ï¼",
            "æ­å–œæ‚¨è·å¾—å½©é‡‘ {amount}ï¼ç³»ç»Ÿå·²ä¸ºæ‚¨åŠ å€¼ï¼Œç°åœ¨ä½™é¢ä¸º {balance}ã€‚ä»Šå¤©çš„æ‚¨ï¼Œå…‰èŠ’ä¸‡ä¸ˆï¼",
            "æ‚¨å·²æˆåŠŸä¸‹æ³¨ {amount}ï¼Œä¸‹æ³¨å·²æäº¤ï¼<br>æ³¨å•å·: {orderNumber}<br>ç›®å‰ä½™é¢ä¸º {balance}ï¼Œè®©æˆ‘ä»¬æœŸå¾…è¿™åœºèµ›äº‹ä¸ºæ‚¨å¸¦æ¥æƒŠå–œï¼",
            "é¢„çº¦ä¸‹æ³¨æˆåŠŸï¼Œæ‰£æ¬¾ {amount}ï¼Œæ‚¨çš„ä½™é¢ä¸º {balance}ã€‚<br>æ³¨å•å·: {orderNumber}<br>æ„Ÿè°¢æ‚¨çš„ä¿¡ä»»ï½æˆ‘ä»¬ä¼šä¸ºæ‚¨çš„é¢„çº¦æŠ•æ³¨æŒç»­å…³æ³¨ï¼",
            "ç³»ç»Ÿå·²ä¸ºæ‚¨äººå·¥åŠ æ¬¾ {amount}ï¼Œç›®å‰ä½™é¢ä¸º {balance}ã€‚æ„Ÿè°¢æ‚¨çš„è€å¿ƒä¸æ”¯æŒï½ç¥æ‚¨æŠ•æ³¨é¡ºåˆ©ï¼",
            "æ‚¨çš„å•å·:{orderNumber} æ¯”èµ›å·²ç»“æœï¼Œèµ›æœä¸ºèµ¢ï¼Œå·²æ´¾å½©{amount}å½©é‡‘ç»™æ‚¨ï¼Œç°åœ¨é¦€é¢æ˜¯{balance}ï¼Œæ¬¢è¿ç»§ç»­ä¸‹æ³¨ï¼Œæˆ‘ä¼šä¸æ‚¨ä¸€èµ·å…±æˆ˜åŒèµ¢ï¼",
            "åˆä¹°èµ›æœå·²å‡ºç‚‰! æ­å–œæ‚¨è·å¾—{amount}ï¼ŒåŠ ä¸Šä½£é‡‘{commission}ï¼Œç›®å‰ä½™é¢ä¸º {balance}<br>æ³¨å•å·: {orderNumber}"
        ];
        
        // ç”Ÿæˆéšæœºæ•°å­—
        function getRandomNumber(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }
        
        // ç”Ÿæˆéšæœºè®¢å•å·
        function generateOrderNumber() {
            return Math.floor(Math.random() * 9000000000) + 1000000000;
        }
        
        // è·å–å½“å‰æ—¶é—´
        function getCurrentTime() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            return `${hours}:${minutes}`;
        }
        
        // æ›´æ–°æœªè¯»æŒ‡ç¤ºå™¨æ˜¾ç¤º
        function updateUnreadIndicators() {
            systemUnread.style.display = unreadCounts.system > 0 ? 'block' : 'none';
            matchUnread.style.display = unreadCounts.match > 0 ? 'block' : 'none';
            personalUnread.style.display = unreadCounts.personal > 0 ? 'block' : 'none';
        }
        
        // æ·»åŠ æ–°æ¶ˆæ¯
        function addNewPersonalMessage() {
            // é€‰æ‹©éšæœºæ¶ˆæ¯æ¨¡æ¿
            const templateIndex = Math.floor(Math.random() * personalMessageTemplates.length);
            const template = personalMessageTemplates[templateIndex];
            
            // ç”Ÿæˆéšæœºæ•°æ®
            const amount = getRandomNumber(100, 5000);
            const balance = getRandomNumber(1000, 10000);
            const orderNumber = generateOrderNumber();
            const commission = getRandomNumber(50, 500);
            
            // æ›¿æ¢æ¨¡æ¿ä¸­çš„å˜é‡
            let messageText = template
                .replace('{amount}', amount)
                .replace('{balance}', balance)
                .replace('{orderNumber}', orderNumber)
                .replace('{commission}', commission);
            
            // æ£€æŸ¥æ˜¯å¦éœ€è¦æ·»åŠ æŒ‰é’®
            const needsButton = messageText.includes('æ³¨å•å·:') || messageText.includes('æ³¨å•å·ï¼š') || messageText.includes('å•å·:');
            
            // åˆ›å»ºæ¶ˆæ¯å…ƒç´ 
            const messageElement = document.createElement('div');
            messageElement.className = 'message new-message'; // æ·»åŠ æ–°æ¶ˆæ¯ç±»
            
            // åˆ›å»ºæ¶ˆæ¯æ°”æ³¡
            const bubbleElement = document.createElement('div');
            bubbleElement.className = 'message-bubble';
            
            // è®¾ç½®æ¶ˆæ¯å†…å®¹
            if (needsButton) {
                // æå–è®¢å•å·
                let extractedOrderNumber = orderNumber;
                if (messageText.includes('æ³¨å•å·:')) {
                    const match = messageText.match(/æ³¨å•å·:\s*(\d+)/);
                    if (match) extractedOrderNumber = match[1];
                } else if (messageText.includes('å•å·:')) {
                    const match = messageText.match(/å•å·:\s*(\d+)/);
                    if (match) extractedOrderNumber = match[1];
                }
                
                // æ·»åŠ æŒ‰é’®
                bubbleElement.innerHTML = messageText;
                if (!messageText.includes('<button')) {
                    const buttonHTML = `
                        <button class="action-button" data-order="${extractedOrderNumber}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                            å¤åˆ¶å•å·
                        </button>
                    `;
                    bubbleElement.innerHTML += buttonHTML;
                }
            } else {
                bubbleElement.textContent = messageText;
            }
            
            // åˆ›å»ºæ¶ˆæ¯ä¿¡æ¯
            const infoElement = document.createElement('div');
            infoElement.className = 'message-info';
            
            // æ·»åŠ æ—¶é—´
            const timeElement = document.createElement('div');
            timeElement.className = 'message-time';
            timeElement.textContent = getCurrentTime();
            infoElement.appendChild(timeElement);
            
            // ç»„è£…æ¶ˆæ¯
            messageElement.appendChild(bubbleElement);
            messageElement.appendChild(infoElement);
            
            // æ£€æŸ¥æ˜¯å¦éœ€è¦æ·»åŠ ä»Šå¤©çš„æ—¥æœŸåˆ†éš”çº¿
            const todaySeparator = document.getElementById('personalTodaySeparator');
            if (!todaySeparator) {
                // å¦‚æœæ²¡æœ‰ä»Šå¤©çš„åˆ†éš”çº¿ï¼Œæ·»åŠ ä¸€ä¸ª
                const dateSeparator = document.createElement('div');
                dateSeparator.className = 'date-separator';
                dateSeparator.id = 'personalTodaySeparator';
                dateSeparator.innerHTML = '<span>ä»Šå¤©</span>';
                personalContent.appendChild(dateSeparator);
            }
            
            // æ·»åŠ åˆ°ä¸ªäººä¿¡æ¯æ ‡ç­¾é¡µ
            personalContent.appendChild(messageElement);
            
            // æ»šåŠ¨åˆ°åº•éƒ¨
            personalContent.scrollTop = personalContent.scrollHeight;
            
            // å¦‚æœçª—å£æœªæ‰“å¼€æˆ–å½“å‰ä¸åœ¨ä¸ªäººä¿¡æ¯æ ‡ç­¾é¡µï¼Œå¢åŠ æœªè¯»æ¶ˆæ¯è®¡æ•°
            if (!isWindowOpen || currentTab !== 'personal') {
                unreadCounts.personal++;
                
                // å¦‚æœé“ƒé“›æ²¡æœ‰é™éŸ³ï¼Œæ›´æ–°é€šçŸ¥å¾½ç« 
                if (!mutedTabs.personal) {
                    updateNotificationCount();
                }
                
                // æ›´æ–°æœªè¯»æŒ‡ç¤ºå™¨
                updateUnreadIndicators();
            }
            
            // æ·»åŠ åŠ¨ç”»æ•ˆæœï¼Œå»¶è¿Ÿæ˜¾ç¤ºæ¶ˆæ¯
            setTimeout(() => {
                messageElement.classList.remove('new-message');
            }, 10);
        }
        
        // æ›´æ–°æœªè¯»æ¶ˆæ¯æ•°é‡
        function updateNotificationCount() {
            let totalUnread = 0;
            
            // åªè®¡ç®—æœªé™éŸ³æ ‡ç­¾é¡µçš„æœªè¯»æ¶ˆæ¯
            if (!mutedTabs.system) totalUnread += unreadCounts.system;
            if (!mutedTabs.match) totalUnread += unreadCounts.match;
            if (!mutedTabs.personal) totalUnread += unreadCounts.personal;
            
            // æ›´æ–°å¾½ç« 
            notificationBadge.textContent = totalUnread > 99 ? '99+' : totalUnread;
            
            if (totalUnread === 0) {
                notificationBadge.style.display = 'none';
            } else {
                notificationBadge.style.display = 'flex';
            }
        }
        
        // åˆ‡æ¢æ ‡ç­¾é¡µ
        function switchTab(tabName) {
            currentTab = tabName;
            
            // æ›´æ–°æ ‡ç­¾é¡µçŠ¶æ€
            headerTabs.forEach(tab => {
                const tabId = tab.getAttribute('data-tab');
                if (tabId === tabName) {
                    tab.classList.add('active');
                    
                    // é‡ç½®è¯¥æ ‡ç­¾é¡µçš„æœªè¯»æ¶ˆæ¯è®¡æ•°
                    unreadCounts[tabId] = 0;
                    updateNotificationCount();
                    updateUnreadIndicators();
                } else {
                    tab.classList.remove('active');
                }
            });
            
            // æ˜¾ç¤ºå¯¹åº”å†…å®¹
            systemContent.style.display = tabName === 'system' ? 'block' : 'none';
            matchContent.style.display = tabName === 'match' ? 'block' : 'none';
            personalContent.style.display = tabName === 'personal' ? 'block' : 'none';
            
            // æ¸…é™¤æœç´¢ç»“æœ
            clearSearch();
        }
        
        // åˆ‡æ¢é™éŸ³çŠ¶æ€
        function toggleMute(tabName) {
            mutedTabs[tabName] = !mutedTabs[tabName];
            
            // æ›´æ–°UI
            headerTabs.forEach(tab => {
                const tabId = tab.getAttribute('data-tab');
                if (tabId === tabName) {
                    if (mutedTabs[tabName]) {
                        tab.querySelector('.bell-icon').innerHTML = `
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                                <line x1="1" y1="1" x2="23" y2="23"></line>
                            </svg>
                        `;
                        tab.querySelector('.bell-icon').title = "å–æ¶ˆé™éŸ³";
                        tab.querySelector('.bell-icon').classList.add('muted');
                    } else {
                        tab.querySelector('.bell-icon').innerHTML = `
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                            </svg>
                        `;
                        tab.querySelector('.bell-icon').title = "é™éŸ³é€šçŸ¥";
                        tab.querySelector('.bell-icon').classList.remove('muted');
                    }
                }
            });
            
            // æ›´æ–°æœªè¯»æ¶ˆæ¯æ•°é‡
            updateNotificationCount();
        }
        
        // æœç´¢åŠŸèƒ½
        function performSearch() {
            const searchTerm = searchInput.value.trim().toLowerCase();
            if (!searchTerm) {
                clearSearch();
                return;
            }
            
            // æ¸…é™¤ä¹‹å‰çš„é«˜äº®
            clearHighlights();
            
            // è·å–å½“å‰æ ‡ç­¾é¡µçš„å†…å®¹
            const contentElement = document.getElementById(`${currentTab}Content`);
            const messages = contentElement.querySelectorAll('.message-bubble');
            
            // æŸ¥æ‰¾åŒ¹é…é¡¹
            searchMatches = [];
            messages.forEach(message => {
                const text = message.textContent.toLowerCase();
                let startIndex = 0;
                let index;
                
                while ((index = text.indexOf(searchTerm, startIndex)) > -1) {
                    searchMatches.push({
                        element: message,
                        index: index
                    });
                    startIndex = index + searchTerm.length;
                }
            });
            
            // æ›´æ–°æœç´¢ç»“æœè®¡æ•°
            resultCount.textContent = searchMatches.length;
            searchResults.style.display = 'block';
            
            // é«˜äº®åŒ¹é…é¡¹
            if (searchMatches.length > 0) {
                searchNavigation.style.display = 'flex';
                currentMatchIndex = 0;
                highlightCurrentMatch();
            } else {
                searchNavigation.style.display = 'none';
                currentMatchIndex = -1;
            }
            
            // æ›´æ–°å¯¼èˆªæŒ‰é’®çŠ¶æ€
            updateNavigationButtons();
        }
        
        // æ¸…é™¤æœç´¢
        function clearSearch() {
            searchInput.value = '';
            searchClear.style.display = 'none';
            searchResults.style.display = 'none';
            searchNavigation.style.display = 'none';
            clearHighlights();
            searchMatches = [];
            currentMatchIndex = -1;
        }
        
        // æ¸…é™¤é«˜äº®
        function clearHighlights() {
            const contentElement = document.getElementById(`${currentTab}Content`);
            const highlights = contentElement.querySelectorAll('.highlighted');
            highlights.forEach(highlight => {
                const parent = highlight.parentNode;
                parent.replaceChild(document.createTextNode(highlight.textContent), highlight);
                parent.normalize();
            });
        }
        
        // é«˜äº®å½“å‰åŒ¹é…é¡¹
        function highlightCurrentMatch() {
            if (currentMatchIndex < 0 || currentMatchIndex >= searchMatches.length) return;
            
            const match = searchMatches[currentMatchIndex];
            const element = match.element;
            const searchTerm = searchInput.value.trim().toLowerCase();
            
            // æ¸…é™¤ä¹‹å‰çš„é«˜äº®
            clearHighlights();
            
            // åˆ›å»ºé«˜äº®æ–‡æœ¬
            const text = element.textContent;
            const lowerText = text.toLowerCase();
            let startIndex = 0;
            let index;
            let newHtml = '';
            
            while ((index = lowerText.indexOf(searchTerm, startIndex)) > -1) {
                newHtml += text.substring(startIndex, index);
                newHtml += `<span class="highlighted">${text.substring(index, index + searchTerm.length)}</span>`;
                startIndex = index + searchTerm.length;
            }
            newHtml += text.substring(startIndex);
            
            // ä¿å­˜åŸå§‹HTMLä¸­çš„æŒ‰é’®
            const buttons = element.querySelectorAll('button');
            const buttonHtml = Array.from(buttons).map(button => button.outerHTML);
            
            // åº”ç”¨æ–°HTML
            element.innerHTML = newHtml;
            
            // æ¢å¤æŒ‰é’®
            if (buttonHtml.length > 0) {
                buttonHtml.forEach(html => {
                    element.innerHTML += html;
                });
            }
            
            // æ»šåŠ¨åˆ°å½“å‰åŒ¹é…é¡¹
            const highlight = element.querySelector('.highlighted');
            if (highlight) {
                highlight.scrollIntoView({
                    behavior: 'smooth',
                    block: 'center'
                });
            }
        }
        
        // æ›´æ–°å¯¼èˆªæŒ‰é’®çŠ¶æ€
        function updateNavigationButtons() {
            prevResult.disabled = currentMatchIndex <= 0;
            nextResult.disabled = currentMatchIndex >= searchMatches.length - 1;
        }
        
        // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæç¤º
        function showCopyToast(message) {
            copyToast.textContent = message || 'å·²å¤åˆ¶å•å·';
            copyToast.classList.add('show');
            
            setTimeout(() => {
                copyToast.classList.remove('show');
            }, 2000);
        }
        
        // å¤åˆ¶æ³¨å•å·
        function copyOrderNumber(orderNumber) {
            // åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡æœ¬åŒºåŸŸ
            const textarea = document.createElement('textarea');
            textarea.value = orderNumber;
            textarea.style.position = 'fixed';  // é˜²æ­¢æ»šåŠ¨åˆ°åº•éƒ¨
            document.body.appendChild(textarea);
            textarea.select();
            
            try {
                // æ‰§è¡Œå¤åˆ¶å‘½ä»¤
                const successful = document.execCommand('copy');
                if (successful) {
                    showCopyToast(`å·²å¤åˆ¶æ³¨å•å·: ${orderNumber}`);
                } else {
                    console.error('å¤åˆ¶å¤±è´¥');
                    showCopyToast('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
                }
            } catch (err) {
                console.error('å¤åˆ¶å‡ºé”™:', err);
                showCopyToast('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
            }
            
            // ç§»é™¤ä¸´æ—¶æ–‡æœ¬åŒºåŸŸ
            document.body.removeChild(textarea);
        }
        
        // å¤åˆ¶ä»£ç 
        function copyCode() {
            const codeText = codeBlock.textContent;
            
            // åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡æœ¬åŒºåŸŸ
            const textarea = document.createElement('textarea');
            textarea.value = codeText;
            textarea.style.position = 'fixed';
            document.body.appendChild(textarea);
            textarea.select();
            
            try {
                // æ‰§è¡Œå¤åˆ¶å‘½ä»¤
                const successful = document.execCommand('copy');
                if (successful) {
                    showCopyToast('ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
                } else {
                    console.error('å¤åˆ¶å¤±è´¥');
                    showCopyToast('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
                }
            } catch (err) {
                console.error('å¤åˆ¶å‡ºé”™:', err);
                showCopyToast('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
            }
            
            // ç§»é™¤ä¸´æ—¶æ–‡æœ¬åŒºåŸŸ
            document.body.removeChild(textarea);
        }
        
        // å‰å¾€èµ›äº‹è¯¦æƒ…
        function goToMatchDetail(matchId) {
            alert(`æ­£åœ¨å‰å¾€èµ›äº‹è¯¦æƒ…é¡µ: ${matchId}`);
            // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„è·³è½¬é€»è¾‘
        }
        
        // å¤„ç†æŒ‰é’®ç‚¹å‡»
        function handleButtonClick(button) {
            if (button.hasAttribute('data-order')) {
                // å¤åˆ¶æ³¨å•å·
                const orderNumber = button.getAttribute('data-order');
                copyOrderNumber(orderNumber);
            } else if (button.hasAttribute('data-match')) {
                // å‰å¾€èµ›äº‹è¯¦æƒ…
                const matchId = button.getAttribute('data-match');
                goToMatchDetail(matchId);
            }
        }
        
        // æ˜¾ç¤ºåŸç”Ÿä»£ç 
        function showSourceCode() {
            const htmlCode = document.documentElement.outerHTML
                .replace(/<script>\s*window\.__CF\$cv\$params.*?<\/script>/g, '') // ç§»é™¤ Cloudflare è…³æœ¬
                .replace(/<iframe.*?<\/iframe>/g, ''); // ç§»é™¤ iframe
            codeBlock.textContent = htmlCode;
            devModal.style.display = 'flex';
        }
        
        // æ‹–æ‹½å¼€å§‹
        function startDrag(e) {
            // å¦‚æœæ˜¯è§¦æ‘¸äº‹ä»¶ï¼Œè·å–ç¬¬ä¸€ä¸ªè§¦æ‘¸ç‚¹
            const clientX = e.clientX || e.touches[0].clientX;
            const clientY = e.clientY || e.touches[0].clientY;
            
            isDragging = true;
            chatButton.classList.add('dragging');
            
            // è·å–æŒ‰é’®å½“å‰ä½ç½®
            const rect = chatButton.getBoundingClientRect();
            startX = clientX;
            startY = clientY;
            
            // è®¡ç®—æŒ‰é’®çš„åˆå§‹ä½ç½®ï¼ˆç›¸å¯¹äºè§†å£ï¼‰
            initialTop = rect.top;
            initialRight = window.innerWidth - rect.right;
            
            // é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Œé˜²æ­¢åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ»šåŠ¨é¡µé¢
            e.preventDefault();
        }
        
        // æ‹–æ‹½ä¸­
        function drag(e) {
            if (!isDragging) return;
            
            // å¦‚æœæ˜¯è§¦æ‘¸äº‹ä»¶ï¼Œè·å–ç¬¬ä¸€ä¸ªè§¦æ‘¸ç‚¹
            const clientX = e.clientX || e.touches[0].clientX;
            const clientY = e.clientY || e.touches[0].clientY;
            
            // è®¡ç®—ç§»åŠ¨è·ç¦»
            const deltaY = clientY - startY;
            
            // æ›´æ–°æŒ‰é’®ä½ç½®ï¼ˆåªå…è®¸å‚ç›´ç§»åŠ¨ï¼‰
            const newTop = initialTop + deltaY;
            
            // ç¡®ä¿æŒ‰é’®ä¸ä¼šç§»å‡ºè§†å£
            if (newTop >= 0 && newTop <= window.innerHeight - chatButton.offsetHeight) {
                chatButton.style.top = newTop + 'px';
                chatButton.style.right = initialRight + 'px';
                // ç§»é™¤é»˜è®¤çš„transformï¼Œå› ä¸ºæˆ‘ä»¬ç°åœ¨ä½¿ç”¨ç»å¯¹å®šä½
                chatButton.style.transform = 'none';
            }
            
            e.preventDefault();
        }
        
        // æ‹–æ‹½ç»“æŸ
        function endDrag() {
            if (isDragging) {
                isDragging = false;
                chatButton.classList.remove('dragging');
            }
        }
        
        // ç›‘å¬é”®ç›˜æŒ‰é”®
        document.addEventListener('keydown', (e) => {
            // å¦‚æœæŒ‰ä¸‹æ•°å­—1é”®ï¼Œæ·»åŠ æ–°æ¶ˆæ¯
            if (e.key === '1') {
                addNewPersonalMessage();
            }
        });
        
        // äº‹ä»¶ç›‘å¬å™¨
        
        // æ‹–æ‹½äº‹ä»¶
        chatButton.addEventListener('mousedown', startDrag);
        chatButton.addEventListener('touchstart', startDrag);
        
        document.addEventListener('mousemove', drag);
        document.addEventListener('touchmove', drag);
        
        document.addEventListener('mouseup', endDrag);
        document.addEventListener('touchend', endDrag);
        
        // ç‚¹å‡»èŠå¤©æŒ‰é’®
        chatButton.addEventListener('click', (e) => {
            // å¦‚æœæ­£åœ¨æ‹–æ‹½ï¼Œä¸è§¦å‘ç‚¹å‡»äº‹ä»¶
            if (isDragging) return;
            
            if (chatWindow.style.display === 'flex') {
                chatWindow.style.display = 'none';
                chatButton.style.display = 'flex';
                searchBar.classList.remove('visible');
                isWindowOpen = false;
            } else {
                chatWindow.style.display = 'flex';
                chatButton.style.display = 'none';
                setTimeout(() => {
                    searchBar.classList.add('visible');
                }, 300);
                isWindowOpen = true;
                
                // å¦‚æœå½“å‰æ ‡ç­¾é¡µæœ‰æœªè¯»æ¶ˆæ¯ï¼Œæ ‡è®°ä¸ºå·²è¯»
                if (unreadCounts[currentTab] > 0) {
                    unreadCounts[currentTab] = 0;
                    updateNotificationCount();
                    updateUnreadIndicators();
                }
            }
        });
        
        // å…³é—­èŠå¤©çª—å£
        closeButton.addEventListener('click', () => {
            searchBar.classList.remove('visible');
            setTimeout(() => {
                chatWindow.style.display = 'none';
                chatButton.style.display = 'flex';
            }, 300);
            isWindowOpen = false;
        });
        
        // æ ‡ç­¾é¡µåˆ‡æ¢
        headerTabs.forEach(tab => {
            tab.addEventListener('click', (e) => {
                if (e.target.closest('.bell-icon')) return; // å¦‚æœç‚¹å‡»çš„æ˜¯é“ƒé“›å›¾æ ‡ï¼Œä¸åˆ‡æ¢æ ‡ç­¾
                const tabName = tab.getAttribute('data-tab');
                switchTab(tabName);
            });
        });
        
        // é™éŸ³æŒ‰é’®
        bellIcons.forEach(bell => {
            bell.addEventListener('click', (e) => {
                e.stopPropagation();
                const tabName = bell.closest('.header-tab').getAttribute('data-tab');
                toggleMute(tabName);
            });
        });
        
        // æœç´¢è¾“å…¥
        searchInput.addEventListener('input', () => {
            if (searchInput.value) {
                searchClear.style.display = 'block';
            } else {
                searchClear.style.display = 'none';
                searchResults.style.display = 'none';
                searchNavigation.style.display = 'none';
                clearHighlights();
            }
        });
        
        // æœç´¢æ¡†æŒ‰Enteré”®
        searchInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                performSearch();
            }
        });
        
        // æ¸…é™¤æœç´¢
        searchClear.addEventListener('click', clearSearch);
        
        // ä¸Šä¸€ä¸ªæœç´¢ç»“æœ
        prevResult.addEventListener('click', () => {
            if (currentMatchIndex > 0) {
                currentMatchIndex--;
                highlightCurrentMatch();
                updateNavigationButtons();
            }
        });
        
        // ä¸‹ä¸€ä¸ªæœç´¢ç»“æœ
        nextResult.addEventListener('click', () => {
            if (currentMatchIndex < searchMatches.length - 1) {
                currentMatchIndex++;
                highlightCurrentMatch();
                updateNavigationButtons();
            }
        });
        
        // æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('action-button') || e.target.closest('.action-button')) {
                const button = e.target.classList.contains('action-button') ? e.target : e.target.closest('.action-button');
                handleButtonClick(button);
            }
        });
        
        // å¼€å‘è€…æŒ‰é’®
        devButton.addEventListener('click', showSourceCode);
        
        // å¤åˆ¶ä»£ç æŒ‰é’®
        copyCodeButton.addEventListener('click', copyCode);
        
        // å…³é—­æ¨¡æ€çª—å£
        modalClose.addEventListener('click', () => {
            devModal.style.display = 'none';
        });
        
        // ç‚¹å‡»æ¨¡æ€çª—å£å¤–éƒ¨å…³é—­
        window.addEventListener('click', (e) => {
            if (e.target === devModal) {
                devModal.style.display = 'none';
            }
        });
        
        // åˆå§‹åŒ–
        updateNotificationCount();
        updateUnreadIndicators();
        
        // è¦–é »æ§åˆ¶
        const backgroundVideo = document.getElementById('background-video');
        
        // ç¢ºä¿è¦–é »å§‹çµ‚æ’­æ”¾
        function ensureVideoPlaying() {
            if (backgroundVideo.paused) {
                backgroundVideo.play();
            }
        }
        
        // ç›£è½è¦–é »äº‹ä»¶
        backgroundVideo.addEventListener('pause', ensureVideoPlaying);
        backgroundVideo.addEventListener('ended', ensureVideoPlaying);
        
        // é˜²æ­¢ç”¨æˆ¶æš«åœè¦–é »
        backgroundVideo.addEventListener('click', (e) => {
            e.preventDefault();
            ensureVideoPlaying();
        });
        
        // æ¯ç§’æª¢æŸ¥ä¸€æ¬¡è¦–é »ç‹€æ…‹
        setInterval(ensureVideoPlaying, 1000);
        
        // è¨­ç½®ç›¸é—œå…ƒç´ 
        const settingsButton = document.getElementById('settingsButton');
        const settingsContainer = document.getElementById('settingsContainer');
        const settingsSaveButton = document.getElementById('settingsSaveButton');
        const settingsCancelButton = document.getElementById('settingsCancelButton');
        
        // ä¿å­˜é–‹é—œç‹€æ…‹
        let switchStates = {
            scoreChange: false,
            oddsSale: false,
            scheduleChange: false,
            matchCancel: false
        };
        
        // é¡¯ç¤ºè¨­ç½®é¢æ¿
        function showSettings() {
            // éš±è—æœç´¢æ¬„
            searchBar.classList.remove('visible');
            
            // é¡¯ç¤ºè¨­ç½®é¢æ¿
            settingsContainer.style.display = 'flex';
            
            // æ¢å¾©ä¹‹å‰çš„é–‹é—œç‹€æ…‹
            Object.keys(switchStates).forEach(id => {
                const checkbox = document.getElementById(id);
                if (checkbox) {
                    checkbox.checked = switchStates[id];
                }
            });
        }
        
        // éš±è—è¨­ç½®é¢æ¿
        function hideSettings() {
            // é¡¯ç¤ºæœç´¢æ¬„
            searchBar.classList.add('visible');
            
            // éš±è—è¨­ç½®é¢æ¿
            settingsContainer.style.display = 'none';
        }
        
        // ä¿å­˜è¨­ç½®
        function saveSettings() {
            // ä¿å­˜æ‰€æœ‰é–‹é—œçš„ç‹€æ…‹
            Object.keys(switchStates).forEach(id => {
                const checkbox = document.getElementById(id);
                if (checkbox) {
                    switchStates[id] = checkbox.checked;
                }
            });
            
            // éš±è—è¨­ç½®é¢æ¿
            hideSettings();
        }
        
        // è¨­ç½®æŒ‰éˆ•é»æ“Šäº‹ä»¶
        settingsButton.addEventListener('click', (e) => {
            e.stopPropagation();
            showSettings();
        });
        
        // ä¿å­˜æŒ‰éˆ•é»æ“Šäº‹ä»¶
        settingsSaveButton.addEventListener('click', () => {
            saveSettings();
        });
        
        // å–æ¶ˆæŒ‰éˆ•é»æ“Šäº‹ä»¶
        settingsCancelButton.addEventListener('click', () => {
            hideSettings();
        });
        
        // é˜²æ­¢è¨­ç½®é¢æ¿å…§çš„é»æ“Šäº‹ä»¶å†’æ³¡
        settingsContainer.addEventListener('click', (e) => {
            e.stopPropagation();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'93cd3ad6961c49f7',t:'MTc0Njc1MjExMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script><iframe height="1" width="1" style="position: absolute; top: 0px; left: 0px; border: none; visibility: hidden;"></iframe>
</body><grammarly-desktop-integration data-grammarly-shadow-root="true"></grammarly-desktop-integration></html>