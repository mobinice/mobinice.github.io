<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éˆå±… - ä»£éŠ·ç«¯ç®¡ç†å¾Œå°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #7c3aed;
            --secondary-color: #64748b;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --info-color: #06b6d4;
            --bg-color: #f8fafc;
            --card-bg: #ffffff;
            --border-color: #e2e8f0;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --sidebar-width: 260px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft JhengHei', sans-serif;
            background: var(--bg-color);
            color: var(--text-primary);
            line-height: 1.6;
        }

        /* ç™»å…¥/è¨»å†Šé é¢ */
        .auth-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            padding: 20px;
        }

        .auth-wrapper.hidden {
            display: none;
        }

        .auth-container {
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            width: 100%;
            max-width: 480px;
            padding: 48px 40px;
        }

        .auth-logo {
            text-align: center;
            margin-bottom: 32px;
        }

        .auth-logo h1 {
            font-size: 36px;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 8px;
        }

        .auth-logo p {
            font-size: 16px;
            color: var(--text-secondary);
        }

        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 32px;
            position: relative;
        }

        .step-indicator::before {
            content: '';
            position: absolute;
            top: 16px;
            left: 16px;
            right: 16px;
            height: 2px;
            background: var(--border-color);
            z-index: 0;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 1;
            flex: 1;
        }

        .step-number {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--border-color);
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 8px;
            transition: all 0.3s;
        }

        .step.active .step-number {
            background: var(--primary-color);
            color: white;
        }

        .step.completed .step-number {
            background: var(--success-color);
            color: white;
        }

        .step-label {
            font-size: 12px;
            color: var(--text-secondary);
            text-align: center;
        }

        .step.active .step-label {
            color: var(--primary-color);
            font-weight: 600;
        }

        .auth-form-section {
            display: none;
        }

        .auth-form-section.active {
            display: block;
        }

        .auth-form-group {
            margin-bottom: 24px;
        }

        .auth-form-label {
            display: block;
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .auth-form-label .required {
            color: var(--danger-color);
            margin-left: 2px;
        }

        .auth-form-control {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 15px;
            transition: all 0.3s;
        }

        .auth-form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.1);
        }

        .auth-form-control.error {
            border-color: var(--danger-color);
        }

        .auth-form-control.success {
            border-color: var(--success-color);
        }

        .auth-error-message {
            color: var(--danger-color);
            font-size: 13px;
            margin-top: 6px;
            display: none;
        }

        .auth-error-message.show {
            display: block;
        }

        .auth-success-message {
            color: var(--success-color);
            font-size: 13px;
            margin-top: 6px;
            display: none;
        }

        .auth-success-message.show {
            display: block;
        }

        .auth-helper-text {
            font-size: 13px;
            color: var(--text-secondary);
            margin-top: 8px;
        }

        .auth-input-group {
            display: flex;
            gap: 8px;
        }

        .auth-input-group .auth-form-control {
            flex: 1;
        }

        .auth-btn-secondary {
            padding: 12px 20px;
            background: var(--bg-color);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .auth-btn-secondary:hover {
            background: var(--border-color);
        }

        .auth-btn-secondary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .password-requirements {
            background: var(--bg-color);
            padding: 12px;
            border-radius: 8px;
            margin-top: 8px;
            font-size: 13px;
        }

        .password-requirements ul {
            margin-left: 20px;
            margin-top: 8px;
        }

        .password-requirements li {
            margin-bottom: 4px;
            color: var(--text-secondary);
        }

        .password-requirements li.met {
            color: var(--success-color);
        }

        .auth-btn-primary {
            width: 100%;
            padding: 14px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 16px;
        }

        .auth-btn-primary:hover {
            background: #6d28d9;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);
        }

        .auth-btn-primary:active {
            transform: translateY(0);
        }

        .auth-btn-primary:disabled {
            background: var(--border-color);
            cursor: not-allowed;
            transform: none;
        }

        .auth-btn-group {
            display: flex;
            gap: 12px;
            margin-top: 16px;
        }

        .auth-btn-outline {
            flex: 1;
            padding: 14px;
            background: white;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .auth-btn-outline:hover {
            background: var(--bg-color);
        }

        .auth-divider {
            text-align: center;
            margin: 32px 0;
            position: relative;
        }

        .auth-divider::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            width: 100%;
            height: 1px;
            background: var(--border-color);
        }

        .auth-divider span {
            position: relative;
            background: white;
            padding: 0 16px;
            color: var(--text-secondary);
            font-size: 14px;
        }

        .auth-link {
            text-align: center;
        }

        .auth-link a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 600;
            font-size: 15px;
            cursor: pointer;
        }

        .auth-link a:hover {
            text-decoration: underline;
        }

        .success-container {
            text-align: center;
            padding: 32px 0;
        }

        .success-icon {
            width: 80px;
            height: 80px;
            background: var(--success-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 24px;
            font-size: 48px;
            color: white;
        }

        .success-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 12px;
        }

        .success-text {
            font-size: 15px;
            color: var(--text-secondary);
            margin-bottom: 24px;
            line-height: 1.6;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        .container.hidden {
            display: none;
        }

        /* å´é‚Šæ¬„ */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--card-bg);
            border-right: 1px solid var(--border-color);
            padding: 24px 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 100;
        }

        .logo {
            padding: 0 24px 24px;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 24px;
        }

        .logo h1 {
            font-size: 24px;
            color: var(--primary-color);
            font-weight: 700;
        }

        .logo p {
            font-size: 14px;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            padding: 0 16px;
            margin-bottom: 4px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s;
            cursor: pointer;
        }

        .nav-link:hover {
            background: var(--bg-color);
            color: var(--primary-color);
        }

        .nav-link.active {
            background: var(--primary-color);
            color: white;
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            margin-right: 12px;
        }

        /* ä¸»å…§å®¹å€ */
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            padding: 24px;
        }

        /* é ‚éƒ¨æ¬„ */
        .header {
            background: var(--card-bg);
            padding: 20px 32px;
            border-radius: 12px;
            margin-bottom: 24px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-left h2 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .header-left p {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        .user-details {
            text-align: right;
        }

        .user-name {
            font-weight: 600;
            font-size: 14px;
        }

        .user-role {
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* é é¢å…§å®¹ */
        .page-content {
            display: none;
        }

        .page-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* å¡ç‰‡ */
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
        }

        /* çµ±è¨ˆå¡ç‰‡ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }

        .stat-card {
            background: var(--card-bg);
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border-left: 4px solid var(--primary-color);
            transition: all 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .stat-label {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .stat-change {
            font-size: 12px;
            margin-top: 8px;
            color: var(--success-color);
        }

        /* æ¡ˆå ´å¡ç‰‡ */
        .project-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .project-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            transition: all 0.3s;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .project-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(124, 58, 237, 0.15);
            border-color: var(--primary-color);
        }

        .project-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .project-name {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .project-status {
            font-size: 12px;
            padding: 4px 12px;
            border-radius: 12px;
            font-weight: 600;
        }

        .project-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .project-stat-item {
            text-align: center;
            padding: 12px;
            background: var(--bg-color);
            border-radius: 8px;
        }

        .project-stat-label {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .project-stat-value {
            font-size: 20px;
            font-weight: 700;
            color: var(--primary-color);
        }

        /* è¡¨æ ¼ */
        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: var(--bg-color);
        }

        th {
            padding: 12px;
            text-align: left;
            font-weight: 600;
            font-size: 14px;
            color: var(--text-secondary);
            border-bottom: 2px solid var(--border-color);
        }

        td {
            padding: 16px 12px;
            border-bottom: 1px solid var(--border-color);
            font-size: 14px;
        }

        tr:hover {
            background: var(--bg-color);
        }

        /* å¾½ç«  */
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge-primary { background: #ede9fe; color: var(--primary-color); }
        .badge-success { background: #d1fae5; color: var(--success-color); }
        .badge-warning { background: #fed7aa; color: var(--warning-color); }
        .badge-danger { background: #fee2e2; color: var(--danger-color); }
        .badge-info { background: #cffafe; color: var(--info-color); }
        .badge-secondary { background: #f1f5f9; color: var(--text-secondary); }

        /* æŒ‰éˆ• */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: #6d28d9;
        }

        .btn-secondary {
            background: var(--secondary-color);
            color: white;
        }

        .btn-success {
            background: var(--success-color);
            color: white;
        }

        .btn-success:hover {
            background: #059669;
        }

        .btn-danger {
            background: var(--danger-color);
            color: white;
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-primary);
        }

        .btn-outline:hover {
            background: var(--bg-color);
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 12px;
        }

        /* æ¨™ç±¤é  */
        .tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
            border-bottom: 2px solid var(--border-color);
        }

        .tab {
            padding: 12px 24px;
            background: transparent;
            border: none;
            border-bottom: 2px solid transparent;
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: -2px;
        }

        .tab:hover {
            color: var(--primary-color);
        }

        .tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        /* è¡¨å–® */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 14px;
        }

        .form-control {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.1);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 32px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            margin-bottom: 24px;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 700;
        }

        .modal-footer {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            margin-top: 24px;
        }

        /* QR æƒæå™¨ */
        .qr-scanner {
            background: var(--bg-color);
            border: 2px dashed var(--border-color);
            border-radius: 12px;
            padding: 60px 40px;
            text-align: center;
            margin-bottom: 24px;
        }

        .qr-scanner-icon {
            width: 120px;
            height: 120px;
            margin: 0 auto 20px;
            background: var(--primary-color);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .qr-scanner-icon svg {
            width: 80px;
            height: 80px;
            color: white;
        }

        .qr-scanner-text {
            font-size: 16px;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        /* æœå°‹æ¬„ */
        .search-bar {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }

        .search-input {
            flex: 1;
            padding: 10px 16px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 14px;
        }

        /* æ—¥èªŒé …ç›® */
        .log-item {
            padding: 16px;
            background: var(--bg-color);
            border-radius: 8px;
            margin-bottom: 12px;
            border-left: 4px solid var(--primary-color);
        }

        .log-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .log-action {
            font-weight: 600;
            font-size: 14px;
        }

        .log-time {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .log-details {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .log-user {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            margin-right: 12px;
        }

        /* é®ç½©æ–‡å­— */
        .masked-text {
            color: var(--text-secondary);
            letter-spacing: 2px;
        }

        /* è­¦å‘Šæ¡† */
        .alert {
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .alert-warning {
            background: #fef3c7;
            border-left: 4px solid var(--warning-color);
            color: #92400e;
        }

        .alert-info {
            background: #dbeafe;
            border-left: 4px solid var(--info-color);
            color: #1e3a8a;
        }

        /* éŸ¿æ‡‰å¼ */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s;
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .project-grid {
                grid-template-columns: 1fr;
            }

            .header {
                flex-direction: column;
                gap: 16px;
                align-items: flex-start;
            }
        }

        /* å¾…è™•ç†æ•¸é‡å¾½ç«  */
        .pending-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 24px;
            height: 24px;
            padding: 0 8px;
            background: var(--danger-color);
            color: white;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 700;
            margin-left: 8px;
        }

        /* é€šçŸ¥ç³»çµ± */
        .notification-wrapper {
            position: relative;
        }

        .notification-btn {
            position: relative;
            width: 40px;
            height: 40px;
            border: none;
            background: transparent;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .notification-btn:hover {
            background: var(--bg-color);
        }

        .notification-badge {
            position: absolute;
            top: 0;
            right: 0;
            background: var(--danger-color);
            color: white;
            font-size: 11px;
            font-weight: 700;
            min-width: 18px;
            height: 18px;
            border-radius: 9px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 5px;
        }

        .notification-panel {
            display: none;
            position: absolute;
            top: 50px;
            right: 0;
            width: 400px;
            max-height: 500px;
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            z-index: 1000;
            overflow: hidden;
        }

        .notification-panel.active {
            display: block;
            animation: slideDown 0.3s;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .notification-header {
            padding: 16px 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .notification-header h3 {
            font-size: 16px;
            font-weight: 600;
        }

        .btn-text {
            background: none;
            border: none;
            color: var(--primary-color);
            font-size: 13px;
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 4px;
            transition: all 0.3s;
        }

        .btn-text:hover {
            background: var(--bg-color);
        }

        .notification-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .notification-item {
            display: flex;
            gap: 12px;
            padding: 16px 20px;
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            transition: all 0.3s;
        }

        .notification-item:hover {
            background: var(--bg-color);
        }

        .notification-item.unread {
            background: #faf5ff;
        }

        .notification-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .notification-content {
            flex: 1;
        }

        .notification-title {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 4px;
        }

        .notification-text {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .notification-time {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .notification-footer {
            padding: 12px 20px;
            text-align: center;
            border-top: 1px solid var(--border-color);
        }

        .notification-footer a {
            color: var(--primary-color);
            text-decoration: none;
            font-size: 14px;
            font-weight: 600;
        }

        .notification-footer a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <!-- ç™»å…¥/è¨»å†Šé é¢ -->
    <div class="auth-wrapper" id="authWrapper">
        <div class="auth-container">
            <!-- ç™»å…¥é é¢ -->
            <div id="loginPage" class="auth-form-section active">
                <div class="auth-logo">
                    <h1>éˆå±…</h1>
                    <p>ä»£éŠ·ç«¯ç®¡ç†ç³»çµ±</p>
                </div>

                <form onsubmit="handleLogin(event)">
                    <div class="auth-form-group">
                        <label class="auth-form-label">å…¬å¸ä»£ç¢¼ï¼ˆå¸³è™Ÿï¼‰</label>
                        <input
                            type="text"
                            class="auth-form-control"
                            id="loginCompanyCode"
                            placeholder="è«‹è¼¸å…¥å…¬å¸ä»£ç¢¼"
                            required
                        >
                        <p class="auth-helper-text">éš¨ä¾¿è¼¸å…¥å³å¯ç™»å…¥ï¼ˆæ¸¬è©¦ç”¨ï¼‰</p>
                    </div>

                    <div class="auth-form-group">
                        <label class="auth-form-label">å¯†ç¢¼</label>
                        <input
                            type="password"
                            class="auth-form-control"
                            id="loginPassword"
                            placeholder="è«‹è¼¸å…¥å¯†ç¢¼"
                            required
                        >
                    </div>

                    <div class="auth-error-message" id="loginErrorMessage">
                        å¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤ï¼Œè«‹é‡æ–°è¼¸å…¥
                    </div>

                    <button type="submit" class="auth-btn-primary">
                        ç™»å…¥
                    </button>
                </form>

                <div class="auth-divider">
                    <span>é‚„æ²’æœ‰å¸³è™Ÿï¼Ÿ</span>
                </div>

                <div class="auth-link">
                    <a onclick="showRegisterPage()">è¨»å†Šä»£éŠ·å…¬å¸å¸³è™Ÿ</a>
                </div>
            </div>

            <!-- è¨»å†Šé é¢ -->
            <div id="registerPage" class="auth-form-section">
                <div class="auth-logo">
                    <h1>éˆå±…</h1>
                    <p>ä»£éŠ·ç«¯å¸³è™Ÿè¨»å†Š</p>
                </div>

                <div class="step-indicator">
                    <div class="step active" data-step="1">
                        <div class="step-number">1</div>
                        <div class="step-label">å…¬å¸é©—è­‰</div>
                    </div>
                    <div class="step" data-step="2">
                        <div class="step-number">2</div>
                        <div class="step-label">å€‹äººè³‡æ–™</div>
                    </div>
                    <div class="step" data-step="3">
                        <div class="step-number">3</div>
                        <div class="step-label">æ‰‹æ©Ÿé©—è­‰</div>
                    </div>
                    <div class="step" data-step="4">
                        <div class="step-number">4</div>
                        <div class="step-label">è¨­å®šå¯†ç¢¼</div>
                    </div>
                </div>

                <!-- Step 1: å…¬å¸ä»£ç¢¼é©—è­‰ -->
                <div class="auth-form-section active" id="regStep1">
                    <form onsubmit="handleRegCompanyCode(event)">
                        <div class="auth-form-group">
                            <label class="auth-form-label">å…¬å¸ä»£ç¢¼<span class="required">*</span></label>
                            <input
                                type="text"
                                class="auth-form-control"
                                id="regCompanyCode"
                                placeholder="è«‹è¼¸å…¥æ‚¨çš„å…¬å¸ä»£ç¢¼"
                                required
                            >
                            <p class="auth-helper-text">è«‹å‘æ‚¨çš„å…¬å¸ç®¡ç†å“¡ç´¢å–å…¬å¸ä»£ç¢¼</p>
                            <p class="auth-error-message" id="regCompanyCodeError">å…¬å¸ä»£ç¢¼ä¸å­˜åœ¨æˆ–å·²è¢«è¨»å†Š</p>
                            <p class="auth-success-message" id="regCompanyCodeSuccess">å…¬å¸ä»£ç¢¼é©—è­‰æˆåŠŸ</p>
                        </div>
                        <button type="submit" class="auth-btn-primary">é©—è­‰ä¸¦ç¹¼çºŒ</button>
                    </form>
                </div>

                <!-- Step 2: å€‹äººè³‡æ–™ -->
                <div class="auth-form-section" id="regStep2">
                    <form onsubmit="handleRegPersonalInfo(event)">
                        <div class="auth-form-group">
                            <label class="auth-form-label">çœŸå¯¦å§“å<span class="required">*</span></label>
                            <input
                                type="text"
                                class="auth-form-control"
                                id="regRealName"
                                placeholder="è«‹è¼¸å…¥çœŸå¯¦å§“å"
                                required
                            >
                            <p class="auth-helper-text">è«‹è¼¸å…¥èˆ‡èº«åˆ†è­‰ç›¸ç¬¦çš„çœŸå¯¦å§“å</p>
                        </div>

                        <div class="auth-form-group">
                            <label class="auth-form-label">èº«åˆ†è­‰å­—è™Ÿ<span class="required">*</span></label>
                            <input
                                type="text"
                                class="auth-form-control"
                                id="regIdNumber"
                                placeholder="è«‹è¼¸å…¥èº«åˆ†è­‰å­—è™Ÿ"
                                maxlength="10"
                                required
                            >
                            <p class="auth-helper-text">èº«åˆ†è­‰å­—è™Ÿå°‡åŠ å¯†å„²å­˜ï¼Œåƒ…ç”¨æ–¼èº«ä»½é©—è­‰</p>
                            <p class="auth-error-message" id="regIdNumberError">èº«åˆ†è­‰æ ¼å¼ä¸æ­£ç¢º</p>
                        </div>

                        <div class="auth-btn-group">
                            <button type="button" class="auth-btn-outline" onclick="regPrevStep()">ä¸Šä¸€æ­¥</button>
                            <button type="submit" class="auth-btn-primary" style="margin-top: 0;">ä¸‹ä¸€æ­¥</button>
                        </div>
                    </form>
                </div>

                <!-- Step 3: æ‰‹æ©Ÿé©—è­‰ -->
                <div class="auth-form-section" id="regStep3">
                    <form onsubmit="handleRegPhoneVerification(event)">
                        <div class="auth-form-group">
                            <label class="auth-form-label">æ‰‹æ©Ÿè™Ÿç¢¼<span class="required">*</span></label>
                            <div class="auth-input-group">
                                <input
                                    type="tel"
                                    class="auth-form-control"
                                    id="regPhoneNumber"
                                    placeholder="è«‹è¼¸å…¥æ‰‹æ©Ÿè™Ÿç¢¼"
                                    maxlength="10"
                                    required
                                >
                                <button
                                    type="button"
                                    class="auth-btn-secondary"
                                    id="sendSmsBtn"
                                    onclick="sendVerificationCode()"
                                >
                                    ç™¼é€é©—è­‰ç¢¼
                                </button>
                            </div>
                            <p class="auth-helper-text">è«‹è¼¸å…¥ 10 ç¢¼æ‰‹æ©Ÿè™Ÿç¢¼ï¼ˆä¾‹ï¼š0912345678ï¼‰</p>
                            <p class="auth-error-message" id="regPhoneError">æ‰‹æ©Ÿè™Ÿç¢¼æ ¼å¼ä¸æ­£ç¢º</p>
                        </div>

                        <div class="auth-form-group" id="smsCodeGroup" style="display: none;">
                            <label class="auth-form-label">ç°¡è¨Šé©—è­‰ç¢¼<span class="required">*</span></label>
                            <input
                                type="text"
                                class="auth-form-control"
                                id="regSmsCode"
                                placeholder="è«‹è¼¸å…¥ 6 ä½æ•¸é©—è­‰ç¢¼"
                                maxlength="6"
                            >
                            <p class="auth-helper-text" id="smsTimer">é©—è­‰ç¢¼å·²ç™¼é€ï¼Œ5 åˆ†é˜å…§æœ‰æ•ˆ</p>
                            <p class="auth-error-message" id="regSmsCodeError">é©—è­‰ç¢¼éŒ¯èª¤æˆ–å·²éæœŸ</p>
                        </div>

                        <div class="auth-btn-group">
                            <button type="button" class="auth-btn-outline" onclick="regPrevStep()">ä¸Šä¸€æ­¥</button>
                            <button type="submit" class="auth-btn-primary" style="margin-top: 0;" id="verifyPhoneBtn">é©—è­‰ä¸¦ç¹¼çºŒ</button>
                        </div>
                    </form>
                </div>

                <!-- Step 4: è¨­å®šå¯†ç¢¼ -->
                <div class="auth-form-section" id="regStep4">
                    <form onsubmit="handleRegPasswordSetup(event)">
                        <div class="auth-form-group">
                            <label class="auth-form-label">è¨­å®šå¯†ç¢¼<span class="required">*</span></label>
                            <input
                                type="password"
                                class="auth-form-control"
                                id="regPassword"
                                placeholder="è«‹è¼¸å…¥å¯†ç¢¼"
                                required
                                oninput="checkPasswordStrength()"
                            >
                            <div class="password-requirements">
                                <div style="font-weight: 600; color: var(--text-primary);">å¯†ç¢¼éœ€ç¬¦åˆä»¥ä¸‹æ¢ä»¶ï¼š</div>
                                <ul>
                                    <li id="req-length">è‡³å°‘ 8 å€‹å­—å…ƒ</li>
                                    <li id="req-letter">åŒ…å«è‹±æ–‡å­—æ¯</li>
                                    <li id="req-number">åŒ…å«æ•¸å­—</li>
                                </ul>
                            </div>
                        </div>

                        <div class="auth-form-group">
                            <label class="auth-form-label">ç¢ºèªå¯†ç¢¼<span class="required">*</span></label>
                            <input
                                type="password"
                                class="auth-form-control"
                                id="regConfirmPassword"
                                placeholder="è«‹å†æ¬¡è¼¸å…¥å¯†ç¢¼"
                                required
                                oninput="checkPasswordMatch()"
                            >
                            <p class="auth-error-message" id="passwordMatchError">å…©æ¬¡è¼¸å…¥çš„å¯†ç¢¼ä¸ä¸€è‡´</p>
                        </div>

                        <div class="auth-btn-group">
                            <button type="button" class="auth-btn-outline" onclick="regPrevStep()">ä¸Šä¸€æ­¥</button>
                            <button type="submit" class="auth-btn-primary" style="margin-top: 0;" id="submitBtn">å®Œæˆè¨»å†Š</button>
                        </div>
                    </form>
                </div>

                <!-- Step 5: è¨»å†ŠæˆåŠŸ -->
                <div class="auth-form-section" id="regStep5">
                    <div class="success-container">
                        <div class="success-icon">âœ“</div>
                        <div class="success-title">è¨»å†ŠæˆåŠŸï¼</div>
                        <div class="success-text">
                            æ‚¨çš„å¸³è™Ÿå·²æˆåŠŸå»ºç«‹<br>
                            è«‹ä½¿ç”¨å…¬å¸ä»£ç¢¼å’Œå¯†ç¢¼ç™»å…¥ç³»çµ±
                        </div>
                        <button class="auth-btn-primary" onclick="backToLogin()">å‰å¾€ç™»å…¥</button>
                    </div>
                </div>

                <div class="auth-link" style="margin-top: 24px;">
                    <a onclick="showLoginPage()">å·²æœ‰å¸³è™Ÿï¼Ÿç«‹å³ç™»å…¥</a>
                </div>
            </div>
        </div>
    </div>

    <div class="container hidden" id="mainApp">
        <!-- å´é‚Šæ¬„ -->
        <aside class="sidebar">
            <div class="logo">
                <h1>éˆå±…</h1>
                <p>ä»£éŠ·ç«¯ç®¡ç†å¾Œå°</p>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a class="nav-link active" data-page="dashboard">
                        <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                        </svg>
                        æ¡ˆå ´ç¸½è¦½
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-page="bookings">
                        <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                        </svg>
                        å ±å‚™å¯©æ ¸ç®¡ç†
                        <span class="pending-badge" id="pending-count">8</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-page="sla-monitor">
                        <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        SLAç›£æ§
                        <span class="pending-badge" id="sla-overdue-count">5</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-page="deal-management">
                        <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        æ”¶è¨‚æˆäº¤ç®¡ç†
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-page="cancelled-after-approved">
                        <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        æ ¸å¯å¾Œå–æ¶ˆå°ˆå€
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-page="qr-verify">
                        <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"></path>
                        </svg>
                        QR ä¾‹å¤–æ ¸é©—
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-page="project-management">
                        <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                        </svg>
                        æ¡ˆå ´ç®¡ç†
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-page="staff-management">
                        <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                        </svg>
                        ä»£éŠ·äººå“¡ç®¡ç†
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-page="audit-log">
                        <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        ç¨½æ ¸æ—¥èªŒ
                    </a>
                </li>
            </ul>
        </aside>

        <!-- ä¸»å…§å®¹ -->
        <main class="main-content">
            <!-- é ‚éƒ¨æ¬„ -->
            <div class="header">
                <div class="header-left">
                    <h2 id="page-title">æ¡ˆå ´ç¸½è¦½</h2>
                    <p id="page-subtitle">æŒæ¡æ‰€æœ‰æ¡ˆå ´èˆ‡å ±å‚™å£“åŠ›</p>
                </div>
                <div style="display: flex; align-items: center; gap: 24px;">
                    <!-- é€šçŸ¥åœ–æ¨™ -->
                    <div class="notification-wrapper">
                        <button class="notification-btn" onclick="toggleNotifications()">
                            <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                            </svg>
                            <span class="notification-badge">5</span>
                        </button>

                        <!-- é€šçŸ¥é¢æ¿ -->
                        <div class="notification-panel" id="notificationPanel">
                            <div class="notification-header">
                                <h3>ä¸»ç®¡é€šçŸ¥ä¸­å¿ƒ</h3>
                                <button class="btn-text" onclick="markAllRead()">å…¨éƒ¨å·²è®€</button>
                            </div>
                            <div class="notification-list">
                                <!-- é«˜å„ªå…ˆç´šè­¦ç¤º -->
                                <div class="notification-item unread" onclick="viewNotification('sla', 'BR202601005')" style="border-left: 3px solid #ef4444;">
                                    <div class="notification-icon" style="background: #ef4444;">
                                        <svg width="16" height="16" fill="white" viewBox="0 0 24 24">
                                            <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                        </svg>
                                    </div>
                                    <div class="notification-content">
                                        <div class="notification-title">ğŸš¨ SLAåš´é‡é€¾æœŸ</div>
                                        <div class="notification-text">å ±å‚™ #BR202601005 å·²é€¾æœŸ3å¤©æœªæ›´æ–°ï¼Œè«‹ç«‹å³è¯ç¹«ä»²ä»‹</div>
                                        <div class="notification-time">å‰›å‰›</div>
                                    </div>
                                </div>

                                <div class="notification-item unread" onclick="viewNotification('reschedule', 'reschedule_pending')">
                                    <div class="notification-icon" style="background: #f59e0b;">
                                        <svg width="16" height="16" fill="white" viewBox="0 0 24 24">
                                            <path d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                        </svg>
                                    </div>
                                    <div class="notification-content">
                                        <div class="notification-title">æ”¹æœŸç”³è«‹å¾…å¯©æ ¸</div>
                                        <div class="notification-text">3 ç­†æ”¹æœŸç”³è«‹å¾…å¯©æ ¸ï¼Œè«‹ç›¡å¿«è™•ç†</div>
                                        <div class="notification-time">10åˆ†é˜å‰</div>
                                    </div>
                                </div>

                                <div class="notification-item unread" onclick="viewNotification('pending', 'bookings')">
                                    <div class="notification-icon" style="background: #f59e0b;">
                                        <svg width="16" height="16" fill="white" viewBox="0 0 24 24">
                                            <path d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                                        </svg>
                                    </div>
                                    <div class="notification-content">
                                        <div class="notification-title">å¾…å¯©æ ¸å ±å‚™</div>
                                        <div class="notification-text">æ‚¨æœ‰ 8 ç­†å ±å‚™å¾…å¯©æ ¸ï¼Œè«‹ç›¡å¿«è™•ç†</div>
                                        <div class="notification-time">30åˆ†é˜å‰</div>
                                    </div>
                                </div>

                                <div class="notification-item unread" onclick="viewNotification('settlement', 'deal-management')">
                                    <div class="notification-icon" style="background: #10b981;">
                                        <svg width="16" height="16" fill="white" viewBox="0 0 24 24">
                                            <path d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"/>
                                        </svg>
                                    </div>
                                    <div class="notification-content">
                                        <div class="notification-title">ä½£é‡‘å¾…çµç®—</div>
                                        <div class="notification-text">2 ç­†æˆäº¤æ¡ˆä»¶å¾…æ ¸å¯çµç®—ï¼Œç¸½é‡‘é¡ NT$ 540,000</div>
                                        <div class="notification-time">1å°æ™‚å‰</div>
                                    </div>
                                </div>

                                <div class="notification-item unread" onclick="viewNotification('deal', 'deal-management')">
                                    <div class="notification-icon" style="background: #10b981;">
                                        <svg width="16" height="16" fill="white" viewBox="0 0 24 24">
                                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                        </svg>
                                    </div>
                                    <div class="notification-content">
                                        <div class="notification-title">æ–°æ”¶è¨‚æ¡ˆä»¶</div>
                                        <div class="notification-text">å ±å‚™ #BR202601020 å·²æ”¶è¨‚ï¼Œè«‹ç¢ºèªæˆäº¤</div>
                                        <div class="notification-time">1å°æ™‚å‰</div>
                                    </div>
                                </div>

                                <div class="notification-item unread" onclick="viewNotification('cancel', 'cancelled-after-approved')">
                                    <div class="notification-icon" style="background: #ef4444;">
                                        <svg width="16" height="16" fill="white" viewBox="0 0 24 24">
                                            <path d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                        </svg>
                                    </div>
                                    <div class="notification-content">
                                        <div class="notification-title">æ ¸å¯å¾Œå–æ¶ˆ</div>
                                        <div class="notification-text">å ±å‚™ #BR202601015 æ ¸å¯å¾Œè¢«å–æ¶ˆï¼Œè«‹é—œæ³¨å–æ¶ˆåŸå› </div>
                                        <div class="notification-time">2å°æ™‚å‰</div>
                                    </div>
                                </div>

                                <div class="notification-item unread" onclick="viewNotification('viewing', 'dashboard')">
                                    <div class="notification-icon" style="background: #7c3aed;">
                                        <svg width="16" height="16" fill="white" viewBox="0 0 24 24">
                                            <path d="M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                                        </svg>
                                    </div>
                                    <div class="notification-content">
                                        <div class="notification-title">ä»Šæ—¥å¸¶çœ‹æé†’</div>
                                        <div class="notification-text">ä»Šæ—¥å®‰æ’ 6 å ´å¸¶çœ‹ï¼Œè«‹æ³¨æ„æ™‚é–“</div>
                                        <div class="notification-time">3å°æ™‚å‰</div>
                                    </div>
                                </div>

                                <div class="notification-item" onclick="viewNotification('qr', 'qr-verify')">
                                    <div class="notification-icon" style="background: #0ea5e9;">
                                        <svg width="16" height="16" fill="white" viewBox="0 0 24 24">
                                            <path d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"/>
                                        </svg>
                                    </div>
                                    <div class="notification-content">
                                        <div class="notification-title">ä¾‹å¤–æ ¸é©—è¨˜éŒ„</div>
                                        <div class="notification-text">æ—å°ˆå“¡ä½¿ç”¨çŸ­ç¢¼å®Œæˆ #BR202601024 æ ¸é©—</div>
                                        <div class="notification-time">æ˜¨å¤©</div>
                                    </div>
                                </div>

                                <div class="notification-item unread" onclick="viewNotification(5)">
                                    <div class="notification-icon" style="background: #0ea5e9;">
                                        <svg width="16" height="16" fill="white" viewBox="0 0 24 24">
                                            <path d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                        </svg>
                                    </div>
                                    <div class="notification-content">
                                        <div class="notification-title">ç³»çµ±é€šçŸ¥</div>
                                        <div class="notification-text">æ¡ˆå ´ã€Œä¿¡ç¾©ä¹‹æ˜Ÿã€æ–°å¢ 3 ç­†å ±å‚™</div>
                                        <div class="notification-time">3å°æ™‚å‰</div>
                                    </div>
                                </div>

                                <div class="notification-item" onclick="viewNotification(6)">
                                    <div class="notification-icon" style="background: #64748b;">
                                        <svg width="16" height="16" fill="white" viewBox="0 0 24 24">
                                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                        </svg>
                                    </div>
                                    <div class="notification-content">
                                        <div class="notification-title">å¯©æ ¸å®Œæˆ</div>
                                        <div class="notification-text">æ‚¨å·²å®Œæˆ 5 ç­†å ±å‚™å¯©æ ¸</div>
                                        <div class="notification-time">æ˜¨å¤©</div>
                                    </div>
                                </div>
                            </div>
                            <div class="notification-footer">
                                <a href="#" onclick="viewAllNotifications()">æŸ¥çœ‹å…¨éƒ¨é€šçŸ¥</a>
                            </div>
                        </div>
                    </div>

                    <div class="user-info">
                        <div class="user-avatar">å¼µ</div>
                        <div class="user-details">
                            <div class="user-name">å¼µä¸»ç®¡</div>
                            <div class="user-role">ä»£éŠ·ä¸»ç®¡</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- é é¢1: æ¡ˆå ´ç¸½è¦½ -->
            <div id="dashboard" class="page-content active">
                <!-- æ•´é«”çµ±è¨ˆ -->
                <div class="stats-grid">
                    <div class="stat-card" style="border-left-color: #7c3aed;">
                        <div class="stat-label">ç®¡ç†æ¡ˆå ´æ•¸</div>
                        <div class="stat-value">5</div>
                        <div class="stat-change">ç›®å‰é€²è¡Œä¸­</div>
                    </div>
                    <div class="stat-card" style="border-left-color: #f59e0b;">
                        <div class="stat-label">å¾…æ ¸å¯å ±å‚™</div>
                        <div class="stat-value">8</div>
                        <div class="stat-change" style="color: var(--warning-color);">éœ€ç«‹å³è™•ç†</div>
                    </div>
                    <div class="stat-card" style="border-left-color: #06b6d4;">
                        <div class="stat-label">ä»Šæ—¥å¸¶çœ‹</div>
                        <div class="stat-value">6</div>
                        <div class="stat-change">æœ¬é€±å…± 23 å ´</div>
                    </div>
                </div>

                <!-- æ¡ˆå ´åˆ—è¡¨ -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">æ¡ˆå ´åˆ—è¡¨</h3>
                    </div>
                    <div class="project-grid">
                        <!-- æ¡ˆå ´å¡ç‰‡1 -->
                        <div class="project-card" onclick="viewProjectDetail('ä¿¡ç¾©ä¹‹æ˜Ÿ')">
                            <div class="project-card-header">
                                <h4 class="project-name">ä¿¡ç¾©ä¹‹æ˜Ÿ</h4>
                                <span class="badge badge-success">é€²è¡Œä¸­</span>
                            </div>
                            <p style="color: var(--text-secondary); font-size: 14px; margin-bottom: 12px;">ä¿¡ç¾©å€å¿ å­æ±è·¯äº”æ®µ</p>
                            <div class="project-stats">
                                <div class="project-stat-item">
                                    <div class="project-stat-label">å¾…æ ¸å¯</div>
                                    <div class="project-stat-value" style="color: var(--warning-color);">3</div>
                                </div>
                                <div class="project-stat-item">
                                    <div class="project-stat-label">ä»Šæ—¥å¸¶çœ‹</div>
                                    <div class="project-stat-value">2</div>
                                </div>
                                <div class="project-stat-item">
                                    <div class="project-stat-label">æœ¬é€±æˆäº¤</div>
                                    <div class="project-stat-value" style="color: var(--success-color);">1</div>
                                </div>
                            </div>
                        </div>

                        <!-- æ¡ˆå ´å¡ç‰‡2 -->
                        <div class="project-card" onclick="viewProjectDetail('æ¾å±±æ–°åŸ')">
                            <div class="project-card-header">
                                <h4 class="project-name">æ¾å±±æ–°åŸ</h4>
                                <span class="badge badge-success">é€²è¡Œä¸­</span>
                            </div>
                            <p style="color: var(--text-secondary); font-size: 14px; margin-bottom: 12px;">æ¾å±±å€å—äº¬æ±è·¯å››æ®µ</p>
                            <div class="project-stats">
                                <div class="project-stat-item">
                                    <div class="project-stat-label">å¾…æ ¸å¯</div>
                                    <div class="project-stat-value" style="color: var(--warning-color);">2</div>
                                </div>
                                <div class="project-stat-item">
                                    <div class="project-stat-label">ä»Šæ—¥å¸¶çœ‹</div>
                                    <div class="project-stat-value">1</div>
                                </div>
                                <div class="project-stat-item">
                                    <div class="project-stat-label">æœ¬é€±æˆäº¤</div>
                                    <div class="project-stat-value" style="color: var(--success-color);">2</div>
                                </div>
                            </div>
                        </div>

                        <!-- æ¡ˆå ´å¡ç‰‡3 -->
                        <div class="project-card" onclick="viewProjectDetail('å¤§å®‰è¯å»ˆ')">
                            <div class="project-card-header">
                                <h4 class="project-name">å¤§å®‰è¯å»ˆ</h4>
                                <span class="badge badge-success">é€²è¡Œä¸­</span>
                            </div>
                            <p style="color: var(--text-secondary); font-size: 14px; margin-bottom: 12px;">å¤§å®‰å€å¾©èˆˆå—è·¯ä¸€æ®µ</p>
                            <div class="project-stats">
                                <div class="project-stat-item">
                                    <div class="project-stat-label">å¾…æ ¸å¯</div>
                                    <div class="project-stat-value" style="color: var(--warning-color);">1</div>
                                </div>
                                <div class="project-stat-item">
                                    <div class="project-stat-label">ä»Šæ—¥å¸¶çœ‹</div>
                                    <div class="project-stat-value">2</div>
                                </div>
                                <div class="project-stat-item">
                                    <div class="project-stat-label">æœ¬é€±æˆäº¤</div>
                                    <div class="project-stat-value" style="color: var(--success-color);">1</div>
                                </div>
                            </div>
                        </div>

                        <!-- æ¡ˆå ´å¡ç‰‡4 -->
                        <div class="project-card" onclick="viewProjectDetail('å…§æ¹–ç§‘æŠ€åœ’å€')">
                            <div class="project-card-header">
                                <h4 class="project-name">å…§æ¹–ç§‘æŠ€åœ’å€</h4>
                                <span class="badge badge-success">é€²è¡Œä¸­</span>
                            </div>
                            <p style="color: var(--text-secondary); font-size: 14px; margin-bottom: 12px;">å…§æ¹–å€ç‘å…‰è·¯</p>
                            <div class="project-stats">
                                <div class="project-stat-item">
                                    <div class="project-stat-label">å¾…æ ¸å¯</div>
                                    <div class="project-stat-value" style="color: var(--warning-color);">2</div>
                                </div>
                                <div class="project-stat-item">
                                    <div class="project-stat-label">ä»Šæ—¥å¸¶çœ‹</div>
                                    <div class="project-stat-value">1</div>
                                </div>
                                <div class="project-stat-item">
                                    <div class="project-stat-label">æœ¬é€±æˆäº¤</div>
                                    <div class="project-stat-value" style="color: var(--success-color);">0</div>
                                </div>
                            </div>
                        </div>

                        <!-- æ¡ˆå ´å¡ç‰‡5 -->
                        <div class="project-card" onclick="viewProjectDetail('å—æ¸¯ç¶“è²¿')">
                            <div class="project-card-header">
                                <h4 class="project-name">å—æ¸¯ç¶“è²¿</h4>
                                <span class="badge badge-secondary">ç±Œå‚™ä¸­</span>
                            </div>
                            <p style="color: var(--text-secondary); font-size: 14px; margin-bottom: 12px;">å—æ¸¯å€ç¶“è²¿äºŒè·¯</p>
                            <div class="project-stats">
                                <div class="project-stat-item">
                                    <div class="project-stat-label">å¾…æ ¸å¯</div>
                                    <div class="project-stat-value">0</div>
                                </div>
                                <div class="project-stat-item">
                                    <div class="project-stat-label">ä»Šæ—¥å¸¶çœ‹</div>
                                    <div class="project-stat-value">0</div>
                                </div>
                                <div class="project-stat-item">
                                    <div class="project-stat-label">æœ¬é€±æˆäº¤</div>
                                    <div class="project-stat-value">0</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- é é¢2: å ±å‚™å¯©æ ¸ç®¡ç† -->
            <div id="bookings" class="page-content">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">å ±å‚™å¯©æ ¸ç®¡ç†</h3>
                    </div>

                    <!-- æé†’ -->
                    <div class="alert alert-warning">
                        <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                        </svg>
                        <span>æ‚¨æœ‰ <strong>8 ç­†</strong>å ±å‚™å¾…è™•ç†ï¼Œè«‹ç›¡å¿«å¯©æ ¸</span>
                    </div>

                    <!-- ç‹€æ…‹åˆ†é  -->
                    <div class="tabs">
                        <button class="tab active" data-tab="pending">å¾…å¯©æ ¸ (8)</button>
                        <button class="tab" data-tab="reschedule_pending">æ”¹æœŸå¾…å¯©æ ¸ (3)</button>
                        <button class="tab" data-tab="approved">å·²æ ¸å¯ (24)</button>
                        <button class="tab" data-tab="rejected">å·²æ‹’çµ• (5)</button>
                        <button class="tab" data-tab="all">å…¨éƒ¨ (37)</button>
                    </div>

                    <!-- æœå°‹æ¬„ -->
                    <div class="search-bar">
                        <select class="form-control" style="width: auto;">
                            <option value="">å…¨éƒ¨æ¡ˆå ´</option>
                            <option value="project1">ä¿¡ç¾©ä¹‹æ˜Ÿ</option>
                            <option value="project2">æ¾å±±æ–°åŸ</option>
                            <option value="project3">å¤§å®‰è¯å»ˆ</option>
                            <option value="project4">å…§æ¹–ç§‘æŠ€åœ’å€</option>
                        </select>
                        <input type="text" class="search-input" placeholder="æœå°‹å ±å‚™ç·¨è™Ÿã€è²·æ–¹å§“å...">
                        <button class="btn btn-primary">æœå°‹</button>
                    </div>

                    <!-- å ±å‚™åˆ—è¡¨ -->
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>å ±å‚™ç·¨è™Ÿ</th>
                                    <th>æ¡ˆå ´åç¨±</th>
                                    <th>è²·æ–¹å§“å</th>
                                    <th>è²·æ–¹é›»è©±</th>
                                    <th>ä»²ä»‹æ¥­å‹™</th>
                                    <th>ä»²ä»‹é–€åº—</th>
                                    <th>å ±å‚™æ™‚é–“</th>
                                    <th>ç‹€æ…‹</th>
                                    <th>æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>#BR202601001</td>
                                    <td>ä¿¡ç¾©ä¹‹æ˜Ÿ</td>
                                    <td class="masked-text">ç‹**</td>
                                    <td class="masked-text">0912-***-678</td>
                                    <td>æå°è¯</td>
                                    <td>ä¿¡ç¾©é–€åº—</td>
                                    <td>2026/01/18 09:30</td>
                                    <td><span class="badge badge-warning">å¾…å¯©æ ¸</span></td>
                                    <td>
                                        <button class="btn btn-success btn-sm" onclick="approveBooking('BR202601001')">æ ¸å¯</button>
                                        <button class="btn btn-danger btn-sm" onclick="rejectBooking('BR202601001')">æ‹’çµ•</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>#BR202601002</td>
                                    <td>æ¾å±±æ–°åŸ</td>
                                    <td class="masked-text">é™³**</td>
                                    <td class="masked-text">0923-***-234</td>
                                    <td>é™³å»ºåœ‹</td>
                                    <td>ä¿¡ç¾©é–€åº—</td>
                                    <td>2026/01/18 10:15</td>
                                    <td><span class="badge badge-warning">å¾…å¯©æ ¸</span></td>
                                    <td>
                                        <button class="btn btn-success btn-sm" onclick="approveBooking('BR202601002')">æ ¸å¯</button>
                                        <button class="btn btn-danger btn-sm" onclick="rejectBooking('BR202601002')">æ‹’çµ•</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>#BR202601003</td>
                                    <td>å¤§å®‰è¯å»ˆ</td>
                                    <td class="masked-text">æ—**</td>
                                    <td class="masked-text">0934-***-789</td>
                                    <td>å¼µç¾ç²</td>
                                    <td>ä¿¡ç¾©é–€åº—</td>
                                    <td>2026/01/18 11:20</td>
                                    <td><span class="badge badge-warning">å¾…å¯©æ ¸</span></td>
                                    <td>
                                        <button class="btn btn-success btn-sm" onclick="approveBooking('BR202601003')">æ ¸å¯</button>
                                        <button class="btn btn-danger btn-sm" onclick="rejectBooking('BR202601003')">æ‹’çµ•</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>#BR202601004</td>
                                    <td>ä¿¡ç¾©ä¹‹æ˜Ÿ</td>
                                    <td class="masked-text">é»ƒ**</td>
                                    <td class="masked-text">0956-***-456</td>
                                    <td>åŠ‰å¿—æ˜</td>
                                    <td>ä¿¡ç¾©é–€åº—</td>
                                    <td>2026/01/18 13:45</td>
                                    <td><span class="badge badge-warning">å¾…å¯©æ ¸</span></td>
                                    <td>
                                        <button class="btn btn-success btn-sm" onclick="approveBooking('BR202601004')">æ ¸å¯</button>
                                        <button class="btn btn-danger btn-sm" onclick="rejectBooking('BR202601004')">æ‹’çµ•</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>#BR202601005</td>
                                    <td>å…§æ¹–ç§‘æŠ€åœ’å€</td>
                                    <td class="masked-text">å³**</td>
                                    <td class="masked-text">0987-***-321</td>
                                    <td>æå°è¯</td>
                                    <td>ä¿¡ç¾©é–€åº—</td>
                                    <td>2026/01/18 14:20</td>
                                    <td><span class="badge badge-warning">å¾…å¯©æ ¸</span></td>
                                    <td>
                                        <button class="btn btn-success btn-sm" onclick="approveBooking('BR202601005')">æ ¸å¯</button>
                                        <button class="btn btn-danger btn-sm" onclick="rejectBooking('BR202601005')">æ‹’çµ•</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- é é¢3: QR Code æ ¸é©— -->
            <div id="qr-verify" class="page-content">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">QR Code å¸¶çœ‹æ ¸é©—</h3>
                    </div>

                    <div class="alert alert-info">
                        <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <span>è«‹æƒææ¥­å‹™å‡ºç¤ºçš„å¸¶çœ‹ QR Code ä»¥å®Œæˆå¸¶çœ‹æ ¸é©—</span>
                    </div>

                    <!-- QR æƒæå€ -->
                    <div class="qr-scanner">
                        <div class="qr-scanner-icon">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"></path>
                            </svg>
                        </div>
                        <p class="qr-scanner-text">é»æ“Šä¸‹æ–¹æŒ‰éˆ•å•Ÿå‹•ç›¸æ©Ÿæƒæ</p>
                        <button class="btn btn-primary" onclick="startQRScan()">
                            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg>
                            å•Ÿå‹•æƒæ
                        </button>
                    </div>

                    <!-- ä¾‹å¤–æ ¸é©— -->
                    <div class="card" style="background: var(--bg-color); box-shadow: none;">
                        <div class="card-header">
                            <h4 class="card-title">ä¾‹å¤–æ ¸é©—ï¼ˆä¸»ç®¡æ¬Šé™ï¼‰</h4>
                        </div>
                        <p style="color: var(--text-secondary); margin-bottom: 16px; font-size: 14px;">
                            è‹¥ QR Code ç„¡æ³•æƒæï¼Œå¯ä½¿ç”¨çŸ­ç¢¼é€²è¡Œæ‰‹å‹•æ ¸é©—
                        </p>
                        <div style="display: flex; gap: 12px;">
                            <input type="text" class="form-control" placeholder="è«‹è¼¸å…¥ 6 ä½æ•¸æ ¸é©—ç¢¼" id="verify-code" maxlength="6">
                            <button class="btn btn-primary" onclick="verifyByCode()">æ ¸é©—</button>
                        </div>
                    </div>
                </div>

                <!-- ä»Šæ—¥å¸¶çœ‹è¨˜éŒ„ -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ä»Šæ—¥å¸¶çœ‹è¨˜éŒ„</h3>
                        <span class="badge badge-info">å…± 6 å ´</span>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>å ±å‚™ç·¨è™Ÿ</th>
                                    <th>æ¡ˆå ´åç¨±</th>
                                    <th>ä»²ä»‹æ¥­å‹™</th>
                                    <th>é ç´„æ™‚é–“</th>
                                    <th>æ ¸é©—æ™‚é–“</th>
                                    <th>ç‹€æ…‹</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>#BR202601010</td>
                                    <td>ä¿¡ç¾©ä¹‹æ˜Ÿ</td>
                                    <td>æå°è¯</td>
                                    <td>2026/01/18 10:00</td>
                                    <td>2026/01/18 10:05</td>
                                    <td><span class="badge badge-success">å·²å®Œæˆ</span></td>
                                </tr>
                                <tr>
                                    <td>#BR202601011</td>
                                    <td>æ¾å±±æ–°åŸ</td>
                                    <td>é™³å»ºåœ‹</td>
                                    <td>2026/01/18 14:00</td>
                                    <td>2026/01/18 14:03</td>
                                    <td><span class="badge badge-success">å·²å®Œæˆ</span></td>
                                </tr>
                                <tr>
                                    <td>#BR202601012</td>
                                    <td>å¤§å®‰è¯å»ˆ</td>
                                    <td>å¼µç¾ç²</td>
                                    <td>2026/01/18 15:30</td>
                                    <td>-</td>
                                    <td><span class="badge badge-warning">å¾…å¸¶çœ‹</span></td>
                                </tr>
                                <tr>
                                    <td>#BR202601013</td>
                                    <td>ä¿¡ç¾©ä¹‹æ˜Ÿ</td>
                                    <td>åŠ‰å¿—æ˜</td>
                                    <td>2026/01/18 16:00</td>
                                    <td>-</td>
                                    <td><span class="badge badge-warning">å¾…å¸¶çœ‹</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- é é¢4: æ“ä½œæ—¥èªŒ -->
            <div id="logs" class="page-content">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">æ“ä½œæ—¥èªŒ</h3>
                    </div>

                    <div class="alert alert-info">
                        <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                        </svg>
                        <span>æ‰€æœ‰æ“ä½œè¨˜éŒ„çš†ä¸å¯åˆªæ”¹ï¼Œç¢ºä¿æµç¨‹é€æ˜å¯è¿½æº¯</span>
                    </div>

                    <!-- ç¯©é¸å™¨ -->
                    <div class="search-bar">
                        <select class="form-control" style="width: auto;">
                            <option value="">å…¨éƒ¨æ“ä½œé¡å‹</option>
                            <option value="approve">æ ¸å¯å ±å‚™</option>
                            <option value="reject">æ‹’çµ•å ±å‚™</option>
                            <option value="verify">å¸¶çœ‹æ ¸é©—</option>
                            <option value="cancel">å–æ¶ˆå ±å‚™</option>
                        </select>
                        <select class="form-control" style="width: auto;">
                            <option value="">å…¨éƒ¨æ¡ˆå ´</option>
                            <option value="project1">ä¿¡ç¾©ä¹‹æ˜Ÿ</option>
                            <option value="project2">æ¾å±±æ–°åŸ</option>
                            <option value="project3">å¤§å®‰è¯å»ˆ</option>
                        </select>
                        <input type="date" class="form-control" style="width: auto;" value="2026-01-18">
                        <button class="btn btn-primary">æŸ¥è©¢</button>
                    </div>

                    <!-- æ—¥èªŒåˆ—è¡¨ -->
                    <div style="margin-top: 24px;">
                        <div class="log-item" style="border-left-color: #10b981;">
                            <div class="log-header">
                                <div class="log-action">
                                    <span class="badge badge-success" style="margin-right: 8px;">æ ¸å¯å ±å‚™</span>
                                    å ±å‚™ç·¨è™Ÿï¼š#BR202601008
                                </div>
                                <div class="log-time">2026/01/18 15:30:22</div>
                            </div>
                            <div class="log-details">
                                <span class="log-user">
                                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                    </svg>
                                    å¼µä¸»ç®¡
                                </span>
                                <span>æ¡ˆå ´ï¼šä¿¡ç¾©ä¹‹æ˜Ÿ</span>
                                <span style="margin-left: 12px;">æ ¸å¯å¸¶çœ‹æ™‚é–“ï¼š2026/01/19 10:00</span>
                            </div>
                        </div>

                        <div class="log-item" style="border-left-color: #ef4444;">
                            <div class="log-header">
                                <div class="log-action">
                                    <span class="badge badge-danger" style="margin-right: 8px;">æ‹’çµ•å ±å‚™</span>
                                    å ±å‚™ç·¨è™Ÿï¼š#BR202601007
                                </div>
                                <div class="log-time">2026/01/18 14:15:10</div>
                            </div>
                            <div class="log-details">
                                <span class="log-user">
                                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                    </svg>
                                    å¼µä¸»ç®¡
                                </span>
                                <span>æ¡ˆå ´ï¼šæ¾å±±æ–°åŸ</span>
                                <span style="margin-left: 12px;">æ‹’çµ•åŸå› ï¼šè©²æ™‚æ®µå·²æœ‰å…¶ä»–å¸¶çœ‹å®‰æ’</span>
                            </div>
                        </div>

                        <div class="log-item" style="border-left-color: #06b6d4;">
                            <div class="log-header">
                                <div class="log-action">
                                    <span class="badge badge-info" style="margin-right: 8px;">å¸¶çœ‹æ ¸é©—</span>
                                    å ±å‚™ç·¨è™Ÿï¼š#BR202601010
                                </div>
                                <div class="log-time">2026/01/18 10:05:33</div>
                            </div>
                            <div class="log-details">
                                <span class="log-user">
                                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                    </svg>
                                    å¼µä¸»ç®¡
                                </span>
                                <span>æ¡ˆå ´ï¼šä¿¡ç¾©ä¹‹æ˜Ÿ</span>
                                <span style="margin-left: 12px;">æ ¸é©—æ–¹å¼ï¼šQR Code æƒæ</span>
                            </div>
                        </div>

                        <div class="log-item" style="border-left-color: #10b981;">
                            <div class="log-header">
                                <div class="log-action">
                                    <span class="badge badge-success" style="margin-right: 8px;">æ ¸å¯å ±å‚™</span>
                                    å ±å‚™ç·¨è™Ÿï¼š#BR202601006
                                </div>
                                <div class="log-time">2026/01/18 09:45:18</div>
                            </div>
                            <div class="log-details">
                                <span class="log-user">
                                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                    </svg>
                                    å¼µä¸»ç®¡
                                </span>
                                <span>æ¡ˆå ´ï¼šå¤§å®‰è¯å»ˆ</span>
                                <span style="margin-left: 12px;">æ ¸å¯å¸¶çœ‹æ™‚é–“ï¼š2026/01/18 15:30</span>
                            </div>
                        </div>

                        <div class="log-item" style="border-left-color: #f59e0b;">
                            <div class="log-header">
                                <div class="log-action">
                                    <span class="badge badge-warning" style="margin-right: 8px;">å–æ¶ˆå ±å‚™</span>
                                    å ±å‚™ç·¨è™Ÿï¼š#BR202601005
                                </div>
                                <div class="log-time">2026/01/17 16:20:45</div>
                            </div>
                            <div class="log-details">
                                <span class="log-user">
                                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                    </svg>
                                    æå°è¯ï¼ˆä»²ä»‹æ¥­å‹™ï¼‰
                                </span>
                                <span>æ¡ˆå ´ï¼šå…§æ¹–ç§‘æŠ€åœ’å€</span>
                                <span style="margin-left: 12px;">å–æ¶ˆåŸå› ï¼šå®¢æˆ¶è‡¨æ™‚æœ‰äº‹ç„¡æ³•å‰å¾€</span>
                            </div>
                        </div>

                        <div class="log-item" style="border-left-color: #06b6d4;">
                            <div class="log-header">
                                <div class="log-action">
                                    <span class="badge badge-info" style="margin-right: 8px;">å¸¶çœ‹æ ¸é©—</span>
                                    å ±å‚™ç·¨è™Ÿï¼š#BR202601011
                                </div>
                                <div class="log-time">2026/01/17 14:03:11</div>
                            </div>
                            <div class="log-details">
                                <span class="log-user">
                                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                    </svg>
                                    å¼µä¸»ç®¡
                                </span>
                                <span>æ¡ˆå ´ï¼šæ¾å±±æ–°åŸ</span>
                                <span style="margin-left: 12px;">æ ¸é©—æ–¹å¼ï¼šä¾‹å¤–æ ¸é©—ï¼ˆçŸ­ç¢¼ï¼‰</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- é é¢ï¼šSLAç›£æ§ -->
            <div id="sla-monitor" class="page-content">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">SLAé€¾æœŸç›£æ§</h3>
                        <button class="btn btn-primary" onclick="exportSLAReport()">
                            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                            </svg>
                            åŒ¯å‡ºå ±è¡¨
                        </button>
                    </div>

                    <!-- å¾…æ›´æ–°ç½®é ‚å€ -->
                    <div style="background: #fff3cd; border-left: 4px solid #f59e0b; padding: 16px; margin-bottom: 24px; border-radius: 8px;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                            <svg width="24" height="24" fill="#f59e0b" viewBox="0 0 24 24">
                                <path d="M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            <h4 style="font-weight: 600; color: #856404; margin: 0;">âš ï¸ å¾…æ›´æ–°æ¡ˆä»¶ï¼ˆç½®é ‚ï¼‰</h4>
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>å ±å‚™ç·¨è™Ÿ</th>
                                        <th>æ¡ˆå ´</th>
                                        <th>å®¢æˆ¶</th>
                                        <th>ä»²ä»‹</th>
                                        <th>ç‹€æ…‹</th>
                                        <th>é€¾æœŸå¤©æ•¸</th>
                                        <th>æœ€å¾Œæ›´æ–°</th>
                                        <th>æ“ä½œ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr style="background: #fef3c7;">
                                        <td>#BR202601005</td>
                                        <td>ä¿¡ç¾©ä¹‹æ˜Ÿ</td>
                                        <td>ç‹*æ˜</td>
                                        <td>ä¿¡ç¾©é–€åº—-æå°è¯</td>
                                        <td><span class="badge badge-warning">å·²æ ¸å¯å¾…å¸¶çœ‹</span></td>
                                        <td style="color: var(--danger-color); font-weight: 600;">é€¾æœŸ 3 å¤©</td>
                                        <td>2026/01/15 10:30</td>
                                        <td>
                                            <button class="btn btn-primary btn-sm" onclick="contactAgent('BR202601005')">è¯ç¹«ä»²ä»‹</button>
                                        </td>
                                    </tr>
                                    <tr style="background: #fef3c7;">
                                        <td>#BR202601003</td>
                                        <td>æ¾å±±æ–°åŸ</td>
                                        <td>é™³*èŠ³</td>
                                        <td>æ°¸æ…¶é–€åº—-å¼µå¤§åŒ</td>
                                        <td><span class="badge badge-info">å·²å¸¶çœ‹</span></td>
                                        <td style="color: var(--danger-color); font-weight: 600;">é€¾æœŸ 5 å¤©</td>
                                        <td>2026/01/13 14:20</td>
                                        <td>
                                            <button class="btn btn-primary btn-sm" onclick="contactAgent('BR202601003')">è¯ç¹«ä»²ä»‹</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- ç¯©é¸å™¨ -->
                    <div class="search-bar">
                        <select class="form-control" style="width: auto;">
                            <option value="">å…¨éƒ¨ç‹€æ…‹</option>
                            <option value="approved">å·²æ ¸å¯å¾…å¸¶çœ‹</option>
                            <option value="viewed">å·²å¸¶çœ‹</option>
                            <option value="deposit">æ”¶è¨‚ä¸­</option>
                        </select>
                        <select class="form-control" style="width: auto;">
                            <option value="">å…¨éƒ¨æ¡ˆå ´</option>
                            <option value="project1">ä¿¡ç¾©ä¹‹æ˜Ÿ</option>
                            <option value="project2">æ¾å±±æ–°åŸ</option>
                        </select>
                        <button class="btn btn-primary">æŸ¥è©¢</button>
                    </div>

                    <!-- SLAé€¾æœŸåˆ—è¡¨ -->
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>å ±å‚™ç·¨è™Ÿ</th>
                                    <th>æ¡ˆå ´</th>
                                    <th>å®¢æˆ¶</th>
                                    <th>ä»²ä»‹</th>
                                    <th>ç‹€æ…‹</th>
                                    <th>SLAæœŸé™</th>
                                    <th>é€¾æœŸå¤©æ•¸</th>
                                    <th>æœ€å¾Œæ›´æ–°</th>
                                    <th>æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>#BR202601001</td>
                                    <td>å¤§å®‰è¯å»ˆ</td>
                                    <td>æ—*å‰</td>
                                    <td>ä½å•†é–€åº—-ç‹å°æ˜</td>
                                    <td><span class="badge badge-info">å·²å¸¶çœ‹</span></td>
                                    <td>2026/01/16</td>
                                    <td style="color: var(--danger-color); font-weight: 600;">é€¾æœŸ 2 å¤©</td>
                                    <td>2026/01/14 15:30</td>
                                    <td>
                                        <button class="btn btn-outline btn-sm" onclick="viewBookingDetail('BR202601001')">æŸ¥çœ‹</button>
                                        <button class="btn btn-primary btn-sm" onclick="contactAgent('BR202601001')">è¯ç¹«</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- é é¢ï¼šæ”¶è¨‚æˆäº¤ç®¡ç† -->
            <div id="deal-management" class="page-content">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">æ”¶è¨‚æˆäº¤ç®¡ç†</h3>
                    </div>

                    <!-- æ¨™ç±¤é  -->
                    <div class="tabs">
                        <button class="tab active" onclick="switchDealTab('deposit')">æ”¶è¨‚ä¸­ (5)</button>
                        <button class="tab" onclick="switchDealTab('closed')">å·²æˆäº¤ (12)</button>
                        <button class="tab" onclick="switchDealTab('voided')">å·²ä½œå»¢ (3)</button>
                        <button class="tab" onclick="switchDealTab('settlement')">å¾…çµç®— (2)</button>
                    </div>

                    <!-- æ”¶è¨‚ä¸­ -->
                    <div id="deal-deposit" class="tab-content active">
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>å ±å‚™ç·¨è™Ÿ</th>
                                        <th>æ¡ˆå ´</th>
                                        <th>å®¢æˆ¶</th>
                                        <th>ä»²ä»‹</th>
                                        <th>æ”¶è¨‚é‡‘é¡</th>
                                        <th>æ”¶è¨‚æ™‚é–“</th>
                                        <th>æ“ä½œ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>#BR202601020</td>
                                        <td>ä¿¡ç¾©ä¹‹æ˜Ÿ</td>
                                        <td>æ*è¯</td>
                                        <td>ä¿¡ç¾©é–€åº—-é™³ç¾éº—</td>
                                        <td style="color: var(--primary-color); font-weight: 600;">NT$ 500,000</td>
                                        <td>2026/01/17 10:30</td>
                                        <td>
                                            <button class="btn btn-success btn-sm" onclick="confirmDeal('BR202601020')">ç¢ºèªæˆäº¤</button>
                                            <button class="btn btn-danger btn-sm" onclick="voidDeposit('BR202601020')">ä½œå»¢</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- å·²æˆäº¤ -->
                    <div id="deal-closed" class="tab-content">
                        <div class="search-bar">
                            <input type="month" class="form-control" style="width: auto;" value="2026-01">
                            <button class="btn btn-primary">æŸ¥è©¢</button>
                            <button class="btn btn-outline" onclick="exportDeals()">åŒ¯å‡ºæˆäº¤å ±è¡¨</button>
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>å ±å‚™ç·¨è™Ÿ</th>
                                        <th>æ¡ˆå ´</th>
                                        <th>å®¢æˆ¶</th>
                                        <th>ä»²ä»‹</th>
                                        <th>æˆäº¤é‡‘é¡</th>
                                        <th>ä»²ä»‹ä½£é‡‘</th>
                                        <th>æˆäº¤æ™‚é–“</th>
                                        <th>æ“ä½œ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>#BR202601018</td>
                                        <td>ä¿¡ç¾©ä¹‹æ˜Ÿ</td>
                                        <td>å¼µ*æ˜</td>
                                        <td>ä¿¡ç¾©é–€åº—-æå°è¯</td>
                                        <td style="font-weight: 600;">NT$ 18,000,000</td>
                                        <td style="color: var(--success-color); font-weight: 600;">NT$ 360,000</td>
                                        <td>2026/01/16 15:20</td>
                                        <td>
                                            <button class="btn btn-outline btn-sm" onclick="viewDealDetail('BR202601018')">æŸ¥çœ‹</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- å·²ä½œå»¢ -->
                    <div id="deal-voided" class="tab-content">
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>å ±å‚™ç·¨è™Ÿ</th>
                                        <th>æ¡ˆå ´</th>
                                        <th>å®¢æˆ¶</th>
                                        <th>ä»²ä»‹</th>
                                        <th>ä½œå»¢åŸå› </th>
                                        <th>ä½œå»¢æ™‚é–“</th>
                                        <th>æ“ä½œ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>#BR202601012</td>
                                        <td>æ¾å±±æ–°åŸ</td>
                                        <td>ç‹*èŠ³</td>
                                        <td>æ°¸æ…¶é–€åº—-å¼µå¤§åŒ</td>
                                        <td>å®¢æˆ¶é•ç´„</td>
                                        <td>2026/01/15 11:20</td>
                                        <td>
                                            <button class="btn btn-outline btn-sm" onclick="viewVoidDetail('BR202601012')">æŸ¥çœ‹è©³æƒ…</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- å¾…çµç®— -->
                    <div id="deal-settlement" class="tab-content">
                        <div style="background: #dbeafe; padding: 16px; border-left: 4px solid var(--primary-color); margin-bottom: 16px; border-radius: 8px;">
                            <div style="font-weight: 600; color: #1e40af; margin-bottom: 4px;">ğŸ’° çµç®—èªªæ˜</div>
                            <div style="font-size: 14px; color: #1e40af;">æˆäº¤æ¡ˆä»¶éœ€ç¶“ä¸»ç®¡ç¢ºèªå¾Œæ‰èƒ½é€²è¡Œä½£é‡‘çµç®—</div>
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>å ±å‚™ç·¨è™Ÿ</th>
                                        <th>æ¡ˆå ´</th>
                                        <th>ä»²ä»‹</th>
                                        <th>æˆäº¤é‡‘é¡</th>
                                        <th>æ‡‰ä»˜ä½£é‡‘</th>
                                        <th>æˆäº¤æ™‚é–“</th>
                                        <th>æ“ä½œ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>#BR202601018</td>
                                        <td>ä¿¡ç¾©ä¹‹æ˜Ÿ</td>
                                        <td>ä¿¡ç¾©é–€åº—-æå°è¯</td>
                                        <td>NT$ 18,000,000</td>
                                        <td style="color: var(--success-color); font-weight: 600;">NT$ 360,000</td>
                                        <td>2026/01/16 15:20</td>
                                        <td>
                                            <button class="btn btn-success btn-sm" onclick="approveSettlement('BR202601018')">æ ¸å¯çµç®—</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- é é¢ï¼šæ ¸å¯å¾Œå–æ¶ˆå°ˆå€ -->
            <div id="cancelled-after-approved" class="page-content">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">æ ¸å¯å¾Œå–æ¶ˆå°ˆå€</h3>
                        <button class="btn btn-outline" onclick="exportCancelReport()">
                            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                            </svg>
                            åŒ¯å‡ºå–æ¶ˆåˆ†æ
                        </button>
                    </div>

                    <!-- çµ±è¨ˆå¡ç‰‡ -->
                    <div class="stats-grid" style="grid-template-columns: repeat(4, 1fr); margin-bottom: 24px;">
                        <div class="stat-card" style="border-left-color: #ef4444;">
                            <div class="stat-label">æœ¬æœˆæ ¸å¯å¾Œå–æ¶ˆ</div>
                            <div class="stat-value">12</div>
                            <div class="stat-change" style="color: #ef4444;">è¼ƒä¸Šæœˆ +3</div>
                        </div>
                        <div class="stat-card" style="border-left-color: #f59e0b;">
                            <div class="stat-label">å–æ¶ˆç‡</div>
                            <div class="stat-value">8.5%</div>
                            <div class="stat-change" style="color: #f59e0b;">ç›®æ¨™ <5%</div>
                        </div>
                        <div class="stat-card" style="border-left-color: #7c3aed;">
                            <div class="stat-label">ä¸»è¦åŸå› </div>
                            <div class="stat-value" style="font-size: 16px;">å®¢æˆ¶æ”¹è®Šä¸»æ„</div>
                            <div class="stat-change">ä½” 45%</div>
                        </div>
                        <div class="stat-card" style="border-left-color: #06b6d4;">
                            <div class="stat-label">é«˜é¢¨éšªä»²ä»‹</div>
                            <div class="stat-value">2</div>
                            <div class="stat-change">å–æ¶ˆç‡ >15%</div>
                        </div>
                    </div>

                    <!-- ç¯©é¸å™¨ -->
                    <div class="search-bar">
                        <select class="form-control" style="width: auto;">
                            <option value="">å…¨éƒ¨åŸå› </option>
                            <option value="customer_changed_mind">å®¢æˆ¶æ”¹è®Šä¸»æ„</option>
                            <option value="found_other_property">æ‰¾åˆ°å…¶ä»–ç‰©ä»¶</option>
                            <option value="budget_issue">é ç®—å•é¡Œ</option>
                            <option value="schedule_conflict">æ™‚é–“ç„¡æ³•é…åˆ</option>
                        </select>
                        <input type="month" class="form-control" style="width: auto;" value="2026-01">
                        <button class="btn btn-primary">æŸ¥è©¢</button>
                    </div>

                    <!-- å–æ¶ˆåˆ—è¡¨ -->
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>å ±å‚™ç·¨è™Ÿ</th>
                                    <th>æ¡ˆå ´</th>
                                    <th>å®¢æˆ¶</th>
                                    <th>ä»²ä»‹</th>
                                    <th>æ ¸å¯æ™‚é–“</th>
                                    <th>å–æ¶ˆæ™‚é–“</th>
                                    <th>å–æ¶ˆåŸå› </th>
                                    <th>è©³ç´°èªªæ˜</th>
                                    <th>æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>#BR202601015</td>
                                    <td>ä¿¡ç¾©ä¹‹æ˜Ÿ</td>
                                    <td>åŠ‰*å‰</td>
                                    <td>ä¿¡ç¾©é–€åº—-æå°è¯</td>
                                    <td>2026/01/15 10:30</td>
                                    <td>2026/01/16 14:20</td>
                                    <td><span class="badge badge-danger">å®¢æˆ¶æ”¹è®Šä¸»æ„</span></td>
                                    <td>å®¢æˆ¶æ‰¾åˆ°å…¶ä»–æ›´åˆé©çš„ç‰©ä»¶</td>
                                    <td>
                                        <button class="btn btn-outline btn-sm" onclick="viewCancelDetail('BR202601015')">æŸ¥çœ‹è©³æƒ…</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- é é¢ï¼šæ¡ˆå ´ç®¡ç† -->
            <div id="project-management" class="page-content">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">æ¡ˆå ´ç®¡ç†</h3>
                        <button class="btn btn-primary" onclick="openModal('newProjectModal')">
                            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                            </svg>
                            æ–°å¢æ¡ˆå ´
                        </button>
                    </div>

                    <!-- æ¡ˆå ´åˆ—è¡¨ -->
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>æ¡ˆå ´åç¨±</th>
                                    <th>åœ°å€</th>
                                    <th>ç¸½æˆ¶æ•¸</th>
                                    <th>æœ¬æœˆå ±å‚™</th>
                                    <th>æœ¬æœˆæˆäº¤</th>
                                    <th>ç‹€æ…‹</th>
                                    <th>æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="font-weight: 600;">ä¿¡ç¾©ä¹‹æ˜Ÿ</td>
                                    <td>å°åŒ—å¸‚ä¿¡ç¾©å€å¿ å­æ±è·¯äº”æ®µ</td>
                                    <td>120</td>
                                    <td>28</td>
                                    <td style="color: var(--success-color); font-weight: 600;">5</td>
                                    <td><span class="badge badge-success">éŠ·å”®ä¸­</span></td>
                                    <td>
                                        <button class="btn btn-outline btn-sm" onclick="editProject('ä¿¡ç¾©ä¹‹æ˜Ÿ')">ç·¨è¼¯</button>
                                        <button class="btn btn-outline btn-sm" onclick="viewProjectStats('ä¿¡ç¾©ä¹‹æ˜Ÿ')">çµ±è¨ˆ</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="font-weight: 600;">æ¾å±±æ–°åŸ</td>
                                    <td>å°åŒ—å¸‚æ¾å±±å€å—äº¬æ±è·¯å››æ®µ</td>
                                    <td>88</td>
                                    <td>22</td>
                                    <td style="color: var(--success-color); font-weight: 600;">3</td>
                                    <td><span class="badge badge-success">éŠ·å”®ä¸­</span></td>
                                    <td>
                                        <button class="btn btn-outline btn-sm" onclick="editProject('æ¾å±±æ–°åŸ')">ç·¨è¼¯</button>
                                        <button class="btn btn-outline btn-sm" onclick="viewProjectStats('æ¾å±±æ–°åŸ')">çµ±è¨ˆ</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- é é¢ï¼šä»£éŠ·äººå“¡ç®¡ç† -->
            <div id="staff-management" class="page-content">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ä»£éŠ·äººå“¡ç®¡ç†</h3>
                        <button class="btn btn-primary" onclick="openModal('newStaffModal')">
                            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                            </svg>
                            æ–°å¢äººå“¡
                        </button>
                    </div>

                    <!-- äººå“¡åˆ—è¡¨ -->
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>å§“å</th>
                                    <th>æ‰‹æ©Ÿ</th>
                                    <th>Email</th>
                                    <th>è§’è‰²</th>
                                    <th>è² è²¬æ¡ˆå ´</th>
                                    <th>ç‹€æ…‹</th>
                                    <th>æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>å¼µä¸»ç®¡</td>
                                    <td>0912-***-345</td>
                                    <td>zhang@example.com</td>
                                    <td><span class="badge badge-primary">ä¸»ç®¡</span></td>
                                    <td>å…¨éƒ¨æ¡ˆå ´</td>
                                    <td><span class="badge badge-success">åœ¨è·</span></td>
                                    <td>
                                        <button class="btn btn-outline btn-sm" onclick="editStaff('å¼µä¸»ç®¡')">ç·¨è¼¯</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>æ—å°ˆå“¡</td>
                                    <td>0923-***-456</td>
                                    <td>lin@example.com</td>
                                    <td><span class="badge badge-info">å°ˆå“¡</span></td>
                                    <td>ä¿¡ç¾©ä¹‹æ˜Ÿã€æ¾å±±æ–°åŸ</td>
                                    <td><span class="badge badge-success">åœ¨è·</span></td>
                                    <td>
                                        <button class="btn btn-outline btn-sm" onclick="editStaff('æ—å°ˆå“¡')">ç·¨è¼¯</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- é é¢ï¼šç¨½æ ¸æ—¥èªŒ -->
            <div id="audit-log" class="page-content">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ç¨½æ ¸æ—¥èªŒ</h3>
                        <button class="btn btn-outline" onclick="exportAuditLog()">
                            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                            </svg>
                            åŒ¯å‡ºæ—¥èªŒ
                        </button>
                    </div>

                    <div class="alert alert-info">
                        <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                        </svg>
                        <span>æ‰€æœ‰é—œéµæ“ä½œçš†è¨˜éŒ„æ–¼ç¨½æ ¸æ—¥èªŒï¼Œä¸å¯åˆªæ”¹ï¼Œç¢ºä¿åˆè¦å¯è¿½æº¯</span>
                    </div>

                    <!-- ç¯©é¸å™¨ -->
                    <div class="search-bar">
                        <select class="form-control" style="width: auto;">
                            <option value="">å…¨éƒ¨æ“ä½œé¡å‹</option>
                            <option value="approve">æ ¸å¯å ±å‚™</option>
                            <option value="reject">æ‹’çµ•å ±å‚™</option>
                            <option value="deal">æˆäº¤ç¢ºèª</option>
                            <option value="cancel">å–æ¶ˆä½œå»¢</option>
                            <option value="qr_verify">QRæ ¸é©—</option>
                        </select>
                        <select class="form-control" style="width: auto;">
                            <option value="">å…¨éƒ¨äººå“¡</option>
                            <option value="zhang">å¼µä¸»ç®¡</option>
                            <option value="lin">æ—å°ˆå“¡</option>
                        </select>
                        <input type="date" class="form-control" style="width: auto;" value="2026-01-18">
                        <button class="btn btn-primary">æŸ¥è©¢</button>
                    </div>

                    <!-- ç¨½æ ¸æ—¥èªŒåˆ—è¡¨ -->
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>æ™‚é–“</th>
                                    <th>æ“ä½œäººå“¡</th>
                                    <th>æ“ä½œé¡å‹</th>
                                    <th>ç›®æ¨™å°è±¡</th>
                                    <th>æ“ä½œå…§å®¹</th>
                                    <th>IPä½å€</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>2026/01/18 10:30:45</td>
                                    <td>å¼µä¸»ç®¡</td>
                                    <td><span class="badge badge-success">æ ¸å¯å ±å‚™</span></td>
                                    <td>#BR202601025</td>
                                    <td>æ ¸å¯å ±å‚™ç”³è«‹ï¼ˆä¿¡ç¾©ä¹‹æ˜Ÿï¼‰</td>
                                    <td>118.163.xxx.xxx</td>
                                </tr>
                                <tr>
                                    <td>2026/01/18 10:25:12</td>
                                    <td>æ—å°ˆå“¡</td>
                                    <td><span class="badge badge-info">QRæ ¸é©—</span></td>
                                    <td>#BR202601024</td>
                                    <td>ä¾‹å¤–æ ¸é©—ï¼šçŸ­ç¢¼æ ¸é©—ï¼ˆæ¾å±±æ–°åŸï¼‰</td>
                                    <td>118.163.xxx.xxx</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal: æ ¸å¯å ±å‚™ -->
    <div id="approveModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">æ ¸å¯å ±å‚™</h3>
            </div>
            <div style="background: var(--bg-color); padding: 16px; border-radius: 8px; margin-bottom: 20px;">
                <p style="margin-bottom: 8px; color: var(--text-secondary); font-size: 14px;">å ±å‚™ç·¨è™Ÿï¼š</p>
                <p style="font-weight: 600; margin-bottom: 16px;" id="approve-booking-id"></p>
                <p style="margin-bottom: 8px; color: var(--text-secondary); font-size: 14px;">æ¡ˆå ´ï¼š</p>
                <p style="font-weight: 600;" id="approve-project-name"></p>
            </div>
            <form id="approveForm">
                <div class="form-group">
                    <label class="form-label">å¯¦éš›å¸¶çœ‹æ—¥æœŸ <span style="color: red;">*</span></label>
                    <input type="date" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">å¯¦éš›å¸¶çœ‹æ™‚é–“ <span style="color: red;">*</span></label>
                    <input type="time" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">å‚™è¨»</label>
                    <textarea class="form-control" rows="3" placeholder="é¸å¡«"></textarea>
                </div>
            </form>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('approveModal')">å–æ¶ˆ</button>
                <button class="btn btn-success" onclick="submitApprove()">ç¢ºèªæ ¸å¯</button>
            </div>
        </div>
    </div>

    <!-- Modal: æ‹’çµ•å ±å‚™ -->
    <div id="rejectModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">æ‹’çµ•å ±å‚™</h3>
            </div>
            <div style="background: var(--bg-color); padding: 16px; border-radius: 8px; margin-bottom: 20px;">
                <p style="margin-bottom: 8px; color: var(--text-secondary); font-size: 14px;">å ±å‚™ç·¨è™Ÿï¼š</p>
                <p style="font-weight: 600; margin-bottom: 16px;" id="reject-booking-id"></p>
                <p style="margin-bottom: 8px; color: var(--text-secondary); font-size: 14px;">æ¡ˆå ´ï¼š</p>
                <p style="font-weight: 600;" id="reject-project-name"></p>
            </div>
            <form id="rejectForm">
                <div class="form-group">
                    <label class="form-label">æ‹’çµ•åŸå›  <span style="color: red;">*</span></label>
                    <select class="form-control" required>
                        <option value="">è«‹é¸æ“‡æ‹’çµ•åŸå› </option>
                        <option value="duplicate">é‡è¤‡å ±å‚™</option>
                        <option value="schedule">è©²æ™‚æ®µå·²æœ‰å…¶ä»–å¸¶çœ‹</option>
                        <option value="sold">è©²ç‰©ä»¶å·²å”®å‡º</option>
                        <option value="maintenance">å ´åœ°ç¶­è­·ä¸­</option>
                        <option value="other">å…¶ä»–åŸå› </option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">è©³ç´°èªªæ˜</label>
                    <textarea class="form-control" rows="4" placeholder="è«‹è©³ç´°èªªæ˜æ‹’çµ•åŸå› ï¼ˆå¿…å¡«ï¼‰" required></textarea>
                </div>
            </form>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('rejectModal')">å–æ¶ˆ</button>
                <button class="btn btn-danger" onclick="submitReject()">ç¢ºèªæ‹’çµ•</button>
            </div>
        </div>
    </div>

    <!-- Modal: æ¡ˆå ´è©³æƒ… -->
    <div id="projectDetailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="project-detail-name"></h3>
            </div>
            <div style="display: grid; gap: 16px;">
                <div>
                    <p class="stat-label">åœ°å€</p>
                    <p style="font-weight: 600;" id="project-detail-address"></p>
                </div>
                <div>
                    <p class="stat-label">æ¡ˆå ´ç‹€æ…‹</p>
                    <span class="badge badge-success">é€²è¡Œä¸­</span>
                </div>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-top: 16px;">
                    <div style="text-align: center; padding: 16px; background: var(--bg-color); border-radius: 8px;">
                        <p class="stat-label">ç¸½å ±å‚™æ•¸</p>
                        <p style="font-size: 24px; font-weight: 700; color: var(--primary-color);">28</p>
                    </div>
                    <div style="text-align: center; padding: 16px; background: var(--bg-color); border-radius: 8px;">
                        <p class="stat-label">ç¸½å¸¶çœ‹æ•¸</p>
                        <p style="font-size: 24px; font-weight: 700; color: var(--info-color);">15</p>
                    </div>
                    <div style="text-align: center; padding: 16px; background: var(--bg-color); border-radius: 8px;">
                        <p class="stat-label">ç¸½æˆäº¤æ•¸</p>
                        <p style="font-size: 24px; font-weight: 700; color: var(--success-color);">3</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('projectDetailModal')">é—œé–‰</button>
            </div>
        </div>
    </div>

    <script>
        // ===== ç™»å…¥/è¨»å†ŠåŠŸèƒ½ =====
        let regCurrentStep = 1;
        let regSmsCodeSent = false;
        let regSmsTimer = null;
        const registrationData = {};

        // é¡¯ç¤ºç™»å…¥é é¢
        function showLoginPage() {
            document.getElementById('loginPage').classList.add('active');
            document.getElementById('registerPage').classList.remove('active');
            // é‡ç½®è¨»å†Šæµç¨‹
            regCurrentStep = 1;
            document.querySelectorAll('#registerPage .auth-form-section').forEach(s => s.classList.remove('active'));
            document.getElementById('regStep1').classList.add('active');
            document.querySelectorAll('#registerPage .step').forEach(s => {
                s.classList.remove('active', 'completed');
            });
            document.querySelector('#registerPage .step[data-step="1"]').classList.add('active');
        }

        // é¡¯ç¤ºè¨»å†Šé é¢
        function showRegisterPage() {
            document.getElementById('loginPage').classList.remove('active');
            document.getElementById('registerPage').classList.add('active');
        }

        // ç™»å…¥ï¼ˆç„¡æ ¡é©—ï¼‰
        function handleLogin(event) {
            event.preventDefault();
            // ç›´æ¥ç™»å…¥ï¼Œä¸åšä»»ä½•æ ¡é©—
            document.getElementById('authWrapper').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
        }

        // è¨»å†Š Step 1: å…¬å¸ä»£ç¢¼é©—è­‰
        function handleRegCompanyCode(event) {
            event.preventDefault();
            const companyCode = document.getElementById('regCompanyCode').value;
            registrationData.companyCode = companyCode;
            regNextStep();
        }

        // è¨»å†Š Step 2: å€‹äººè³‡æ–™
        function handleRegPersonalInfo(event) {
            event.preventDefault();
            const realName = document.getElementById('regRealName').value;
            const idNumber = document.getElementById('regIdNumber').value;
            registrationData.realName = realName;
            registrationData.idNumber = idNumber;
            regNextStep();
        }

        // è¨»å†Š Step 3: ç™¼é€é©—è­‰ç¢¼
        function sendVerificationCode() {
            const phoneNumber = document.getElementById('regPhoneNumber').value;
            const smsCodeGroup = document.getElementById('smsCodeGroup');
            const verifyBtn = document.getElementById('verifyPhoneBtn');

            // ç›´æ¥é¡¯ç¤ºé©—è­‰ç¢¼è¼¸å…¥æ¡†
            smsCodeGroup.style.display = 'block';
            verifyBtn.disabled = false;
            registrationData.phoneNumber = phoneNumber;
        }

        // è¨»å†Š Step 3: æ‰‹æ©Ÿé©—è­‰
        function handleRegPhoneVerification(event) {
            event.preventDefault();
            regNextStep();
        }

        // è¨»å†Š Step 4: å¯†ç¢¼å¼·åº¦æª¢æŸ¥ï¼ˆç„¡æ ¡é©—ï¼‰
        function checkPasswordStrength() {
            // ä¸åšä»»ä½•æ ¡é©—
        }

        function checkPasswordMatch() {
            // ä¸åšä»»ä½•æ ¡é©—
        }

        function updateSubmitButton() {
            // ä¸åšä»»ä½•æ ¡é©—ï¼ŒæŒ‰éˆ•æ°¸é å¯ç”¨
        }

        // è¨»å†Š Step 4: å®Œæˆå¯†ç¢¼è¨­å®š
        function handleRegPasswordSetup(event) {
            event.preventDefault();
            const password = document.getElementById('regPassword').value;
            registrationData.password = password;

            console.log('Registration Data:', {
                ...registrationData,
                password: '***ENCRYPTED***'
            });

            regNextStep();
        }

        // è¨»å†Šæ­¥é©Ÿå°èˆª
        function regNextStep() {
            if (regCurrentStep < 5) {
                document.getElementById(`regStep${regCurrentStep}`).classList.remove('active');

                if (regCurrentStep < 4) {
                    document.querySelector(`#registerPage .step[data-step="${regCurrentStep}"]`).classList.remove('active');
                    document.querySelector(`#registerPage .step[data-step="${regCurrentStep}"]`).classList.add('completed');
                }

                regCurrentStep++;
                document.getElementById(`regStep${regCurrentStep}`).classList.add('active');

                if (regCurrentStep <= 4) {
                    document.querySelector(`#registerPage .step[data-step="${regCurrentStep}"]`).classList.add('active');
                }
            }
        }

        function regPrevStep() {
            if (regCurrentStep > 1) {
                document.getElementById(`regStep${regCurrentStep}`).classList.remove('active');
                document.querySelector(`#registerPage .step[data-step="${regCurrentStep}"]`).classList.remove('active');

                regCurrentStep--;
                document.getElementById(`regStep${regCurrentStep}`).classList.add('active');
                document.querySelector(`#registerPage .step[data-step="${regCurrentStep}"]`).classList.remove('completed');
                document.querySelector(`#registerPage .step[data-step="${regCurrentStep}"]`).classList.add('active');
            }
        }

        // è¨»å†Šå®Œæˆï¼Œè¿”å›ç™»å…¥
        function backToLogin() {
            showLoginPage();
        }

        // ===== ä¸»æ‡‰ç”¨åŠŸèƒ½ =====

        // é é¢åˆ‡æ›
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function() {
                document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                document.querySelectorAll('.page-content').forEach(p => p.classList.remove('active'));

                this.classList.add('active');
                const pageId = this.getAttribute('data-page');
                document.getElementById(pageId).classList.add('active');

                const titles = {
                    'dashboard': { title: 'æ¡ˆå ´ç¸½è¦½', subtitle: 'æŒæ¡æ‰€æœ‰æ¡ˆå ´èˆ‡å ±å‚™å£“åŠ›' },
                    'bookings': { title: 'å ±å‚™å¯©æ ¸ç®¡ç†', subtitle: 'è™•ç†ä»²ä»‹å ±å‚™çš„æ ¸å¯èˆ‡æ‹’çµ•' },
                    'qr-verify': { title: 'QR Code æ ¸é©—', subtitle: 'ç¢ºä¿å¸¶çœ‹çœŸå¯¦æ€§' },
                    'logs': { title: 'æ“ä½œæ—¥èªŒ', subtitle: 'æ‰€æœ‰é—œéµæ“ä½œç•™ç—•è¿½æº¯' }
                };

                if (titles[pageId]) {
                    document.getElementById('page-title').textContent = titles[pageId].title;
                    document.getElementById('page-subtitle').textContent = titles[pageId].subtitle;
                }
            });
        });

        // æ¨™ç±¤é åˆ‡æ›
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', function() {
                const parent = this.parentElement;
                parent.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // Modal æ§åˆ¶
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // å ±å‚™å¯©æ ¸åŠŸèƒ½
        function approveBooking(bookingId) {
            document.getElementById('approve-booking-id').textContent = bookingId;
            document.getElementById('approve-project-name').textContent = 'ä¿¡ç¾©ä¹‹æ˜Ÿ';
            openModal('approveModal');
        }

        function submitApprove() {
            const form = document.getElementById('approveForm');
            if (!form.checkValidity()) {
                alert('è«‹å¡«å¯«å¿…å¡«æ¬„ä½ï¼šå¯¦éš›å¸¶çœ‹æ™‚é–“');
                return;
            }
            alert('å ±å‚™æ ¸å¯æˆåŠŸï¼ç³»çµ±å·²é€šçŸ¥ä»²ä»‹æ¥­å‹™ã€‚');
            closeModal('approveModal');
            // æ›´æ–°å¾…è™•ç†æ•¸é‡
            const pendingCount = document.getElementById('pending-count');
            pendingCount.textContent = parseInt(pendingCount.textContent) - 1;
        }

        function rejectBooking(bookingId) {
            document.getElementById('reject-booking-id').textContent = bookingId;
            document.getElementById('reject-project-name').textContent = 'ä¿¡ç¾©ä¹‹æ˜Ÿ';
            openModal('rejectModal');
        }

        function submitReject() {
            const form = document.getElementById('rejectForm');
            if (!form.checkValidity()) {
                alert('è«‹å¡«å¯«æ‹’çµ•åŸå› ï¼');
                return;
            }
            alert('å ±å‚™å·²æ‹’çµ•ï¼ç³»çµ±å·²é€šçŸ¥ä»²ä»‹æ¥­å‹™ã€‚');
            closeModal('rejectModal');
            // æ›´æ–°å¾…è™•ç†æ•¸é‡
            const pendingCount = document.getElementById('pending-count');
            pendingCount.textContent = parseInt(pendingCount.textContent) - 1;
        }

        // QR æ ¸é©—åŠŸèƒ½
        function startQRScan() {
            alert('ã€æ¨¡æ“¬æƒæã€‘\n\næƒææˆåŠŸï¼\nå ±å‚™ç·¨è™Ÿï¼š#BR202601012\næ¡ˆå ´ï¼šä¿¡ç¾©ä¹‹æ˜Ÿ\næ¥­å‹™ï¼šæå°è¯\n\nå¸¶çœ‹æ ¸é©—å®Œæˆï¼');
        }

        function verifyByCode() {
            const code = document.getElementById('verify-code').value;
            if (code.length !== 6) {
                alert('è«‹è¼¸å…¥å®Œæ•´çš„ 6 ä½æ•¸æ ¸é©—ç¢¼');
                return;
            }
            alert('ã€ä¾‹å¤–æ ¸é©—ã€‘\n\næ ¸é©—æˆåŠŸï¼\næ ¸é©—ç¢¼ï¼š' + code + '\nå ±å‚™ç·¨è™Ÿï¼š#BR202601013\næ¡ˆå ´ï¼šæ¾å±±æ–°åŸ\n\nå¸¶çœ‹æ ¸é©—å®Œæˆï¼');
            document.getElementById('verify-code').value = '';
        }

        // æ¡ˆå ´è©³æƒ…
        function viewProjectDetail(projectName) {
            const projectData = {
                'ä¿¡ç¾©ä¹‹æ˜Ÿ': { address: 'ä¿¡ç¾©å€å¿ å­æ±è·¯äº”æ®µ' },
                'æ¾å±±æ–°åŸ': { address: 'æ¾å±±å€å—äº¬æ±è·¯å››æ®µ' },
                'å¤§å®‰è¯å»ˆ': { address: 'å¤§å®‰å€å¾©èˆˆå—è·¯ä¸€æ®µ' },
                'å…§æ¹–ç§‘æŠ€åœ’å€': { address: 'å…§æ¹–å€ç‘å…‰è·¯' },
                'å—æ¸¯ç¶“è²¿': { address: 'å—æ¸¯å€ç¶“è²¿äºŒè·¯' }
            };

            const data = projectData[projectName];
            document.getElementById('project-detail-name').textContent = projectName;
            document.getElementById('project-detail-address').textContent = data.address;
            openModal('projectDetailModal');
        }

        // é»æ“Š modal å¤–éƒ¨é—œé–‰
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                }
            });
        });

        // é€šçŸ¥åŠŸèƒ½
        function toggleNotifications() {
            const panel = document.getElementById('notificationPanel');
            panel.classList.toggle('active');
        }

        function markAllRead() {
            document.querySelectorAll('.notification-item.unread').forEach(item => {
                item.classList.remove('unread');
            });
            document.querySelector('.notification-badge').textContent = '0';
            document.querySelector('.notification-badge').style.display = 'none';
            alert('å·²å°‡æ‰€æœ‰é€šçŸ¥æ¨™è¨˜ç‚ºå·²è®€');
        }

        function viewNotification(type, target) {
            // æ¨™è¨˜ç‚ºå·²è®€
            if (event && event.target) {
                event.target.closest('.notification-item').classList.remove('unread');
            }
            updateNotificationCount();

            // é—œé–‰é€šçŸ¥é¢æ¿
            toggleNotifications();

            // æ ¹æ“šé€šçŸ¥é¡å‹è·³è½‰åˆ°å°æ‡‰é é¢
            if (target) {
                setTimeout(() => {
                    if (type === 'sla') {
                        switchPage('sla-monitor');
                    } else if (type === 'reschedule') {
                        switchPage('bookings');
                    } else if (type === 'pending') {
                        switchPage('bookings');
                    } else if (type === 'settlement' || type === 'deal') {
                        switchPage('deal-management');
                    } else if (type === 'cancel') {
                        switchPage('cancelled-after-approved');
                    } else if (type === 'qr') {
                        switchPage('qr-verify');
                    } else if (target) {
                        switchPage(target);
                    }
                }, 200);
            }
        }

        function viewAllNotifications() {
            alert('è·³è½‰åˆ°é€šçŸ¥ä¸­å¿ƒé é¢');
            toggleNotifications();
        }

        function updateNotificationCount() {
            const unreadCount = document.querySelectorAll('.notification-item.unread').length;
            const badge = document.querySelector('.notification-badge');
            badge.textContent = unreadCount;
            if (unreadCount === 0) {
                badge.style.display = 'none';
            }
        }

        // é»æ“Šå¤–éƒ¨é—œé–‰é€šçŸ¥é¢æ¿
        document.addEventListener('click', function(e) {
            const panel = document.getElementById('notificationPanel');
            const btn = document.querySelector('.notification-btn');
            if (panel && !panel.contains(e.target) && !btn.contains(e.target)) {
                panel.classList.remove('active');
            }
        });

        // ===== æ”¶è¨‚æˆäº¤ç®¡ç† =====
        function switchDealTab(tabName) {
            // éš±è—æ‰€æœ‰tab-content
            document.querySelectorAll('#deal-management .tab-content').forEach(content => {
                content.classList.remove('active');
            });

            // ç§»é™¤æ‰€æœ‰tab active
            document.querySelectorAll('#deal-management .tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // é¡¯ç¤ºé¸ä¸­çš„å…§å®¹
            document.getElementById('deal-' + tabName).classList.add('active');

            // è¨­ç½®tabç‚ºactive
            event.target.classList.add('active');
        }

        function confirmDeal(bookingId) {
            if (confirm('ç¢ºå®šè¦ç¢ºèªæ­¤æ¡ˆä»¶æˆäº¤å—ï¼Ÿ')) {
                alert('âœ“ æˆäº¤ç¢ºèªæˆåŠŸ\n\nå ±å‚™ç·¨è™Ÿï¼š' + bookingId + '\nå·²è½‰å…¥ã€Œå·²æˆäº¤ã€åˆ—è¡¨');
            }
        }

        function voidDeposit(bookingId) {
            const reason = prompt('è«‹è¼¸å…¥ä½œå»¢åŸå› ï¼š');
            if (reason) {
                alert('âœ“ è¨‚é‡‘å·²ä½œå»¢\n\nå ±å‚™ç·¨è™Ÿï¼š' + bookingId + '\nä½œå»¢åŸå› ï¼š' + reason);
            }
        }

        function approveSettlement(bookingId) {
            if (confirm('ç¢ºå®šè¦æ ¸å¯æ­¤ä½£é‡‘çµç®—å—ï¼Ÿ')) {
                alert('âœ“ çµç®—æ ¸å¯æˆåŠŸ\n\nå ±å‚™ç·¨è™Ÿï¼š' + bookingId + '\nä½£é‡‘å°‡æ–¼3å€‹å·¥ä½œå¤©å…§æ’¥æ¬¾');
            }
        }

        function viewDealDetail(bookingId) {
            alert('æŸ¥çœ‹æˆäº¤è©³æƒ…ï¼š' + bookingId);
        }

        function viewVoidDetail(bookingId) {
            alert('æŸ¥çœ‹ä½œå»¢è©³æƒ…ï¼š' + bookingId);
        }

        function exportDeals() {
            alert('åŒ¯å‡ºæˆäº¤å ±è¡¨åŠŸèƒ½\nå¯¦éš›æ‡‰ç”¨ä¸­æœƒç”ŸæˆExcelæª”æ¡ˆ');
        }

        // ===== SLAç›£æ§ =====
        function contactAgent(bookingId) {
            if (confirm('ç¢ºå®šè¦ç™¼é€æé†’é€šçŸ¥çµ¦ä»²ä»‹å—ï¼Ÿ')) {
                alert('âœ“ å·²ç™¼é€æé†’é€šçŸ¥\n\nå ±å‚™ç·¨è™Ÿï¼š' + bookingId + '\nä»²ä»‹å°‡æ”¶åˆ°ç°¡è¨ŠåŠç«™å…§é€šçŸ¥');
            }
        }

        function exportSLAReport() {
            alert('åŒ¯å‡ºSLAé€¾æœŸå ±è¡¨åŠŸèƒ½\nå¯¦éš›æ‡‰ç”¨ä¸­æœƒç”ŸæˆExcelæª”æ¡ˆ');
        }

        // ===== æ ¸å¯å¾Œå–æ¶ˆå°ˆå€ =====
        function viewCancelDetail(bookingId) {
            alert('æŸ¥çœ‹å–æ¶ˆè©³æƒ…ï¼š' + bookingId);
        }

        function exportCancelReport() {
            alert('åŒ¯å‡ºå–æ¶ˆåˆ†æå ±è¡¨åŠŸèƒ½\nå¯¦éš›æ‡‰ç”¨ä¸­æœƒç”Ÿæˆåˆ†æå ±å‘Š');
        }

        // ===== æ¡ˆå ´ç®¡ç† =====
        function editProject(projectName) {
            alert('ç·¨è¼¯æ¡ˆå ´ï¼š' + projectName);
        }

        function viewProjectStats(projectName) {
            alert('æŸ¥çœ‹æ¡ˆå ´çµ±è¨ˆï¼š' + projectName);
        }

        // ===== ä»£éŠ·äººå“¡ç®¡ç† =====
        function editStaff(staffName) {
            alert('ç·¨è¼¯äººå“¡ï¼š' + staffName);
        }

        // ===== ç¨½æ ¸æ—¥èªŒ =====
        function exportAuditLog() {
            alert('åŒ¯å‡ºç¨½æ ¸æ—¥èªŒåŠŸèƒ½\nå¯¦éš›æ‡‰ç”¨ä¸­æœƒç”ŸæˆExcelæª”æ¡ˆ');
        }
    </script>
</body>
</html>
